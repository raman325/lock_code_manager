var n,t,e,i,o,s,a,r,l,c,d,h,p,u,v,g,_,m,f,y,b,x,w,k,C,E,S,A,$,L,M,z,H,P,N,O,D,U,R,I,V,T,j,F,B,W,q,Z,K,J,Y,G,Q,X,nn,tn,en,on,sn,an,rn,ln,cn,dn,hn,pn,un,vn,gn,_n,mn,fn,yn,bn,xn,wn,kn,Cn,En,Sn,An,$n,Ln,Mn,zn,Hn,Pn,Nn,On,Dn,Un,Rn,In,Vn,Tn,jn,Fn,Bn,Wn,qn,Zn,Kn,Jn,Yn=["config_entry_title"];function Gn(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function Qn(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,i)}return e}function Xn(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(e),!0).forEach((function(t){nt(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Qn(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function nt(n,t,e){return(t=function(n){var t=function(n,t){if("object"!=typeof n||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var i=e.call(n,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==typeof t?t:t+""}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function tt(n,t,e,i,o,s,a){try{var r=n[s](a),l=r.value}catch(n){return void e(n)}r.done?t(l):Promise.resolve(l).then(i,o)}function et(n){return function(){var t=this,e=arguments;return new Promise((function(i,o){var s=n.apply(t,e);function a(n){tt(s,i,o,a,r,"next",n)}function r(n){tt(s,i,o,a,r,"throw",n)}a(void 0)}))}}var it=globalThis,ot=it.ShadowRoot&&(void 0===it.ShadyCSS||it.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,st=Symbol(),at=new WeakMap,rt=class{constructor(n,t,e){if(this._$cssResult$=!0,e!==st)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=n,this.t=t}get styleSheet(){var n=this.o,t=this.t;if(ot&&void 0===n){var e=void 0!==t&&1===t.length;e&&(n=at.get(t)),void 0===n&&((this.o=n=new CSSStyleSheet).replaceSync(this.cssText),e&&at.set(t,n))}return n}toString(){return this.cssText}},lt=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];var o=1===n.length?n[0]:e.reduce(((t,e,i)=>t+(n=>{if(!0===n._$cssResult$)return n.cssText;if("number"==typeof n)return n;throw Error("Value passed to 'css' function must be a 'css' function result: "+n+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(e)+n[i+1]),n[0]);return new rt(o,n,st)},ct=ot?n=>n:n=>n instanceof CSSStyleSheet?(n=>{var t="";for(var e of n.cssRules)t+=e.cssText;return(n=>new rt("string"==typeof n?n:n+"",void 0,st))(t)})(n):n,{is:dt,defineProperty:ht,getOwnPropertyDescriptor:pt,getOwnPropertyNames:ut,getOwnPropertySymbols:vt,getPrototypeOf:gt}=Object,_t=globalThis,mt=_t.trustedTypes,ft=mt?mt.emptyScript:"",yt=_t.reactiveElementPolyfillSupport,bt=(n,t)=>n,xt={toAttribute(n,t){switch(t){case Boolean:n=n?ft:null;break;case Object:case Array:n=null==n?n:JSON.stringify(n)}return n},fromAttribute(n,t){var e=n;switch(t){case Boolean:e=null!==n;break;case Number:e=null===n?null:Number(n);break;case Object:case Array:try{e=JSON.parse(n)}catch(n){e=null}}return e}},wt=(n,t)=>!dt(n,t),kt={attribute:!0,type:String,converter:xt,reflect:!1,useDefault:!1,hasChanged:wt};null!==(n=Symbol.metadata)&&void 0!==n||(Symbol.metadata=Symbol("metadata")),null!==(t=_t.litPropertyMetadata)&&void 0!==t||(_t.litPropertyMetadata=new WeakMap);var Ct=class extends HTMLElement{static addInitializer(n){var t;this._$Ei(),(null!==(t=this.l)&&void 0!==t?t:this.l=[]).push(n)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kt;if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(n)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(n,t),!t.noAccessor){var e=Symbol(),i=this.getPropertyDescriptor(n,e,t);void 0!==i&&ht(this.prototype,n,i)}}static getPropertyDescriptor(n,t,e){var i,{get:o,set:s}=null!==(i=pt(this.prototype,n))&&void 0!==i?i:{get(){return this[t]},set(n){this[t]=n}};return{get:o,set(t){var i=null==o?void 0:o.call(this);null!=s&&s.call(this,t),this.requestUpdate(n,i,e)},configurable:!0,enumerable:!0}}static getPropertyOptions(n){var t;return null!==(t=this.elementProperties.get(n))&&void 0!==t?t:kt}static _$Ei(){if(!this.hasOwnProperty(bt("elementProperties"))){var n=gt(this);n.finalize(),void 0!==n.l&&(this.l=[...n.l]),this.elementProperties=new Map(n.elementProperties)}}static finalize(){if(!this.hasOwnProperty(bt("finalized"))){if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(bt("properties"))){var n=this.properties,t=[...ut(n),...vt(n)];for(var e of t)this.createProperty(e,n[e])}var i=this[Symbol.metadata];if(null!==i){var o=litPropertyMetadata.get(i);if(void 0!==o)for(var[s,a]of o)this.elementProperties.set(s,a)}for(var[r,l]of(this._$Eh=new Map,this.elementProperties)){var c=this._$Eu(r,l);void 0!==c&&this._$Eh.set(c,r)}this.elementStyles=this.finalizeStyles(this.styles)}}static finalizeStyles(n){var t=[];if(Array.isArray(n)){var e=new Set(n.flat(1/0).reverse());for(var i of e)t.unshift(ct(i))}else void 0!==n&&t.push(ct(n));return t}static _$Eu(n,t){var e=t.attribute;return!1===e?void 0:"string"==typeof e?e:"string"==typeof n?n.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var n;this._$ES=new Promise((n=>this.enableUpdating=n)),this._$AL=new Map,this._$E_(),this.requestUpdate(),null===(n=this.constructor.l)||void 0===n||n.forEach((n=>n(this)))}addController(n){var t,e;(null!==(t=this._$EO)&&void 0!==t?t:this._$EO=new Set).add(n),void 0!==this.renderRoot&&this.isConnected&&(null===(e=n.hostConnected)||void 0===e||e.call(n))}removeController(n){var t;null===(t=this._$EO)||void 0===t||t.delete(n)}_$E_(){var n=new Map,t=this.constructor.elementProperties;for(var e of t.keys())this.hasOwnProperty(e)&&(n.set(e,this[e]),delete this[e]);n.size>0&&(this._$Ep=n)}createRenderRoot(){var n,t=null!==(n=this.shadowRoot)&&void 0!==n?n:this.attachShadow(this.constructor.shadowRootOptions);return((n,t)=>{if(ot)n.adoptedStyleSheets=t.map((n=>n instanceof CSSStyleSheet?n:n.styleSheet));else for(var e of t){var i=document.createElement("style"),o=it.litNonce;void 0!==o&&i.setAttribute("nonce",o),i.textContent=e.cssText,n.appendChild(i)}})(t,this.constructor.elementStyles),t}connectedCallback(){var n,t;null!==(n=this.renderRoot)&&void 0!==n||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$EO)||void 0===t||t.forEach((n=>{var t;return null===(t=n.hostConnected)||void 0===t?void 0:t.call(n)}))}enableUpdating(n){}disconnectedCallback(){var n;null===(n=this._$EO)||void 0===n||n.forEach((n=>{var t;return null===(t=n.hostDisconnected)||void 0===t?void 0:t.call(n)}))}attributeChangedCallback(n,t,e){this._$AK(n,e)}_$ET(n,t){var e=this.constructor.elementProperties.get(n),i=this.constructor._$Eu(n,e);if(void 0!==i&&!0===e.reflect){var o,s=(void 0!==(null===(o=e.converter)||void 0===o?void 0:o.toAttribute)?e.converter:xt).toAttribute(t,e.type);this._$Em=n,null==s?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(n,t){var e=this.constructor,i=e._$Eh.get(n);if(void 0!==i&&this._$Em!==i){var o,s,a,r=e.getPropertyOptions(i),l="function"==typeof r.converter?{fromAttribute:r.converter}:void 0!==(null===(o=r.converter)||void 0===o?void 0:o.fromAttribute)?r.converter:xt;this._$Em=i;var c=l.fromAttribute(t,r.type);this[i]=null!==(s=null!=c?c:null===(a=this._$Ej)||void 0===a?void 0:a.get(i))&&void 0!==s?s:c,this._$Em=null}}requestUpdate(n,t,e){if(void 0!==n){var i,o,s=this.constructor,a=this[n];if(null!=e||(e=s.getPropertyOptions(n)),!((null!==(i=e.hasChanged)&&void 0!==i?i:wt)(a,t)||e.useDefault&&e.reflect&&a===(null===(o=this._$Ej)||void 0===o?void 0:o.get(n))&&!this.hasAttribute(s._$Eu(n,e))))return;this.C(n,t,e)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(n,t,e,i){var o,s,a,{useDefault:r,reflect:l,wrapped:c}=e;r&&!(null!==(o=this._$Ej)&&void 0!==o?o:this._$Ej=new Map).has(n)&&(this._$Ej.set(n,null!==(s=null!=i?i:t)&&void 0!==s?s:this[n]),!0!==c||void 0!==i)||(this._$AL.has(n)||(this.hasUpdated||r||(t=void 0),this._$AL.set(n,t)),!0===l&&this._$Em!==n&&(null!==(a=this._$Eq)&&void 0!==a?a:this._$Eq=new Set).add(n))}_$EP(){var n=this;return et((function*(){n.isUpdatePending=!0;try{yield n._$ES}catch(t){Promise.reject(t)}var t=n.scheduleUpdate();return null!=t&&(yield t),!n.isUpdatePending}))()}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(this.isUpdatePending){if(!this.hasUpdated){var n;if(null!==(n=this.renderRoot)&&void 0!==n||(this.renderRoot=this.createRenderRoot()),this._$Ep){for(var[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}var i=this.constructor.elementProperties;if(i.size>0)for(var[o,s]of i){var{wrapped:a}=s,r=this[o];!0!==a||this._$AL.has(o)||void 0===r||this.C(o,void 0,s,r)}}var l=!1,c=this._$AL;try{var d;(l=this.shouldUpdate(c))?(this.willUpdate(c),null!==(d=this._$EO)&&void 0!==d&&d.forEach((n=>{var t;return null===(t=n.hostUpdate)||void 0===t?void 0:t.call(n)})),this.update(c)):this._$EM()}catch(c){throw l=!1,this._$EM(),c}l&&this._$AE(c)}}willUpdate(n){}_$AE(n){var t;null!==(t=this._$EO)&&void 0!==t&&t.forEach((n=>{var t;return null===(t=n.hostUpdated)||void 0===t?void 0:t.call(n)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(n)),this.updated(n)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(n){return!0}update(n){this._$Eq&&(this._$Eq=this._$Eq.forEach((n=>this._$ET(n,this[n])))),this._$EM()}updated(n){}firstUpdated(n){}};Ct.elementStyles=[],Ct.shadowRootOptions={mode:"open"},Ct[bt("elementProperties")]=new Map,Ct[bt("finalized")]=new Map,null!=yt&&yt({ReactiveElement:Ct}),(null!==(e=_t.reactiveElementVersions)&&void 0!==e?e:_t.reactiveElementVersions=[]).push("2.1.1");var Et=globalThis,St=Et.trustedTypes,At=St?St.createPolicy("lit-html",{createHTML:n=>n}):void 0,$t="$lit$",Lt="lit$".concat(Math.random().toFixed(9).slice(2),"$"),Mt="?"+Lt,zt="<".concat(Mt,">"),Ht=document,Pt=()=>Ht.createComment(""),Nt=n=>null===n||"object"!=typeof n&&"function"!=typeof n,Ot=Array.isArray,Dt="[ \t\n\f\r]",Ut=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Rt=/-->/g,It=/>/g,Vt=RegExp(">|".concat(Dt,"(?:([^\\s\"'>=/]+)(").concat(Dt,"*=").concat(Dt,"*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)"),"g"),Tt=/'/g,jt=/"/g,Ft=/^(?:script|style|textarea|title)$/i,Bt=(n=>function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];return{_$litType$:n,strings:t,values:i}})(1),Wt=Symbol.for("lit-noChange"),qt=Symbol.for("lit-nothing"),Zt=new WeakMap,Kt=Ht.createTreeWalker(Ht,129);function Jt(n,t){if(!Ot(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==At?At.createHTML(t):t}var Yt=(n,t)=>{for(var e,i=n.length-1,o=[],s=2===t?"<svg>":3===t?"<math>":"",a=Ut,r=0;r<i;r++){for(var l=n[r],c=void 0,d=void 0,h=-1,p=0;p<l.length&&(a.lastIndex=p,null!==(d=a.exec(l)));)p=a.lastIndex,a===Ut?"!--"===d[1]?a=Rt:void 0!==d[1]?a=It:void 0!==d[2]?(Ft.test(d[2])&&(e=RegExp("</"+d[2],"g")),a=Vt):void 0!==d[3]&&(a=Vt):a===Vt?">"===d[0]?(a=null!=e?e:Ut,h=-1):void 0===d[1]?h=-2:(h=a.lastIndex-d[2].length,c=d[1],a=void 0===d[3]?Vt:'"'===d[3]?jt:Tt):a===jt||a===Tt?a=Vt:a===Rt||a===It?a=Ut:(a=Vt,e=void 0);var u=a===Vt&&n[r+1].startsWith("/>")?" ":"";s+=a===Ut?l+zt:h>=0?(o.push(c),l.slice(0,h)+$t+l.slice(h)+Lt+u):l+Lt+(-2===h?r:u)}return[Jt(n,s+(n[i]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),o]};class Gt{constructor(n,t){var e,{strings:i,_$litType$:o}=n;this.parts=[];var s=0,a=0,r=i.length-1,l=this.parts,[c,d]=Yt(i,o);if(this.el=Gt.createElement(c,t),Kt.currentNode=this.el.content,2===o||3===o){var h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;null!==(e=Kt.nextNode())&&l.length<r;){if(1===e.nodeType){if(e.hasAttributes())for(var p of e.getAttributeNames())if(p.endsWith($t)){var u=d[a++],v=e.getAttribute(p).split(Lt),g=/([.?@])?(.*)/.exec(u);l.push({type:1,index:s,name:g[2],strings:v,ctor:"."===g[1]?ee:"?"===g[1]?ie:"@"===g[1]?oe:te}),e.removeAttribute(p)}else p.startsWith(Lt)&&(l.push({type:6,index:s}),e.removeAttribute(p));if(Ft.test(e.tagName)){var _=e.textContent.split(Lt),m=_.length-1;if(m>0){e.textContent=St?St.emptyScript:"";for(var f=0;f<m;f++)e.append(_[f],Pt()),Kt.nextNode(),l.push({type:2,index:++s});e.append(_[m],Pt())}}}else if(8===e.nodeType)if(e.data===Mt)l.push({type:2,index:s});else for(var y=-1;-1!==(y=e.data.indexOf(Lt,y+1));)l.push({type:7,index:s}),y+=Lt.length-1;s++}}static createElement(n,t){var e=Ht.createElement("template");return e.innerHTML=n,e}}function Qt(n,t){var e,i,o,s,a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,l=arguments.length>3?arguments[3]:void 0;if(t===Wt)return t;var c=void 0!==l?null===(e=r._$Co)||void 0===e?void 0:e[l]:r._$Cl,d=Nt(t)?void 0:t._$litDirective$;return(null===(i=c)||void 0===i?void 0:i.constructor)!==d&&(null!==(o=c)&&void 0!==o&&null!==(s=o._$AO)&&void 0!==s&&s.call(o,!1),void 0===d?c=void 0:(c=new d(n))._$AT(n,r,l),void 0!==l?(null!==(a=r._$Co)&&void 0!==a?a:r._$Co=[])[l]=c:r._$Cl=c),void 0!==c&&(t=Qt(n,c._$AS(n,t.values),c,l)),t}class Xt{constructor(n,t){this._$AV=[],this._$AN=void 0,this._$AD=n,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(n){var t,{el:{content:e},parts:i}=this._$AD,o=(null!==(t=null==n?void 0:n.creationScope)&&void 0!==t?t:Ht).importNode(e,!0);Kt.currentNode=o;for(var s=Kt.nextNode(),a=0,r=0,l=i[0];void 0!==l;){var c;if(a===l.index){var d=void 0;2===l.type?d=new ne(s,s.nextSibling,this,n):1===l.type?d=new l.ctor(s,l.name,l.strings,this,n):6===l.type&&(d=new se(s,this,n)),this._$AV.push(d),l=i[++r]}a!==(null===(c=l)||void 0===c?void 0:c.index)&&(s=Kt.nextNode(),a++)}return Kt.currentNode=Ht,o}p(n){var t=0;for(var e of this._$AV)void 0!==e&&(void 0!==e.strings?(e._$AI(n,e,t),t+=e.strings.length-2):e._$AI(n[t])),t++}}class ne{get _$AU(){var n,t;return null!==(n=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==n?n:this._$Cv}constructor(n,t,e,i){var o;this.type=2,this._$AH=qt,this._$AN=void 0,this._$AA=n,this._$AB=t,this._$AM=e,this.options=i,this._$Cv=null===(o=null==i?void 0:i.isConnected)||void 0===o||o}get parentNode(){var n,t=this._$AA.parentNode,e=this._$AM;return void 0!==e&&11===(null===(n=t)||void 0===n?void 0:n.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(n){n=Qt(this,n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this),Nt(n)?n===qt||null==n||""===n?(this._$AH!==qt&&this._$AR(),this._$AH=qt):n!==this._$AH&&n!==Wt&&this._(n):void 0!==n._$litType$?this.$(n):void 0!==n.nodeType?this.T(n):(n=>Ot(n)||"function"==typeof(null==n?void 0:n[Symbol.iterator]))(n)?this.k(n):this._(n)}O(n){return this._$AA.parentNode.insertBefore(n,this._$AB)}T(n){this._$AH!==n&&(this._$AR(),this._$AH=this.O(n))}_(n){this._$AH!==qt&&Nt(this._$AH)?this._$AA.nextSibling.data=n:this.T(Ht.createTextNode(n)),this._$AH=n}$(n){var t,{values:e,_$litType$:i}=n,o="number"==typeof i?this._$AC(n):(void 0===i.el&&(i.el=Gt.createElement(Jt(i.h,i.h[0]),this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===o)this._$AH.p(e);else{var s=new Xt(o,this),a=s.u(this.options);s.p(e),this.T(a),this._$AH=s}}_$AC(n){var t=Zt.get(n.strings);return void 0===t&&Zt.set(n.strings,t=new Gt(n)),t}k(n){Ot(this._$AH)||(this._$AH=[],this._$AR());var t,e=this._$AH,i=0;for(var o of n)i===e.length?e.push(t=new ne(this.O(Pt()),this.O(Pt()),this,this.options)):t=e[i],t._$AI(o),i++;i<e.length&&(this._$AR(t&&t._$AB.nextSibling,i),e.length=i)}_$AR(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,t=arguments.length>1?arguments[1]:void 0;for(null===(e=this._$AP)||void 0===e||e.call(this,!1,!0,t);n!==this._$AB;){var e,i=n.nextSibling;n.remove(),n=i}}setConnected(n){var t;void 0===this._$AM&&(this._$Cv=n,null===(t=this._$AP)||void 0===t||t.call(this,n))}}class te{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(n,t,e,i,o){this.type=1,this._$AH=qt,this._$AN=void 0,this.element=n,this.name=t,this._$AM=i,this.options=o,e.length>2||""!==e[0]||""!==e[1]?(this._$AH=Array(e.length-1).fill(new String),this.strings=e):this._$AH=qt}_$AI(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,e=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=this.strings,s=!1;if(void 0===o)n=Qt(this,n,t,0),(s=!Nt(n)||n!==this._$AH&&n!==Wt)&&(this._$AH=n);else{var a,r,l=n;for(n=o[0],a=0;a<o.length-1;a++)(r=Qt(this,l[e+a],t,a))===Wt&&(r=this._$AH[a]),s||(s=!Nt(r)||r!==this._$AH[a]),r===qt?n=qt:n!==qt&&(n+=(null!=r?r:"")+o[a+1]),this._$AH[a]=r}s&&!i&&this.j(n)}j(n){n===qt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=n?n:"")}}class ee extends te{constructor(){super(...arguments),this.type=3}j(n){this.element[this.name]=n===qt?void 0:n}}class ie extends te{constructor(){super(...arguments),this.type=4}j(n){this.element.toggleAttribute(this.name,!!n&&n!==qt)}}class oe extends te{constructor(n,t,e,i,o){super(n,t,e,i,o),this.type=5}_$AI(n){var t;if((n=null!==(t=Qt(this,n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,0))&&void 0!==t?t:qt)!==Wt){var e=this._$AH,i=n===qt&&e!==qt||n.capture!==e.capture||n.once!==e.once||n.passive!==e.passive,o=n!==qt&&(e===qt||i);i&&this.element.removeEventListener(this.name,this,e),o&&this.element.addEventListener(this.name,this,n),this._$AH=n}}handleEvent(n){var t,e;"function"==typeof this._$AH?this._$AH.call(null!==(t=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==t?t:this.element,n):this._$AH.handleEvent(n)}}class se{constructor(n,t,e){this.element=n,this.type=6,this._$AN=void 0,this._$AM=t,this.options=e}get _$AU(){return this._$AM._$AU}_$AI(n){Qt(this,n)}}var ae=Et.litHtmlPolyfillSupport;null!=ae&&ae(Gt,ne),(null!==(i=Et.litHtmlVersions)&&void 0!==i?i:Et.litHtmlVersions=[]).push("3.3.2");var re=globalThis;class le extends Ct{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n,t,e=super.createRenderRoot();return null!==(t=(n=this.renderOptions).renderBefore)&&void 0!==t||(n.renderBefore=e.firstChild),e}update(n){var t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(n),this._$Do=((n,t,e)=>{var i,o=null!==(i=null==e?void 0:e.renderBefore)&&void 0!==i?i:t,s=o._$litPart$;if(void 0===s){var a,r=null!==(a=null==e?void 0:e.renderBefore)&&void 0!==a?a:null;o._$litPart$=s=new ne(t.insertBefore(Pt(),r),r,void 0,null!=e?e:{})}return s._$AI(n),s})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var n;super.connectedCallback(),null===(n=this._$Do)||void 0===n||n.setConnected(!0)}disconnectedCallback(){var n;super.disconnectedCallback(),null===(n=this._$Do)||void 0===n||n.setConnected(!1)}render(){return Wt}}le._$litElement$=!0,le.finalized=!0,null===(o=re.litElementHydrateSupport)||void 0===o||o.call(re,{LitElement:le});var ce=re.litElementPolyfillSupport;null==ce||ce({LitElement:le}),(null!==(s=re.litElementVersions)&&void 0!==s?s:re.litElementVersions=[]).push("4.2.1");var de="code",he="pin_used",pe="active",ue="in_sync",ve=["number_of_uses","calendar","condition_entity"],ge={type:"divider"},_e="masked_with_reveal",me=!0,fe=!0,ye=!0,be=!0,xe=!0,we=!0;function ke(n){var t,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",i="àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìıİłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·",o="aaaaaaaaaacccddeeeeeeeegghiiiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz".concat(e),s=new RegExp(i.split("").join("|"),"g");return""===n?t="":(t=n.toString().toLowerCase().replace(s,(n=>o.charAt(i.indexOf(n)))).replace(/(\d),(?=\d)/g,"$1").replace(/[^a-z0-9]+/g,e).replace(new RegExp("(".concat(e,")\\1+"),"g"),"$1").replace(new RegExp("^".concat(e,"+")),"").replace(new RegExp("".concat(e,"+$")),""),""===t&&(t="unknown")),t}function Ce(n){return{cards:[{content:n,type:"markdown"}],title:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Lock Code Manager"}}function Ee(n,t,e,i){var o,s=arguments.length,a=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,t,e,i);else for(var r=n.length-1;r>=0;r--)(o=n[r])&&(a=(s<3?o(a):s>3?o(t,e,a):o(t,e))||a);return s>3&&a&&Object.defineProperty(t,e,a),a}"function"==typeof SuppressedError&&SuppressedError;var Se="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",Ae="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",$e="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z",Le="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",Me="M5.41,21L6.12,17H2.12L2.47,15H6.47L7.53,9H3.53L3.88,7H7.88L8.59,3H10.59L9.88,7H15.88L16.59,3H18.59L17.88,7H21.88L21.53,9H17.53L16.47,15H20.47L20.12,17H16.12L15.41,21H13.41L14.12,17H8.12L7.41,21H5.41M9.53,9L8.47,15H14.47L15.53,9H9.53Z",ze="M17,7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7M17,15A3,3 0 0,1 14,12A3,3 0 0,1 17,9A3,3 0 0,1 20,12A3,3 0 0,1 17,15Z",He="M17 6H7C3.69 6 1 8.69 1 12S3.69 18 7 18H17C20.31 18 23 15.31 23 12S20.31 6 17 6M17 16H7C4.79 16 3 14.21 3 12S4.79 8 7 8H17C19.21 8 21 9.79 21 12S19.21 16 17 16M17 9C15.34 9 14 10.34 14 12S15.34 15 17 15 20 13.66 20 12 18.66 9 17 9Z",Pe={attribute:!0,type:String,converter:xt,reflect:!1,hasChanged:wt},Ne=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,{kind:i,metadata:o}=e,s=globalThis.litPropertyMetadata.get(o);if(void 0===s&&globalThis.litPropertyMetadata.set(o,s=new Map),"setter"===i&&((n=Object.create(n)).wrapped=!0),s.set(e.name,n),"accessor"===i){var{name:a}=e;return{set(e){var i=t.get.call(this);t.set.call(this,e),this.requestUpdate(a,i,n)},init(t){return void 0!==t&&this.C(a,void 0,n,t),t}}}if("setter"===i){var{name:r}=e;return function(e){var i=this[r];t.call(this,e),this.requestUpdate(r,i,n)}}throw Error("Unsupported decorator location: "+i)};function Oe(n){return(t,e)=>"object"==typeof e?Ne(n,t,e):((n,t,e)=>{var i=t.hasOwnProperty(e);return t.constructor.createProperty(e,n),i?Object.getOwnPropertyDescriptor(t,e):void 0})(n,t,e)}function De(n){return Oe(Xn(Xn({},n),{},{state:!0,attribute:!1}))}var Ue=lt(a||(a=Gn(["\n    :host {\n        /* Section backgrounds */\n        --lcm-section-bg: rgba(var(--rgb-primary-text-color), 0.03);\n        --lcm-section-bg-hover: rgba(var(--rgb-primary-text-color), 0.06);\n\n        /* Active states */\n        --lcm-active-bg: rgba(var(--rgb-primary-color), 0.1);\n        --lcm-active-bg-gradient: linear-gradient(\n            135deg,\n            rgba(var(--rgb-primary-color), 0.1),\n            rgba(var(--rgb-primary-color), 0.04)\n        );\n\n        /* Status colors */\n        --lcm-success-color: var(--success-color, #4caf50);\n        --lcm-warning-color: var(--warning-color, #ff9800);\n        --lcm-disabled-color: var(--disabled-text-color, #9e9e9e);\n\n        /* Badge styling */\n        --lcm-badge-radius: 999px;\n        --lcm-badge-font-size: 10px;\n        --lcm-badge-font-weight: 600;\n        --lcm-badge-letter-spacing: 0.02em;\n        --lcm-badge-padding: 2px 6px;\n\n        /* Section header typography */\n        --lcm-section-header-size: 11px;\n        --lcm-section-header-weight: 600;\n        --lcm-section-header-spacing: 0.05em;\n\n        /* Code/PIN typography */\n        --lcm-code-font: 'Roboto Mono', monospace;\n        --lcm-code-font-size: 16px;\n        --lcm-code-font-weight: 600;\n        --lcm-code-letter-spacing: 1px;\n\n        /* Border colors */\n        --lcm-border-color: rgba(var(--rgb-primary-text-color), 0.06);\n        --lcm-border-color-strong: rgba(var(--rgb-primary-text-color), 0.12);\n    }\n"]))),Re=lt(r||(r=Gn(["\n    .lcm-badge {\n        border-radius: var(--lcm-badge-radius);\n        font-size: var(--lcm-badge-font-size);\n        font-weight: var(--lcm-badge-font-weight);\n        letter-spacing: var(--lcm-badge-letter-spacing);\n        padding: var(--lcm-badge-padding);\n        text-transform: uppercase;\n    }\n\n    .lcm-badge.active {\n        background: rgba(var(--rgb-primary-color), 0.16);\n        color: var(--primary-color);\n    }\n\n    .lcm-badge.inactive {\n        background: rgba(var(--rgb-primary-color), 0.12);\n        color: var(--primary-color);\n    }\n\n    .lcm-badge.disabled {\n        background: rgba(var(--rgb-disabled-text-color, 158, 158, 158), 0.15);\n        color: var(--lcm-disabled-color);\n    }\n\n    .lcm-badge.empty {\n        background: rgba(var(--rgb-primary-text-color), 0.08);\n        color: var(--secondary-text-color);\n    }\n\n    .lcm-badge.managed {\n        background: rgba(var(--rgb-primary-color), 0.16);\n        color: var(--primary-color);\n    }\n\n    .lcm-badge.external {\n        background: rgba(var(--rgb-primary-text-color), 0.08);\n        color: var(--secondary-text-color);\n    }\n"]))),Ie=lt(l||(l=Gn(["\n    .lcm-sync-icon {\n        --mdc-icon-size: 18px;\n    }\n\n    .lcm-sync-icon.synced {\n        color: var(--lcm-success-color);\n    }\n\n    .lcm-sync-icon.pending {\n        color: var(--lcm-warning-color);\n    }\n\n    .lcm-sync-icon.unknown {\n        color: var(--lcm-disabled-color);\n    }\n\n    .lcm-status-dot {\n        border-radius: 50%;\n        height: 12px;\n        width: 12px;\n    }\n\n    .lcm-status-dot.active {\n        background-color: var(--lcm-success-color);\n    }\n\n    .lcm-status-dot.inactive {\n        background-color: var(--lcm-warning-color);\n    }\n\n    .lcm-status-dot.disabled {\n        background-color: var(--lcm-disabled-color);\n    }\n"]))),Ve=lt(c||(c=Gn(["\n    .lcm-code {\n        color: var(--primary-text-color);\n        font-family: var(--lcm-code-font);\n        font-size: var(--lcm-code-font-size);\n        font-weight: var(--lcm-code-font-weight);\n        letter-spacing: var(--lcm-code-letter-spacing);\n    }\n\n    .lcm-code.masked {\n        color: var(--secondary-text-color);\n    }\n\n    .lcm-code.disabled {\n        color: var(--secondary-text-color);\n        text-decoration: line-through;\n    }\n\n    .lcm-code.no-code {\n        color: var(--disabled-text-color);\n        font-family: inherit;\n        font-size: 12px;\n        font-style: italic;\n        font-weight: 400;\n        letter-spacing: normal;\n    }\n"]))),Te=lt(d||(d=Gn(["\n    .lcm-section {\n        background: var(--lcm-section-bg);\n        border-radius: 12px;\n        padding: 16px;\n    }\n\n    .lcm-section-header {\n        color: var(--secondary-text-color);\n        font-size: var(--lcm-section-header-size);\n        font-weight: var(--lcm-section-header-weight);\n        letter-spacing: var(--lcm-section-header-spacing);\n        margin-bottom: 12px;\n        text-transform: uppercase;\n    }\n"]))),je=lt(h||(h=Gn(["\n    .lcm-reveal-button {\n        --mdc-icon-button-size: 28px;\n        --mdc-icon-size: 16px;\n        color: var(--secondary-text-color);\n    }\n"]))),Fe=lt(p||(p=Gn(["\n    .collapsible-section {\n        background: var(--lcm-section-bg);\n        border-radius: 12px;\n        overflow: hidden;\n    }\n\n    .collapsible-header {\n        align-items: center;\n        cursor: pointer;\n        display: flex;\n        justify-content: space-between;\n        padding: 12px 16px;\n        user-select: none;\n    }\n\n    .collapsible-header:hover {\n        background: var(--lcm-section-bg-hover);\n    }\n\n    .collapsible-title {\n        align-items: center;\n        color: var(--secondary-text-color);\n        display: flex;\n        font-size: var(--lcm-section-header-size);\n        font-weight: var(--lcm-section-header-weight);\n        gap: 8px;\n        letter-spacing: var(--lcm-section-header-spacing);\n        text-transform: uppercase;\n    }\n\n    .collapsible-badge {\n        background: var(--lcm-active-bg);\n        border-radius: 10px;\n        color: var(--primary-color);\n        font-size: var(--lcm-badge-font-size);\n        padding: 2px 8px;\n    }\n\n    .collapsible-badge.primary {\n        background: var(--primary-color);\n        color: var(--text-primary-color, #fff);\n    }\n\n    .collapsible-badge.warning {\n        background: var(--warning-color, #ffa600);\n        color: var(--text-primary-color, #fff);\n    }\n\n    .collapsible-badge.muted {\n        background: var(--lcm-section-bg);\n        color: var(--secondary-text-color);\n    }\n\n    .collapsible-chevron {\n        --mdc-icon-size: 20px;\n        color: var(--secondary-text-color);\n        transition: transform 0.2s ease;\n    }\n\n    .collapsible-content {\n        max-height: 0;\n        opacity: 0;\n        overflow: hidden;\n        padding: 0 16px;\n        transition:\n            max-height 0.3s ease,\n            opacity 0.2s ease,\n            padding 0.3s ease;\n    }\n\n    .collapsible-content.expanded {\n        max-height: 500px;\n        opacity: 1;\n        padding: 0 16px 16px;\n    }\n"]))),Be=lt(u||(u=Gn(["\n    .editable {\n        border-radius: 4px;\n        cursor: pointer;\n        margin: -4px -8px;\n        padding: 4px 8px;\n        text-decoration: underline dashed;\n        text-decoration-color: var(--secondary-text-color);\n        text-underline-offset: 3px;\n        transition: background-color 0.2s;\n    }\n\n    .editable:hover {\n        background: var(--lcm-active-bg);\n    }\n\n    .edit-input {\n        background: var(--card-background-color, #fff);\n        border: 1px solid var(--primary-color);\n        border-radius: 4px;\n        color: var(--primary-text-color);\n        font-family: inherit;\n        font-size: inherit;\n        outline: none;\n        padding: 4px 8px;\n        width: 100%;\n    }\n\n    .edit-input:focus {\n        box-shadow: 0 0 0 1px var(--primary-color);\n    }\n\n    .edit-help {\n        color: var(--secondary-text-color);\n        font-size: var(--lcm-section-header-size);\n        margin-top: 4px;\n    }\n"])));function We(n){class t extends n{constructor(){super(...arguments),this._revealed=!1,this._subscribing=!1}connectedCallback(){super.connectedCallback(),this._subscribe()}disconnectedCallback(){super.disconnectedCallback(),this._unsubscribe()}_formatSubscriptionError(n){return n instanceof Error?n.message:"object"==typeof n&&null!==n&&"message"in n?String(n.message):"Failed to subscribe: ".concat(JSON.stringify(n))}_shouldReveal(){var n,t,e=null!==(n=null===(t=this._config)||void 0===t?void 0:t.code_display)&&void 0!==n?n:this._getDefaultCodeDisplay();return"unmasked"===e||"masked_with_reveal"===e&&this._revealed}_subscribe(){var n=this;return et((function*(){var t;if(n._hass&&n._config&&!n._unsub&&!n._subscribing)if(null!==(t=n._hass.connection)&&void 0!==t&&t.subscribeMessage){n._subscribing=!0;try{var e=n._buildSubscribeMessage();n._unsub=yield n._hass.connection.subscribeMessage((t=>{n._handleSubscriptionData(t),n._error=void 0,n.requestUpdate()}),e)}catch(t){n._data=void 0,n._error=n._formatSubscriptionError(t),n.requestUpdate()}finally{n._subscribing=!1}}else n._error="Websocket connection unavailable"}))()}_toggleReveal(){this._revealed=!this._revealed,this._unsubscribe(),this._subscribe()}_unsubscribe(){this._unsub&&(this._unsub(),this._unsub=void 0)}}return Ee([De()],t.prototype,"_revealed",void 0),t}lt(v||(v=Gn(["\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"])),Ue,Re,Ie,Ve,Te,je,Fe,Be);var qe="masked_with_reveal",Ze=We(le);class Ke extends Ze{constructor(){super(...arguments),this._editingSlot=null,this._editValue="",this._saving=!1,this._wasRevealedBeforeEdit=!1}set hass(n){this._hass=n,this._subscribe()}static getConfigElement(){return document.createElement("lcm-lock-codes-editor")}static getStubConfig(){return{lock_entity_id:""}}setConfig(n){var t;if(!n.lock_entity_id)throw new Error("lock_entity_id is required");null!==(t=this._config)&&void 0!==t&&t.lock_entity_id&&this._config.lock_entity_id!==n.lock_entity_id&&(this._unsubscribe(),this._data=void 0),this._config=n,this._subscribe()}_getDefaultCodeDisplay(){return qe}_buildSubscribeMessage(){if(!this._config)throw new Error("Config not set");return{lock_entity_id:this._config.lock_entity_id,reveal:this._shouldReveal(),type:"lock_code_manager/subscribe_lock_codes"}}_handleSubscriptionData(n){this._data=n}render(){var n,t,e,i,o,s,a,r,l,c,d,h=null===(n=this._hass)||void 0===n||null===(n=n.states[null!==(t=null===(e=this._config)||void 0===e?void 0:e.lock_entity_id)&&void 0!==t?t:""])||void 0===n||null===(n=n.attributes)||void 0===n?void 0:n.friendly_name,p=null!==(i=null!==(o=null!==(s=null===(a=this._data)||void 0===a?void 0:a.lock_name)&&void 0!==s?s:h)&&void 0!==o?o:null===(r=this._config)||void 0===r?void 0:r.lock_entity_id)&&void 0!==i?i:"",u=null!==(l=null!==(c=null===(d=this._config)||void 0===d?void 0:d.title)&&void 0!==c?c:p)&&void 0!==l?l:"Lock Codes";return Bt(g||(g=Gn(['\n            <ha-card>\n                <div class="card-header">\n                    <div class="header-icon">\n                        <ha-icon icon="mdi:lock-smart"></ha-icon>\n                    </div>\n                    <span class="card-header-title">','</span>\n                </div>\n                <div class="card-content">\n                    ',"\n                    ","\n                </div>\n            </ha-card>\n        "])),u,this._error?Bt(_||(_=Gn(['<div class="message">',"</div>"])),this._error):this._renderSlots(),this._renderSummaryTable())}_startEditing(n,t){n.stopPropagation(),this._wasRevealedBeforeEdit=this._revealed,this._revealed||(this._revealed=!0,this._unsubscribe(),this._subscribe());var e=null!==t.code?String(t.code):"";this._editValue=e,this._editingSlot=t.slot,this.updateComplete.then((()=>{var n,t=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector(".slot-code-input");null==t||t.focus(),null==t||t.select()}))}_handleEditInput(n){var t=n.target;this._editValue=t.value}_handleEditKeydown(n){"Enter"===n.key&&null!==this._editingSlot?this._saveCode(this._editingSlot):"Escape"===n.key&&this._cancelEdit()}_cancelEdit(){this._editingSlot=null,this._editValue="",this._revealed!==this._wasRevealedBeforeEdit&&(this._revealed=this._wasRevealedBeforeEdit,this._unsubscribe(),this._subscribe())}_saveCode(n){var t=this;return et((function*(){if(t._hass&&t._config&&!t._saving){t._saving=!0;var e=t._editValue.trim();try{yield t._hass.connection.sendMessagePromise({code_slot:"string"==typeof n?parseInt(n,10):n,lock_entity_id:t._config.lock_entity_id,type:"lock_code_manager/set_lock_usercode",usercode:e||void 0}),t._editingSlot=null,t._editValue=""}catch(n){console.error("Failed to set usercode:",n)}finally{t._saving=!1}}}))()}_navigateToSlot(n){if(n){var t="/config/integrations/integration/lock_code_manager#config_entry=".concat(n);history.pushState(null,"",t),window.dispatchEvent(new CustomEvent("location-changed"))}}_renderSlots(){var n,t,e=null!==(n=null===(t=this._data)||void 0===t?void 0:t.slots)&&void 0!==n?n:[];if(0===e.length)return Bt(m||(m=Gn(['<div class="message">No codes reported</div>'])));for(var i=this._groupSlots(e),o=[],s=new Set,a=0;a<i.length;a++){var r=i[a],l=a>0?i[a-1]:null,c=a<i.length-1?i[a+1]:null;if("active"===r.type&&1===r.slots.length){var[d]=r.slots,h=("string"==typeof d.slot?parseInt(d.slot,10):d.slot)%2==1;h&&"empty"===(null==c?void 0:c.type)&&c.slots.length>0?s.add(c.slots[0].slot):!h&&"empty"===(null==l?void 0:l.type)&&l.slots.length>0&&s.add(l.slots[l.slots.length-1].slot)}}for(var p=0;p<i.length;p++){var u=i[p],v=p>0?i[p-1]:null,g=p<i.length-1?i[p+1]:null;if("active"===u.type)if(1===u.slots.length){var[_]=u.slots,y=("string"==typeof _.slot?parseInt(_.slot,10):_.slot)%2==1;y&&"empty"===(null==g?void 0:g.type)&&g.slots.length>0?(o.push(this._renderSlotChip(_,!1)),o.push(this._renderEmptySlotChip(g.slots[0]))):!y&&"empty"===(null==v?void 0:v.type)&&v.slots.length>0?(o.push(this._renderEmptySlotChip(v.slots[v.slots.length-1])),o.push(this._renderSlotChip(_,!1))):o.push(this._renderSlotChip(_,!0))}else for(var b of u.slots)o.push(this._renderSlotChip(b,!1));else{var x=u.slots.filter((n=>!s.has(n.slot)));x.length>0&&o.push(this._renderEmptySummary(Xn(Xn({},u),{},{rangeLabel:this._formatSlotRange(x),slots:x})))}}return Bt(f||(f=Gn(['<div class="slots-grid">',"</div>"])),o)}_renderEmptySlotChip(n){return Bt(y||(y=Gn(['\n            <div class="slot-chip empty">\n                <div class="slot-top">\n                    <span class="slot-label">Slot ','</span>\n                    <div class="slot-badges">\n                        <span class="lcm-badge empty">Empty</span>\n                    </div>\n                </div>\n            </div>\n        '])),n.slot)}_groupSlots(n){var t=[],e=[],i=[],o=()=>{e.length>0&&(t.push({rangeLabel:this._formatSlotRange(e),slots:e,type:"empty"}),e=[])},s=()=>{i.length>0&&(t.push({slots:i,type:"active"}),i=[])};for(var a of n){var r=!(!a.configured_code&&!a.configured_code_length),l=!0===a.managed&&(void 0!==a.enabled||void 0!==a.active);this._hasCode(a)||!0===a.managed&&(r||l)?(o(),i.push(a)):(s(),e.push(a))}return s(),o(),t}_formatSlotRange(n){if(0===n.length)return"";if(1===n.length)return"".concat(n[0].slot);var t=n.map((n=>Number(n.slot))).filter((n=>!isNaN(n)));if(t.length!==n.length)return"".concat(n.map((n=>n.slot)).join(", "));for(var e=[],[i]=t,o=i,s=i,a=1;a<t.length;a++)t[a]===s+1||(e.push(o===s?"".concat(o):"".concat(o," – ").concat(s)),o=t[a]),s=t[a];return e.push(o===s?"".concat(o):"".concat(o," – ").concat(s)),"".concat(e.join(", "))}_renderSlotChip(n,t){var e,i,o,s,a,r,l=this._hasCode(n),c=null===(e=n.name)||void 0===e?void 0:e.trim(),{managed:d}=n,h=!(!n.configured_code&&!n.configured_code_length),p=null!==(i=null===(o=this._config)||void 0===o?void 0:o.code_display)&&void 0!==i?i:qe,u=!!c||!1!==d,v=!0===d&&!!n.config_entry_id;!0===n.active?(s="active",a="Active",r="active"):!0===n.enabled&&!1===n.active?(s="inactive",a="Inactive",r="inactive"):!1===n.enabled?(s="disabled",a="Disabled",r="disabled"):l?(s="active",a="Active",r="active"):h?(s="inactive",a="Inactive",r="inactive"):(s="empty",a="Empty",r="empty");var g=!0===d?"managed":!1===d?"unmanaged":"",_=v?"clickable":"";return Bt(b||(b=Gn(['\n            <div\n                class="slot-chip '," "," "," ",'"\n                title=',"\n                @click=",'\n            >\n                <div class="slot-top">\n                    <span class="slot-label">Slot ','</span>\n                    <div class="slot-badges">\n                        <span class="lcm-badge ','"> '," </span>\n                        ","\n                    </div>\n                </div>\n                ","\n                ","\n            </div>\n        "])),s,g,_,t?"full-width":"",v?"Click to manage this slot":qt,v?()=>this._navigateToSlot(n.config_entry_id):qt,n.slot,r,a,void 0===d?qt:Bt(x||(x=Gn(['<span class="lcm-badge ','">\n                                  ',"\n                              </span>"])),d?"managed":"external",d?"Managed":"Unmanaged"),u?Bt(w||(w=Gn(['<span class="slot-name ','">\n                          ',"\n                      </span>"])),c?"":"unnamed",null!=c?c:"Unnamed"):qt,this._renderCodeSection(n,l,p))}_renderCodeSection(n,t,e){var i=this._editingSlot===n.slot,o=!0!==n.managed;if(i&&o)return Bt(k||(k=Gn(['\n                <div class="slot-code-edit" @click=','>\n                    <div class="slot-code-edit-row">\n                        <input\n                            class="slot-code-input"\n                            type="text"\n                            inputmode="numeric"\n                            pattern="[0-9]*"\n                            placeholder="PIN"\n                            .value=',"\n                            @input=","\n                            @keydown=","\n                            ?disabled=",'\n                        />\n                        <div class="slot-code-edit-buttons">\n                            <ha-icon-button\n                                .path=',"\n                                @click=","\n                                .label=","\n                                ?disabled=","\n                            ></ha-icon-button>\n                            <ha-icon-button\n                                .path=","\n                                @click=","\n                                .label=","\n                                ?disabled=",'\n                            ></ha-icon-button>\n                        </div>\n                    </div>\n                    <span class="slot-edit-help">\n                        ',"\n                    </span>\n                </div>\n            "])),(n=>n.stopPropagation()),this._editValue,this._handleEditInput,this._handleEditKeydown,this._saving,"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",(()=>this._saveCode(n.slot)),"Save",this._saving,"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",this._cancelEdit,"Cancel",this._saving,this._saving?"Saving...":"Enter to save, Esc to cancel");var s=o&&!i,a=s?"editable":"";return Bt(C||(C=Gn(['\n            <div class="slot-code-row">\n                <span\n                    class="lcm-code '," ",'"\n                    title=',"\n                    @click=","\n                >\n                    ","\n                </span>\n                ","\n            </div>\n        "])),this._getCodeClass(n),a,s?"Click to edit":qt,s?t=>this._startEditing(t,n):qt,this._formatCode(n),"masked_with_reveal"===e&&t?Bt(E||(E=Gn(['<span class="slot-code-actions">\n                          <ha-icon-button\n                              class="lcm-reveal-button"\n                              .path=',"\n                              @click=","\n                              .label=","\n                          ></ha-icon-button>\n                      </span>"])),this._revealed?$e:Ae,this._toggleReveal,this._revealed?"Hide codes":"Reveal codes"):qt)}_getCodeClass(n){var t,e,i=null!==(t=null===(e=this._config)||void 0===e?void 0:e.code_display)&&void 0!==t?t:qe,o="masked"===i||"masked_with_reveal"===i&&!this._revealed;return null!==n.code&&""!==n.code?"":n.code_length?"masked":n.configured_code?o?"disabled masked":"disabled":n.configured_code_length?"disabled masked":"no-code"}_formatCode(n){var t,e,i=null!==(t=null===(e=this._config)||void 0===e?void 0:e.code_display)&&void 0!==t?t:qe,o="masked"===i||"masked_with_reveal"===i&&!this._revealed;return null!==n.code&&""!==n.code?o?"•".repeat(String(n.code).length):String(n.code):n.code_length?"•".repeat(n.code_length):n.configured_code?o?"•".repeat(n.configured_code.length):n.configured_code:n.configured_code_length?"•".repeat(n.configured_code_length):"—"}_renderEmptySummary(n){return Bt(S||(S=Gn(['<div class="empty-summary">\n            <ha-icon icon="mdi:minus-circle-outline"></ha-icon>\n            <span class="empty-summary-label">Empty slots</span>\n            <span class="empty-summary-range">',"</span>\n        </div>"])),n.rangeLabel)}_renderSummaryTable(){var n,t,e=null!==(n=null===(t=this._data)||void 0===t?void 0:t.slots)&&void 0!==n?n:[];if(0===e.length)return Bt(A||(A=Gn([""])));var i=0,o=0,s=0,a=0,r=0;for(var l of e){var c=this._hasCode(l),d=!0===l.managed;!l.configured_code&&l.configured_code_length;d?!0===l.active?i+=1:!0===l.enabled&&!1===l.active?o+=1:!1===l.enabled?s+=1:c?i+=1:o+=1:c?a+=1:r+=1}var h=i+o+s,p=a+r,u=i+a,v=o+r,g=s,_=e.length,m=n=>0===n?"summary-cell-zero":"";return Bt($||($=Gn(['\n            <table class="summary-table">\n                <thead>\n                    <tr>\n                        <th></th>\n                        <th>Active</th>\n                        <th>Inactive</th>\n                        <th>Disabled</th>\n                        <th>Total</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td>Managed</td>\n                        <td class="','">','</td>\n                        <td class="','">','</td>\n                        <td class="','">',"</td>\n                        <td>",'</td>\n                    </tr>\n                    <tr>\n                        <td>Unmanaged</td>\n                        <td class="','">','</td>\n                        <td class="','">','</td>\n                        <td class="','">–</td>\n                        <td>','</td>\n                    </tr>\n                    <tr class="total-row">\n                        <td>Total</td>\n                        <td class="','">','</td>\n                        <td class="','">','</td>\n                        <td class="','">',"</td>\n                        <td>","</td>\n                    </tr>\n                </tbody>\n            </table>\n        "])),m(i),i,m(o),o,m(s),s,h,m(a),a,m(r),r,m(0),p,m(u),u,m(v),v,m(g),g,_)}_hasCode(n){return!!n.code_length||null!==n.code&&""!==n.code}}Ke.styles=[Ue,Re,Ve,je,lt(qn||(qn=Gn(["\n            :host {\n                display: block;\n            }\n\n            ha-card {\n                padding: 0;\n            }\n\n            .card-header {\n                align-items: center;\n                border-bottom: 1px solid var(--lcm-border-color);\n                display: flex;\n                gap: 12px;\n                padding: 16px;\n            }\n\n            .header-icon {\n                align-items: center;\n                background: var(--lcm-active-bg);\n                border-radius: 50%;\n                color: var(--primary-color);\n                display: flex;\n                height: 40px;\n                justify-content: center;\n                width: 40px;\n            }\n\n            .header-icon ha-icon {\n                --mdc-icon-size: 24px;\n            }\n\n            .card-header-title {\n                color: var(--primary-text-color);\n                font-size: 18px;\n                font-weight: 500;\n            }\n\n            .card-content {\n                padding: 16px;\n            }\n\n            .slots-grid {\n                display: grid;\n                gap: 10px;\n                grid-template-columns: repeat(2, 1fr);\n            }\n\n            @media (max-width: 400px) {\n                .slots-grid {\n                    grid-template-columns: 1fr;\n                }\n            }\n\n            .slot-chip {\n                background: var(--lcm-section-bg);\n                border-radius: 12px;\n                display: flex;\n                flex-direction: column;\n                gap: 6px;\n                min-width: 0;\n                overflow: hidden;\n                padding: 12px 12px 14px;\n                position: relative;\n            }\n\n            /* Active LCM Managed: Primary blue with tinted background */\n            .slot-chip.active.managed {\n                background: var(--lcm-active-bg-gradient);\n            }\n\n            /* Active Unmanaged (not LCM): Neutral gray, plain background */\n            .slot-chip.active.unmanaged {\n                background: linear-gradient(\n                    135deg,\n                    rgba(var(--rgb-primary-text-color), 0.06),\n                    rgba(var(--rgb-primary-text-color), 0.02)\n                );\n            }\n\n            /* Inactive LCM Managed: Muted blue, slightly faded */\n            .slot-chip.inactive.managed {\n                background: rgba(var(--rgb-primary-color), 0.05);\n                opacity: 0.85;\n            }\n\n            /* Disabled LCM Managed: Very muted, clear disabled state */\n            .slot-chip.disabled.managed {\n                background: rgba(var(--rgb-primary-text-color), 0.04);\n                opacity: 0.65;\n            }\n\n            .slot-chip.empty {\n                background: var(--lcm-section-bg);\n                opacity: 0.7;\n            }\n\n            .slot-chip.full-width {\n                grid-column: 1 / -1;\n                justify-self: center;\n                max-width: 360px;\n                width: 100%;\n            }\n\n            .slot-chip.clickable {\n                cursor: pointer;\n                transition:\n                    transform 0.1s ease,\n                    box-shadow 0.2s ease;\n            }\n\n            .slot-chip.clickable:hover {\n                box-shadow: 0 2px 8px rgba(var(--rgb-primary-color), 0.25);\n                transform: translateY(-1px);\n            }\n\n            .slot-chip.clickable:active {\n                transform: translateY(0);\n            }\n\n            .slot-top {\n                align-items: flex-start;\n                display: flex;\n                flex-direction: column;\n                gap: 6px;\n            }\n\n            .slot-badges {\n                align-items: center;\n                display: inline-flex;\n                flex-wrap: wrap;\n                gap: 6px;\n            }\n\n            .slot-label {\n                color: var(--secondary-text-color);\n                font-size: var(--lcm-section-header-size);\n                font-weight: 500;\n                letter-spacing: 0.03em;\n                text-transform: uppercase;\n                width: 100%;\n            }\n\n            .slot-name {\n                color: var(--primary-text-color);\n                font-size: 15px;\n                font-weight: 500;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n\n            .slot-name.unnamed {\n                color: var(--secondary-text-color);\n                font-weight: 400;\n            }\n\n            /* Disabled slot: strikethrough name */\n            .slot-chip.disabled .slot-name {\n                color: var(--secondary-text-color);\n                text-decoration: line-through;\n            }\n\n            .slot-code-row {\n                align-items: center;\n                display: flex;\n                gap: 8px;\n                justify-content: space-between;\n            }\n\n            .slot-code-actions {\n                display: inline-flex;\n            }\n\n            /* Editable code for unmanaged slots */\n            .slot-code-edit {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n                width: 100%;\n            }\n\n            .slot-code-edit-row {\n                align-items: center;\n                display: flex;\n                gap: 8px;\n            }\n\n            .slot-code-input {\n                background: var(--card-background-color, #fff);\n                border: 1px solid var(--primary-color);\n                border-radius: 6px;\n                color: var(--primary-text-color);\n                flex: 1;\n                font-family: var(--lcm-code-font);\n                font-size: 14px;\n                font-weight: 500;\n                min-width: 0;\n                letter-spacing: var(--lcm-code-letter-spacing);\n                min-width: 0;\n                outline: none;\n                padding: 6px 10px;\n            }\n\n            .slot-code-input:focus {\n                box-shadow: 0 0 0 1px var(--primary-color);\n            }\n\n            .slot-code-input::placeholder {\n                color: var(--secondary-text-color);\n                font-weight: 400;\n                letter-spacing: normal;\n            }\n\n            .slot-code-edit-buttons {\n                display: flex;\n                gap: 4px;\n            }\n\n            .slot-code-edit-buttons ha-icon-button {\n                --mdc-icon-button-size: 32px;\n                --mdc-icon-size: 18px;\n            }\n\n            .slot-edit-help {\n                color: var(--secondary-text-color);\n                font-size: 10px;\n            }\n\n            /* Editable code display (click to edit) */\n            .lcm-code.editable {\n                border-radius: 4px;\n                cursor: pointer;\n                margin: -2px -4px;\n                padding: 2px 4px;\n                transition: background-color 0.2s;\n            }\n\n            .lcm-code.editable:hover {\n                background: var(--lcm-active-bg);\n            }\n\n            .empty-summary {\n                align-items: center;\n                background: var(--lcm-section-bg);\n                border: 1px dashed var(--lcm-border-color-strong);\n                border-radius: 10px;\n                color: var(--secondary-text-color);\n                display: flex;\n                font-size: 12px;\n                gap: 8px;\n                grid-column: 1 / -1;\n                padding: 8px 12px;\n            }\n\n            .empty-summary ha-icon {\n                --mdc-icon-size: 16px;\n                color: var(--secondary-text-color);\n            }\n\n            .empty-summary-label {\n                color: var(--secondary-text-color);\n                font-size: var(--lcm-section-header-size);\n                font-weight: 600;\n                letter-spacing: 0.04em;\n                text-transform: uppercase;\n            }\n\n            .empty-summary-range {\n                color: var(--primary-text-color);\n                font-size: 13px;\n                font-weight: 500;\n            }\n\n            .message {\n                color: var(--secondary-text-color);\n                font-style: italic;\n            }\n\n            /* Summary table */\n            .summary-table {\n                border-collapse: collapse;\n                font-size: 12px;\n                margin-top: 16px;\n                width: 100%;\n            }\n\n            .summary-table th,\n            .summary-table td {\n                padding: 6px 8px;\n                text-align: center;\n            }\n\n            .summary-table th {\n                background: rgba(var(--rgb-primary-text-color), 0.04);\n                color: var(--secondary-text-color);\n                font-size: 10px;\n                font-weight: 600;\n                letter-spacing: 0.04em;\n                text-transform: uppercase;\n            }\n\n            .summary-table th:first-child {\n                border-radius: 6px 0 0 0;\n                text-align: left;\n            }\n\n            .summary-table th:last-child {\n                border-radius: 0 6px 0 0;\n            }\n\n            .summary-table td {\n                border-top: 1px solid var(--lcm-border-color);\n                color: var(--primary-text-color);\n                font-weight: 500;\n            }\n\n            .summary-table td:first-child {\n                color: var(--secondary-text-color);\n                font-size: var(--lcm-section-header-size);\n                font-weight: 600;\n                letter-spacing: 0.03em;\n                text-align: left;\n                text-transform: uppercase;\n            }\n\n            .summary-table tr:last-child td:first-child {\n                border-radius: 0 0 0 6px;\n            }\n\n            .summary-table tr:last-child td:last-child {\n                border-radius: 0 0 6px 0;\n            }\n\n            .summary-table .total-row td {\n                background: rgba(var(--rgb-primary-text-color), 0.02);\n                border-top: 2px solid var(--lcm-border-color-strong);\n                font-weight: 600;\n            }\n\n            .summary-cell-zero {\n                color: var(--disabled-text-color) !important;\n                font-weight: 400 !important;\n            }\n        "])))],Ee([Oe({attribute:!1})],Ke.prototype,"_hass",void 0),Ee([De()],Ke.prototype,"_editingSlot",void 0),Ee([De()],Ke.prototype,"_editValue",void 0),Ee([De()],Ke.prototype,"_saving",void 0),customElements.define("lcm-lock-codes",Ke),window.customCards=window.customCards||[],window.customCards.push({description:"Displays lock slot codes from Lock Code Manager",name:"LCM Lock Codes Card",type:"custom:lcm-lock-codes"});var Je=[{label:"Masked with Reveal",value:"masked_with_reveal"},{label:"Always Masked",value:"masked"},{label:"Always Visible",value:"unmasked"}];class Ye extends le{constructor(){super(...arguments),this._locks=[],this._loading=!0}set hass(n){var t=this._hass!==n;this._hass=n,t&&this._fetchLocks()}setConfig(n){this._config=n}render(){var n,t;if(!this._hass||!this._config)return Bt(L||(L=Gn([""])));var e=this._locks.map((n=>n.entity_id));return Bt(M||(M=Gn(['\n            <div class="editor-row">\n                ',"\n                <ha-entity-picker\n                    .hass=","\n                    .value=","\n                    .includeEntities=","\n                    .label=","\n                    .required=","\n                    @value-changed=",'\n                ></ha-entity-picker>\n            </div>\n\n            <div class="editor-row">\n                <ha-textfield\n                    .label=',"\n                    .value=","\n                    @input=",'\n                ></ha-textfield>\n            </div>\n\n            <div class="editor-row">\n                <ha-select\n                    .label=',"\n                    .value=","\n                    @selected=","\n                    @closed=","\n                    fixedMenuPosition\n                    naturalMenuWidth\n                >\n                    ","\n                </ha-select>\n            </div>\n        "])),this._loading?Bt(z||(z=Gn(["<span>Loading locks...</span>"]))):0===this._locks.length?Bt(H||(H=Gn(['<div class="no-locks-warning">\n                            No locks are currently managed by Lock Code Manager.\n                        </div>']))):qt,this._hass,this._config.lock_entity_id,e,"Lock",!0,this._lockChanged,"Title (optional)",null!==(n=this._config.title)&&void 0!==n?n:"",this._titleChanged,"Code Display",null!==(t=this._config.code_display)&&void 0!==t?t:"unmasked",this._displayModeChanged,this._stopPropagation,Je.map((n=>Bt(P||(P=Gn(["<mwc-list-item .value=",">","</mwc-list-item>"])),n.value,n.label))))}_fetchLocks(){var n=this;return et((function*(){if(n._hass){n._loading=!0;try{var t=yield n._hass.callWS({domain:"lock_code_manager",type:"config_entries/get"}),e=n._hass,i=yield Promise.allSettled(t.map((n=>e.callWS({config_entry_id:n.entry_id,type:"lock_code_manager/get_config_entry_data"})))),o=new Map;for(var s of i)if("fulfilled"===s.status)for(var a of s.value.locks)o.set(a.entity_id,a);n._locks=Array.from(o.values())}catch(t){n._locks=[]}n._loading=!1,n.requestUpdate()}}))()}_lockChanged(n){if(this._config){var{value:t}=n.detail;t!==this._config.lock_entity_id&&(this._config=Xn(Xn({},this._config),{},{lock_entity_id:t}),this._dispatchConfig())}}_titleChanged(n){if(this._config){var t=n.target.value||void 0;t!==this._config.title&&(this._config=Xn(Xn({},this._config),{},{title:t}),this._dispatchConfig())}}_displayModeChanged(n){if(this._config){var t=n.target.value;t!==this._config.code_display&&(this._config=Xn(Xn({},this._config),{},{code_display:t}),this._dispatchConfig())}}_stopPropagation(n){n.stopPropagation()}_dispatchConfig(){this.dispatchEvent(new CustomEvent("config-changed",{bubbles:!0,composed:!0,detail:{config:this._config}}))}}Ye.styles=lt(Zn||(Zn=Gn(["\n        .editor-row {\n            margin-bottom: 16px;\n        }\n\n        ha-entity-picker,\n        ha-textfield,\n        ha-select {\n            display: block;\n            width: 100%;\n        }\n\n        .no-locks-warning {\n            color: var(--warning-color);\n            padding: 8px;\n        }\n    "]))),customElements.define("lcm-lock-codes-editor",Ye);var Ge="masked_with_reveal",Qe=We(le);class Xe extends Qe{constructor(){super(...arguments),this._conditionsExpanded=!1,this._editingField=null,this._lockStatusExpanded=!1,this._showConditionDialog=!1,this._dialogMode="add-entity",this._dialogEntityId=null,this._dialogNumberOfUses=null,this._dialogSaving=!1,this._confirmDialog=null}get hass(){return this._hass}set hass(n){this._hass=n,this._subscribe()}static getConfigElement(){return document.createElement("lcm-slot-editor")}static getStubConfig(){return{config_entry_id:"",slot:1}}setConfig(n){var t,e,i,o;if(!n.config_entry_id&&!n.config_entry_title)throw new Error("config_entry_id or config_entry_title is required");if("number"!=typeof n.slot||n.slot<1||n.slot>9999)throw new Error("slot must be a number between 1 and 9999");(null===(t=this._config)||void 0===t?void 0:t.config_entry_id)===n.config_entry_id&&(null===(e=this._config)||void 0===e?void 0:e.config_entry_title)===n.config_entry_title&&(null===(i=this._config)||void 0===i?void 0:i.slot)===n.slot||(this._unsubscribe(),this._data=void 0),this._config=n;var s=null!==(o=n.collapsed_sections)&&void 0!==o?o:["conditions","lock_status"];this._conditionsExpanded=!s.includes("conditions"),this._lockStatusExpanded=!s.includes("lock_status"),this._subscribe()}_getDefaultCodeDisplay(){return Ge}_buildSubscribeMessage(){if(!this._config)throw new Error("Config not set");var n={reveal:this._shouldReveal(),slot:this._config.slot,type:"lock_code_manager/subscribe_code_slot"};return this._config.config_entry_id?n.config_entry_id=this._config.config_entry_id:this._config.config_entry_title&&(n.config_entry_title=this._config.config_entry_title),n}_handleSubscriptionData(n){this._data=n}updated(n){if(super.updated(n),this._editingField){var t,e,i=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector({name:".control-row .edit-input.name-edit-input",numberOfUses:'.condition-row .edit-input[type="number"]',pin:".pin-edit-input"}[this._editingField]);i&&(null===(e=this.shadowRoot)||void 0===e?void 0:e.activeElement)!==i&&(i.focus(),i.select())}}render(){return this._hass&&this._config?this._error?Bt(O||(O=Gn(['<ha-card>\n                <div class="message error">',"</div>\n            </ha-card>"])),this._error):this._data?this._renderFromData(this._data):Bt(D||(D=Gn(['<ha-card><div class="message">Connecting...</div></ha-card>']))):Bt(N||(N=Gn(['<ha-card><div class="message">Loading...</div></ha-card>'])))}_renderFromData(n){var t,e,i=null!==(t=null===(e=this._config)||void 0===e?void 0:e.code_display)&&void 0!==t?t:Ge,{name:o,pin:s,enabled:a,active:r,conditions:l,locks:c}=n,d=n.pin_length,h=c.map((n=>({code:n.code,codeLength:n.code_length,entityId:n.entity_id,inSync:n.in_sync,lastSynced:n.last_synced,lockEntityId:n.entity_id,name:n.name}))),p=!1!==this._config.show_lock_status,u=void 0!==l.number_of_uses&&null!==l.number_of_uses||void 0!==l.condition_entity||void 0!==l.calendar,v=!1!==this._config.show_conditions&&u,g=!1!==this._config.show_conditions&&!u;return Bt(U||(U=Gn(["\n            <ha-card>\n                ","\n                ",'\n                <div class="content">\n                    ',"\n                    ","\n                    ","\n                    ","\n                    ","\n                </div>\n                ","\n                ","\n            </ha-card>\n        "])),this._actionError?Bt(R||(R=Gn(['<div class="action-error">\n                          <span>','</span>\n                          <button\n                              class="action-error-dismiss"\n                              @click=','\n                              aria-label="Dismiss error"\n                          >\n                              ✕\n                          </button>\n                      </div>'])),this._actionError,this._dismissActionError):qt,this._renderHeader(),this._renderPrimaryControls(o,s,d,a,i),this._renderStatus(a,r),g?this._renderManageConditionsRow():qt,v?this._renderConditionsSection(l):qt,p?this._renderLockStatusSection(h):qt,this._showConditionDialog?this._renderConditionDialog():qt,this._confirmDialog?this._renderConfirmDialog():qt)}_renderHeader(){var n,t,e,i,o,s,a,r,l,c,d,h,p=null!==(n=null===(t=this._data)||void 0===t||null===(t=t.locks)||void 0===t?void 0:t.length)&&void 0!==n?n:0,u=!1!==(null===(e=this._config)||void 0===e?void 0:e.show_lock_count),v=null===(i=this._data)||void 0===i?void 0:i.last_used,g=null===(o=this._data)||void 0===o?void 0:o.event_entity_id,_=g?null===(s=this._hass)||void 0===s?void 0:s.states[g]:void 0,m=_&&"unavailable"!==_.state,f=u&&p>0||m;return Bt(I||(I=Gn(['\n            <div class="header">\n                <div class="header-top">\n                    <div class="header-icon">\n                        <ha-svg-icon .path=','></ha-svg-icon>\n                    </div>\n                    <div class="header-info">\n                        <span class="header-title">Code Slot ',"</span>\n                    </div>\n                    ","\n                </div>\n            </div>\n        "])),"M7 14C5.9 14 5 13.1 5 12S5.9 10 7 10 9 10.9 9 12 8.1 14 7 14M12.6 10C11.8 7.7 9.6 6 7 6C3.7 6 1 8.7 1 12S3.7 18 7 18C9.6 18 11.8 16.3 12.6 14H16V18H20V14H23V10H12.6Z",null===(a=this._config)||void 0===a?void 0:a.slot,f?Bt(V||(V=Gn(['<div class="header-pills">\n                              ',"\n                              ","\n                          </div>"])),u&&p>0?Bt(T||(T=Gn(['<span\n                                        class="header-pill clickable"\n                                        title=',"\n                                        @click=","\n                                    >\n                                        <ha-svg-icon .path=","></ha-svg-icon>\n                                        ","\n                                    </span>"])),null!==(r=null===(l=this._data)||void 0===l||null===(l=l.locks)||void 0===l?void 0:l.map((n=>n.name)).join(", "))&&void 0!==r?r:"",this._toggleLockStatus,"M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z",p):qt,m?Bt(j||(j=Gn(['<span\n                                        class="header-pill ','"\n                                        title=',"\n                                        @click=","\n                                    >\n                                        <ha-svg-icon .path=","></ha-svg-icon>\n                                        ","\n                                    </span>"])),v?"clickable":"",v?null!==(c=this._data)&&void 0!==c&&c.last_used_lock?"Used on ".concat(this._data.last_used_lock," - Click for details"):"Click for PIN usage details":"This PIN has never been used",(()=>v&&this._navigateToEventHistory()),"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",v?Bt(F||(F=Gn(["","\n                                                  <ha-relative-time\n                                                      .hass=","\n                                                      .datetime=","\n                                                  ></ha-relative-time>"])),null!==(d=null===(h=this._data)||void 0===h?void 0:h.last_used_lock)&&void 0!==d?d:"Used",this._hass,v):"Never used"):qt):qt)}_navigateToEventHistory(){var n,t=null===(n=this._data)||void 0===n?void 0:n.event_entity_id;if(t){var e=new CustomEvent("hass-more-info",{bubbles:!0,composed:!0,detail:{entityId:t}});this.dispatchEvent(e)}}_renderPrimaryControls(n,t,e,i,o){var s="masked"===o||"masked_with_reveal"===o&&!this._revealed,a=null!==t||void 0!==e,r=t?s?"•".repeat(t.length):t:void 0!==e?"•".repeat(e):null;return Bt(B||(B=Gn(['\n            <div class="lcm-section">\n                <div class="lcm-section-header">Primary Controls</div>\n\n                <div class="control-row">\n                    <span class="control-label">Name</span>\n                    <div style="flex: 1;">\n                        ','\n                    </div>\n                </div>\n\n                <div class="control-row">\n                    <span class="control-label">PIN</span>\n                    <div style="flex: 1;">\n                        <div class="pin-field">\n                            ',"\n                            ","\n                        </div>\n                        ",'\n                    </div>\n                </div>\n\n                <div class="enabled-row">\n                    <span class="enabled-label">Enabled</span>\n                    <ha-switch\n                        .checked=',"\n                        .disabled=","\n                        @change=","\n                    ></ha-switch>\n                </div>\n            </div>\n        "])),"name"===this._editingField?Bt(W||(W=Gn(['<input\n                                      class="edit-input name-edit-input"\n                                      type="text"\n                                      .value=',"\n                                      @blur=","\n                                      @keydown=",'\n                                  />\n                                  <div class="edit-help">Enter to save, Esc to cancel</div>'])),null!=n?n:"",this._handleEditBlur,this._handleEditKeydown):Bt(q||(q=Gn(['<span\n                                  class="control-value editable"\n                                  @click=',"\n                              >\n                                  ","\n                              </span>"])),(()=>this._startEditing("name")),n||Bt(Z||(Z=Gn(['<em class="placeholder">&lt;No Name&gt;</em>'])))),"pin"===this._editingField?Bt(K||(K=Gn(['<input\n                                      class="edit-input pin-edit-input"\n                                      type="text"\n                                      inputmode="numeric"\n                                      pattern="[0-9]*"\n                                      .value=',"\n                                      @blur=","\n                                      @keydown=","\n                                  />"])),null!=t?t:"",this._handleEditBlur,this._handleEditKeydown):Bt(J||(J=Gn(['<span\n                                      class="pin-value editable ','"\n                                      @click=',"\n                                  >\n                                      ","\n                                  </span>"])),s&&a?"masked":"",(()=>this._startEditing("pin")),null!=r?r:Bt(Y||(Y=Gn(['<em class="placeholder">&lt;No PIN&gt;</em>'])))),"masked_with_reveal"===o&&a&&"pin"!==this._editingField?Bt(G||(G=Gn(['<ha-icon-button\n                                      class="pin-reveal"\n                                      .path=',"\n                                      @click=","\n                                      .label=","\n                                  ></ha-icon-button>"])),this._revealed?$e:Ae,this._toggleReveal,this._revealed?"Hide PIN":"Reveal PIN"):qt,"pin"===this._editingField?Bt(Q||(Q=Gn(['<div class="edit-help">Enter to save, Esc to cancel</div>']))):qt,!0===i,null===i,this._handleEnabledToggle)}_renderStatus(n,t){var e,i,o;return!1===n?(e="disabled",i="Disabled",o="Slot is disabled by user"):!0===t?(e="active",i="Active",o=""):!1===t?(e="inactive",i="Inactive",o="Blocked by conditions"):(e="disabled",i="Unknown",o="Status unavailable"),Bt(X||(X=Gn(['\n            <div class="lcm-section">\n                <div class="lcm-section-header">Status</div>\n                <div class="status-row">\n                    <span class="lcm-status-dot ','"></span>\n                    <span class="status-text">',"</span>\n                </div>\n                ","\n            </div>\n        "])),e,i,o?Bt(nn||(nn=Gn(['<div class="status-detail">',"</div>"])),o):qt)}_renderConditionsSection(n){var{number_of_uses:t,condition_entity:e}=n,i=null!=t,o=void 0!==e,s=i&&0===t,a=o&&"on"!==e.state,r=(i?1:0)+(o?1:0),l=(s?1:0)+(a?1:0),c=r-l,d=0===l,h=i||o?Bt(tn||(tn=Gn(['<span class="collapsible-badge ','"\n                      >'," ","/",'</span\n                  >\n                  <span class="condition-blocking-icons">\n                      ',"\n                      ","\n                  </span>"])),d?"muted":"warning",d?"✓":"✗",c,r,i?Bt(en||(en=Gn(['<ha-svg-icon\n                                class="condition-icon ','"\n                                .path=','\n                                title="','"\n                            ></ha-svg-icon>'])),s?"blocking":"",Me,s?"No uses remaining":"".concat(t," uses remaining")):qt,o?Bt(on||(on=Gn(['<ha-svg-icon\n                                class="condition-icon ','"\n                                .path=','\n                                title="','"\n                            ></ha-svg-icon>'])),a?"blocking":"",this._getConditionEntityIcon(e.domain,!a),a?"Condition blocking access":"Condition allowing access"):qt):void 0,p=!i,u=!o,v=s?"No uses left":"Uses available",g=s?"inactive":"active",_=Bt(sn||(sn=Gn(["\n            ","\n            ","\n            ","\n        "])),i?Bt(an||(an=Gn(['<div class="condition-item">\n                      <div class="condition-item-header">\n                          <ha-svg-icon\n                              class="condition-entity-icon ','"\n                              .path=','\n                          ></ha-svg-icon>\n                          <span class="condition-entity-status">','</span>\n                          <span class="condition-entity-domain"># of Uses</span>\n                          <span class="condition-action-icons">\n                              <ha-svg-icon\n                                  class="condition-delete-icon"\n                                  .path=','\n                                  title="Remove use tracking"\n                                  @click=','\n                              ></ha-svg-icon>\n                          </span>\n                      </div>\n                      <div class="condition-item-detail">\n                          <div class="condition-edit-container">\n                              ',"\n                          </div>\n                      </div>\n                  </div>"])),g,Me,v,Se,(n=>{n.stopPropagation(),this._deleteNumberOfUses()}),"numberOfUses"===this._editingField?Bt(rn||(rn=Gn(['<input\n                                            class="edit-input"\n                                            type="number"\n                                            inputmode="numeric"\n                                            min="0"\n                                            .value=',"\n                                            @blur=","\n                                            @keydown=",'\n                                        />\n                                        <div class="edit-help">Enter to save, Esc to cancel</div>'])),String(null!=t?t:0),this._handleEditBlur,this._handleEditKeydown):Bt(ln||(ln=Gn(['<span\n                                        class="condition-value editable"\n                                        @click=',"\n                                        >"," uses remaining</span\n                                    >"])),(()=>this._startEditing("numberOfUses")),t)):qt,o?this._renderConditionEntity(e,!0):qt,p||u?Bt(cn||(cn=Gn(['<div class="add-condition-links">\n                      ',"\n                      ","\n                      ","\n                  </div>"])),p?Bt(dn||(dn=Gn(['<span\n                                class="add-condition-link"\n                                @click=',"\n                                >+ Add # of uses limit</span\n                            >"])),(()=>this._openConditionDialog("add-uses"))):qt,p&&u?Bt(hn||(hn=Gn(['<span class="add-condition-separator">•</span>']))):qt,u?Bt(pn||(pn=Gn(['<span\n                                class="add-condition-link"\n                                @click=',"\n                                >+ Add on/off entity</span\n                            >"])),(()=>this._openConditionDialog("add-entity"))):qt):qt);return this._renderCollapsible("Conditions",this._conditionsExpanded,this._toggleConditions,_,h)}_getConditionEntityIcon(n,t){switch(n){case"calendar":return t?"M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z":"M19,19H5V8H19M19,3H18V1H16V3H8V1H6V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M9.31,17L11.75,14.56L14.19,17L15.25,15.94L12.81,13.5L15.25,11.06L14.19,10L11.75,12.44L9.31,10L8.25,11.06L10.69,13.5L8.25,15.94L9.31,17Z";case"binary_sensor":default:return Ae;case"switch":case"input_boolean":return t?ze:He;case"schedule":return"M15,13H16.5V15.82L18.94,17.23L18.19,18.53L15,16.69V13M19,8H5V19H9.67C9.24,18.09 9,17.07 9,16A7,7 0 0,1 16,9C17.07,9 18.09,9.24 19,9.67V8M5,21C3.89,21 3,20.1 3,19V5C3,3.89 3.89,3 5,3H6V1H8V3H16V1H18V3H19A2,2 0 0,1 21,5V11.1C22.24,12.36 23,14.09 23,16A7,7 0 0,1 16,23C14.09,23 12.36,22.24 11.1,21H5M16,11.15A4.85,4.85 0 0,0 11.15,16C11.15,18.68 13.32,20.85 16,20.85A4.85,4.85 0 0,0 20.85,16C20.85,13.32 18.68,11.15 16,11.15Z"}}_getConditionStatusText(n,t){var e=t?"Access allowed":"Access blocked";switch(n){case"calendar":return t?"Event active – ".concat(e):"No event – ".concat(e);case"schedule":return t?"In schedule – ".concat(e):"Outside schedule – ".concat(e);default:return t?"On – ".concat(e):"Off – ".concat(e)}}_formatScheduleDate(n){var t=new Date;if(n.toDateString()===t.toDateString())return"";var e=new Date(t);return e.setDate(e.getDate()+1),n.toDateString()===e.toDateString()?"tomorrow ":"".concat(n.toLocaleDateString([],{weekday:"short"})," ")}_getDomainLabel(n){var t;return null!==(t={binary_sensor:"Sensor",calendar:"Calendar",input_boolean:"Toggle",schedule:"Schedule",switch:"Switch"}[n])&&void 0!==t?t:n}_renderConditionEntity(n){var t,e,i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s="on"===n.state,a=this._getConditionEntityIcon(n.domain,s),r=this._getConditionStatusText(n.domain,s),l=s?"active":"inactive",c=null!==(t=n.friendly_name)&&void 0!==t?t:n.condition_entity_id,d=this._getDomainLabel(n.domain),h=qt;if("calendar"===n.domain){if(s&&n.calendar)h=Bt(un||(un=Gn(["\n                    ","\n                    ","\n                    ","\n                    ","\n                "])),n.calendar.summary?Bt(vn||(vn=Gn(['<div class="condition-context">\n                              <span class="condition-context-label">Event:</span>',"\n                          </div>"])),n.calendar.summary):qt,n.calendar.start_time?Bt(gn||(gn=Gn(['<div class="condition-context">\n                              <span class="condition-context-label">Started:</span>\n                              <ha-relative-time\n                                  .hass=',"\n                                  .datetime=","\n                              ></ha-relative-time>\n                          </div>"])),this._hass,n.calendar.start_time):qt,n.calendar.end_time?Bt(_n||(_n=Gn(['<div class="condition-context">\n                              <span class="condition-context-label">Ends:</span>\n                              <ha-relative-time\n                                  .hass=',"\n                                  .datetime=","\n                              ></ha-relative-time>\n                          </div>"])),this._hass,n.calendar.end_time):qt,n.calendar_next?Bt(mn||(mn=Gn(['<div class="condition-context condition-context-next">\n                              <span class="condition-context-label">Next:</span>',"\n                              starts\n                              <ha-relative-time\n                                  .hass=","\n                                  .datetime=","\n                              ></ha-relative-time>\n                          </div>"])),null!==(i=n.calendar_next.summary)&&void 0!==i?i:"Event",this._hass,n.calendar_next.start_time):qt);else if(!s&&n.calendar_next){var p;h=Bt(fn||(fn=Gn(['\n                    <div class="condition-context">\n                        <span class="condition-context-label">Next:</span>','\n                    </div>\n                    <div class="condition-context">\n                        <span class="condition-context-label">Starts:</span>\n                        <ha-relative-time\n                            .hass=',"\n                            .datetime=","\n                        ></ha-relative-time>\n                    </div>\n                "])),null!==(p=n.calendar_next.summary)&&void 0!==p?p:"Event",this._hass,n.calendar_next.start_time)}}else if("schedule"===n.domain&&null!==(e=n.schedule)&&void 0!==e&&e.next_event){var u=new Date(n.schedule.next_event),v=u.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}),g=this._formatScheduleDate(u);h=Bt(s?yn||(yn=Gn(['\n                    <div class="condition-context">\n                        <span class="condition-context-label">Ends:</span>\n                        ',"","\n                    </div>\n                "])):bn||(bn=Gn(['\n                    <div class="condition-context">\n                        <span class="condition-context-label">Starts:</span>\n                        ',"","\n                    </div>\n                "])),g,v)}return Bt(xn||(xn=Gn(['\n            <div\n                class="condition-entity clickable"\n                @click=','\n                title="Click to view ','"\n            >\n                <div class="condition-entity-header">\n                    <ha-svg-icon\n                        class="condition-entity-icon ','"\n                        .path=','\n                    ></ha-svg-icon>\n                    <span class="condition-entity-status">','</span>\n                    <span class="condition-entity-domain">',"</span>\n                    ",'\n                </div>\n                <div class="condition-entity-name">',"</div>\n                ","\n            </div>\n        "])),(()=>this._openEntityMoreInfo(n.condition_entity_id)),c,l,a,r,d,o?Bt(wn||(wn=Gn(['<span class="condition-action-icons">\n                              <ha-svg-icon\n                                  class="condition-edit-icon"\n                                  .path=','\n                                  title="Edit condition entity"\n                                  @click=','\n                              ></ha-svg-icon>\n                              <ha-svg-icon\n                                  class="condition-delete-icon"\n                                  .path=','\n                                  title="Remove condition entity"\n                                  @click=',"\n                              ></ha-svg-icon>\n                          </span>"])),"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",(n=>{n.stopPropagation(),this._openConditionDialog("edit-entity")}),Se,(n=>{n.stopPropagation(),this._deleteConditionEntity()})):qt,c,h)}_openEntityMoreInfo(n){var t=new CustomEvent("hass-more-info",{bubbles:!0,composed:!0,detail:{entityId:n}});this.dispatchEvent(t)}_renderLockStatusSection(n){var t=n.filter((n=>!0===n.inSync)).length,e=n.length,i=e>0?Bt(kn||(kn=Gn(['<span class="collapsible-badge">',"/","</span>"])),t,e):void 0,o=n.length>0?Bt(Cn||(Cn=Gn(["",""])),n.map((n=>this._renderLockRow(n)))):Bt(En||(En=Gn(['<div class="no-conditions">No locks found</div>'])));return this._renderCollapsible("Lock Status",this._lockStatusExpanded,this._toggleLockStatus,o,i)}_renderLockRow(n){var t,e,i,o,s,a,r=!1!==(null===(t=this._config)||void 0===t?void 0:t.show_lock_sync),l=!1!==(null===(e=this._config)||void 0===e?void 0:e.show_code_sensors),c=null!==(i=null===(o=this._config)||void 0===o?void 0:o.code_display)&&void 0!==i?i:Ge,d=l&&"masked_with_reveal"===c;!0===n.inSync?(s="synced",a="Synced"):!1===n.inSync?(s="pending",a="Pending"):(s="unknown",a="Unknown");var h=this._formatLockCode(n);return Bt(Sn||(Sn=Gn(['\n            <div class="lock-row">\n                ','\n                <div class="lock-info">\n                    <span\n                        class="lock-name"\n                        title="View lock codes"\n                        @click=',"\n                    >\n                        ","\n                    </span>\n                    ","\n                </div>\n                ","\n            </div>\n        "])),r?Bt(An||(An=Gn(['<ha-icon\n                          class="lcm-sync-icon ','"\n                          icon="mdi:check-circle"\n                      ></ha-icon>'])),s):qt,(()=>this._navigateToLock(n.lockEntityId)),n.name,r&&n.lastSynced?Bt($n||($n=Gn(['<span class="lock-synced-time">\n                              Last synced to lock\n                              <ha-relative-time\n                                  .hass=',"\n                                  .datetime=","\n                              ></ha-relative-time>\n                          </span>"])),this._hass,n.lastSynced):r?Bt(Ln||(Ln=Gn(['<span class="lock-synced-time">',"</span>"])),a):qt,l&&h?Bt(Mn||(Mn=Gn(['<div class="lock-code-field">\n                          <span class="lock-code-value">',"</span>\n                          ","\n                      </div>"])),h,d?Bt(zn||(zn=Gn(['<ha-icon-button\n                                    class="lcm-reveal-button"\n                                    .path=',"\n                                    @click=","\n                                    .label=","\n                                ></ha-icon-button>"])),this._revealed?$e:Ae,this._toggleReveal,this._revealed?"Hide codes":"Reveal codes"):qt):qt)}_formatLockCode(n){var t,e,i=null!==(t=null===(e=this._config)||void 0===e?void 0:e.code_display)&&void 0!==t?t:Ge,o="masked"===i||"masked_with_reveal"===i&&!this._revealed;return null!==n.code&&""!==n.code?o?"•".repeat(String(n.code).length):String(n.code):n.codeLength?"•".repeat(n.codeLength):null}_renderCollapsible(n,t,e,i,o){return Bt(Hn||(Hn=Gn(['\n            <div class="collapsible-section">\n                <div class="collapsible-header" @click=','>\n                    <div class="collapsible-title">'," ",'</div>\n                    <ha-svg-icon\n                        class="collapsible-chevron"\n                        .path=','\n                    ></ha-svg-icon>\n                </div>\n                <div class="collapsible-content ','">',"</div>\n            </div>\n        "])),e,n,null!=o?o:qt,t?"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z":"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",t?"expanded":"",i)}_toggleConditions(){this._conditionsExpanded=!this._conditionsExpanded}_toggleLockStatus(){this._lockStatusExpanded=!this._lockStatusExpanded}_renderManageConditionsRow(){return Bt(Pn||(Pn=Gn(['\n            <div class="empty-conditions-header">\n                <span class="empty-conditions-title">Conditions</span>\n                <span class="empty-conditions-badge">0/0</span>\n                <span class="empty-conditions-spacer"></span>\n                <div class="empty-conditions-actions">\n                    <button\n                        class="empty-conditions-btn"\n                        @click=','\n                        title="Add number of uses limit"\n                    >\n                        <ha-svg-icon .path=','></ha-svg-icon>\n                        # of Uses\n                    </button>\n                    <button\n                        class="empty-conditions-btn"\n                        @click=','\n                        title="Add on/off condition entity"\n                    >\n                        <ha-svg-icon .path=',"></ha-svg-icon>\n                        On/Off Entity\n                    </button>\n                </div>\n            </div>\n        "])),(()=>this._openConditionDialog("add-uses")),Le,(()=>this._openConditionDialog("add-entity")),Le)}_openConditionDialog(n){var t;this._dialogMode=n;var e,i,o=null===(t=this._data)||void 0===t?void 0:t.conditions;"edit-entity"===n?this._dialogEntityId=null!==(e=null==o||null===(i=o.condition_entity)||void 0===i?void 0:i.condition_entity_id)&&void 0!==e?e:null:"add-entity"===n?this._dialogEntityId=null:"add-uses"===n&&(this._dialogNumberOfUses=5);this._showConditionDialog=!0}_closeConditionDialog(){this._showConditionDialog=!1,this._dialogSaving=!1}_deleteConditionEntity(){var n,t=this;this._confirmDialog={onConfirm:(n=et((function*(){try{yield t._updateSlotCondition({entity_id:null}),t._unsubscribe(),t._subscribe()}catch(n){t._setActionError("Failed to remove condition: ".concat(n instanceof Error?n.message:"Unknown error"))}})),function(){return n.apply(this,arguments)}),text:"This will remove the condition entity from controlling when this PIN is active.",title:"Remove condition entity?"}}_deleteNumberOfUses(){var n,t=this;this._confirmDialog={onConfirm:(n=et((function*(){try{yield t._updateSlotCondition({number_of_uses:null}),t._unsubscribe(),t._subscribe()}catch(n){t._setActionError("Failed to remove use tracking: ".concat(n instanceof Error?n.message:"Unknown error"))}})),function(){return n.apply(this,arguments)}),text:"This will stop tracking how many times this PIN can be used.",title:"Remove use tracking?"}}_updateSlotCondition(n){var t=this;return et((function*(){if(!t._hass||!t._config)throw new Error("Not initialized");var e=Xn({slot:t._config.slot,type:"lock_code_manager/update_slot_condition"},n);t._config.config_entry_id?e.config_entry_id=t._config.config_entry_id:t._config.config_entry_title&&(e.config_entry_title=t._config.config_entry_title),yield t._hass.callWS(e)}))()}_renderConditionDialog(){var n,t,e="add-entity"===this._dialogMode||"edit-entity"===this._dialogMode,i="add-uses"===this._dialogMode,o="add-entity"===this._dialogMode?"Add Condition Entity":"edit-entity"===this._dialogMode?"Edit Condition Entity":"Add Use Tracking";return Bt(Nn||(Nn=Gn(["\n            <ha-dialog open @closed="," .heading=",'>\n                <div class="dialog-content">\n                    ',"\n                    ",'\n                </div>\n                <mwc-button slot="secondaryAction" @click=','>\n                    Cancel\n                </mwc-button>\n                <mwc-button\n                    slot="primaryAction"\n                    @click=',"\n                    .disabled=","\n                >\n                    ","\n                </mwc-button>\n            </ha-dialog>\n        "])),this._closeConditionDialog,o,e?Bt(On||(On=Gn(['\n                              <div class="dialog-section">\n                                  <div class="dialog-section-description">\n                                      PIN is active only when this entity is "on"\n                                  </div>\n                                  <input\n                                      type="text"\n                                      class="entity-select"\n                                      list="condition-entity-list"\n                                      placeholder="Search or select entity..."\n                                      .value=',"\n                                      @focus=","\n                                      @input=","\n                                      @change=",'\n                                  />\n                                  <datalist id="condition-entity-list">\n                                      ',"\n                                  </datalist>\n                              </div>\n                          "])),null!==(n=this._dialogEntityId)&&void 0!==n?n:"",(n=>{n.target.select()}),(n=>{var t,e=n.target.value;null!==(t=this._hass)&&void 0!==t&&t.states[e]?this._dialogEntityId=e:""===e&&(this._dialogEntityId=null)}),(n=>{var t,e=n.target.value;null!==(t=this._hass)&&void 0!==t&&t.states[e]?this._dialogEntityId=e:""===e&&(this._dialogEntityId=null)}),this._hass?Object.keys(this._hass.states).filter((n=>["calendar","schedule","binary_sensor","switch","input_boolean"].includes(n.split(".")[0]))).sort().map((n=>{var t,e;return Bt(Dn||(Dn=Gn(["\n                                                        <option\n                                                            value=",'\n                                                            label="','"\n                                                        ></option>\n                                                    '])),n,null!==(t=null===(e=this._hass.states[n])||void 0===e||null===(e=e.attributes)||void 0===e?void 0:e.friendly_name)&&void 0!==t?t:n)})):qt):qt,i?Bt(Un||(Un=Gn(['\n                              <div class="dialog-section">\n                                  <div class="dialog-section-description">\n                                      Set the initial number of uses for this PIN\n                                  </div>\n                                  <div class="dialog-number-input">\n                                      <label>Initial uses:</label>\n                                      <input\n                                          type="number"\n                                          min="1"\n                                          .value=',"\n                                          @input=","\n                                      />\n                                  </div>\n                              </div>\n                          "])),String(null!==(t=this._dialogNumberOfUses)&&void 0!==t?t:5),(n=>{var t=parseInt(n.target.value,10);!isNaN(t)&&t>0&&(this._dialogNumberOfUses=t)})):qt,(()=>this._closeConditionDialog()),(()=>this._saveConditionChanges()),this._dialogSaving,this._dialogSaving?"Saving...":"Save")}_renderConfirmDialog(){return this._confirmDialog?Bt(In||(In=Gn(["\n            <ha-dialog open @closed=",'>\n                <div slot="heading">','</div>\n                <div class="confirm-dialog-content">','</div>\n                <mwc-button slot="secondaryAction" @click=','>\n                    Cancel\n                </mwc-button>\n                <mwc-button\n                    slot="primaryAction"\n                    class="destructive"\n                    @click=',"\n                >\n                    Remove\n                </mwc-button>\n            </ha-dialog>\n        "])),(()=>this._confirmDialog=null),this._confirmDialog.title,this._confirmDialog.text,(()=>this._confirmDialog=null),(()=>{var n;null===(n=this._confirmDialog)||void 0===n||n.onConfirm(),this._confirmDialog=null})):Bt(Rn||(Rn=Gn([""])))}_saveConditionChanges(){var n=this;return et((function*(){if(n._hass&&n._config){n._dialogSaving=!0;try{var t={slot:n._config.slot,type:"lock_code_manager/update_slot_condition"};if(n._config.config_entry_id)t.config_entry_id=n._config.config_entry_id;else{if(!n._config.config_entry_title)throw new Error("No config entry identifier");t.config_entry_title=n._config.config_entry_title}if("add-entity"===n._dialogMode||"edit-entity"===n._dialogMode)t.entity_id=n._dialogEntityId;else{if("add-uses"!==n._dialogMode)throw new Error("Unknown dialog mode: ".concat(n._dialogMode));var e;t.number_of_uses=null!==(e=n._dialogNumberOfUses)&&void 0!==e?e:5}yield n._hass.callWS(t),n._closeConditionDialog(),n._unsubscribe(),n._subscribe()}catch(t){n._setActionError("Failed to save: ".concat(t instanceof Error?t.message:String(t))),n._dialogSaving=!1}}else n._setActionError("Card not initialized")}))()}_handleEnabledToggle(n){var t=this;return et((function*(){var e,i,o=n.target.checked;if(t._hass){var s=null!==(e=null===(i=t._data)||void 0===i||null===(i=i.entities)||void 0===i?void 0:i.enabled)&&void 0!==e?e:void 0;if(s){var a=o?"turn_on":"turn_off";try{yield t._hass.callService("switch",a,{entity_id:s})}catch(n){t._setActionError("Failed to ".concat(o?"enable":"disable"," slot: ").concat(n instanceof Error?n.message:"Unknown error"))}}}}))()}_startEditing(n){"pin"!==n||this._revealed?this._editingField=n:(this._revealed=!0,this._unsubscribe(),this._subscribe().then((()=>{this._editingField="pin"})))}_handleEditBlur(n){var t=n.target;this._saveEditValue(t.value),this._editingField=null}_handleEditKeydown(n){if("Enter"===n.key){var t=n.target;this._saveEditValue(t.value),this._editingField=null}else"Escape"===n.key&&(this._editingField=null)}_saveEditValue(n){var t=this;return et((function*(){var e;if(t._hass&&t._editingField){var i={name:{entityKey:"name",service:"text.set_value",serviceData:n=>({value:n.trim()})},numberOfUses:{entityKey:"number_of_uses",service:"number.set_value",serviceData:n=>{var t=parseInt(n,10);return!isNaN(t)&&t>=0?{value:t}:{}}},pin:{entityKey:"pin",service:"text.set_value",serviceData:n=>({value:n.trim()})}},o=i[t._editingField],s=null===(e=t._data)||void 0===e||null===(e=e.entities)||void 0===e?void 0:e[o.entityKey],a="numberOfUses"===t._editingField?"number of uses":t._editingField;if(s){var r=t._hass.states[s];if(r&&"unavailable"!==r.state){var l=o.serviceData(n);if(0!==Object.keys(l).length){var[c,d]=o.service.split(".");try{yield t._hass.callService(c,d,Xn({entity_id:s},l))}catch(n){t._setActionError("Failed to update ".concat(a,": ").concat(n instanceof Error?n.message:"Unknown error"))}}}else t._setActionError("Cannot update ".concat(a,": entity is unavailable or disabled"))}else t._setActionError("Cannot update ".concat(a,": entity is unavailable"))}}))()}_setActionError(n){this._actionError=n,setTimeout((()=>{this._actionError=void 0}),5e3)}_dismissActionError(){this._actionError=void 0}_navigateToLock(n){var t=new CustomEvent("hass-more-info",{bubbles:!0,composed:!0,detail:{entityId:n}});this.dispatchEvent(t)}}Xe.styles=[Ue,Te,Ie,je,Fe,Be,lt(Kn||(Kn=Gn(["\n            :host {\n                display: block;\n            }\n\n            ha-card {\n                overflow: hidden;\n            }\n\n            /* Header Section */\n            .header {\n                background: var(--ha-card-background, var(--card-background-color, #fff));\n                border-bottom: 1px solid var(--lcm-border-color);\n                display: flex;\n                flex-direction: column;\n                gap: 12px;\n                padding: 16px;\n            }\n\n            .header-top {\n                align-items: center;\n                display: flex;\n                gap: 12px;\n            }\n\n            .header-icon {\n                align-items: center;\n                background: var(--lcm-active-bg);\n                border-radius: 50%;\n                color: var(--primary-color);\n                display: flex;\n                flex-shrink: 0;\n                height: 40px;\n                justify-content: center;\n                width: 40px;\n            }\n\n            .header-icon ha-svg-icon {\n                --mdc-icon-size: 24px;\n            }\n\n            .header-info {\n                display: flex;\n                flex: 1;\n                flex-direction: column;\n                gap: 2px;\n                min-width: 0;\n            }\n\n            .header-title {\n                color: var(--primary-text-color);\n                font-size: 18px;\n                font-weight: 500;\n            }\n\n            .header-pills {\n                align-items: flex-end;\n                display: flex;\n                flex-direction: column;\n                flex-shrink: 0;\n                gap: 4px;\n            }\n\n            .header-pill {\n                align-items: center;\n                background: var(--lcm-section-bg);\n                border-radius: 12px;\n                color: var(--secondary-text-color);\n                display: flex;\n                font-size: 11px;\n                gap: 4px;\n                padding: 4px 8px;\n                white-space: nowrap;\n            }\n\n            .header-pill ha-svg-icon {\n                --mdc-icon-size: 14px;\n                flex-shrink: 0;\n            }\n\n            .header-pill.clickable {\n                cursor: pointer;\n                transition: background-color 0.2s;\n            }\n\n            .header-pill.clickable:hover {\n                background: var(--lcm-section-bg-hover);\n            }\n\n            /* Content Sections */\n            .content {\n                display: flex;\n                flex-direction: column;\n                gap: 16px;\n                padding: 16px;\n            }\n\n            /* Condition-specific icons (extend shared collapsible styles) */\n            .condition-blocking-icons {\n                align-items: center;\n                display: flex;\n                gap: 4px;\n            }\n\n            .condition-icon {\n                --mdc-icon-size: 16px;\n                color: var(--lcm-disabled-color);\n            }\n\n            .condition-icon.blocking {\n                color: var(--lcm-warning-color);\n            }\n\n            .condition-row-icon {\n                --mdc-icon-size: 18px;\n                color: var(--lcm-disabled-color);\n                flex-shrink: 0;\n            }\n\n            .condition-row-icon.blocking {\n                color: var(--lcm-warning-color);\n            }\n\n            /* Primary Controls Section */\n            .control-row {\n                align-items: center;\n                display: flex;\n                gap: 16px;\n                margin-bottom: 12px;\n            }\n\n            .control-row:last-child {\n                margin-bottom: 0;\n            }\n\n            .control-label {\n                color: var(--secondary-text-color);\n                font-size: 14px;\n                min-width: 60px;\n            }\n\n            .control-value {\n                align-items: center;\n                color: var(--primary-text-color);\n                display: flex;\n                flex: 1;\n                font-family: var(--lcm-code-font);\n                font-size: var(--lcm-code-font-size);\n                font-weight: var(--lcm-code-font-weight);\n                gap: 8px;\n                min-height: 1.5em;\n            }\n\n            .placeholder {\n                color: var(--secondary-text-color);\n                font-style: italic;\n            }\n\n            .pin-field {\n                align-items: center;\n                display: flex;\n                flex: 1;\n                gap: 8px;\n            }\n\n            .pin-value {\n                font-family: var(--lcm-code-font);\n                font-size: var(--lcm-code-font-size);\n                font-weight: var(--lcm-code-font-weight);\n                letter-spacing: 2px;\n                min-height: 1.5em;\n            }\n\n            .pin-value.masked {\n                color: var(--secondary-text-color);\n            }\n\n            .pin-reveal {\n                --mdc-icon-button-size: 32px;\n                --mdc-icon-size: 18px;\n            }\n\n            /* Name-specific edit input (extends shared editable styles) */\n            .name-edit-input {\n                font-family: var(--lcm-code-font);\n                font-size: var(--lcm-code-font-size);\n                font-weight: var(--lcm-code-font-weight);\n            }\n\n            /* PIN-specific edit input (extends shared editable styles) */\n            .pin-edit-input {\n                font-family: var(--lcm-code-font);\n                font-size: var(--lcm-code-font-size);\n                font-weight: var(--lcm-code-font-weight);\n                letter-spacing: 2px;\n            }\n\n            .enabled-row {\n                align-items: center;\n                display: flex;\n                gap: 16px;\n                justify-content: space-between;\n            }\n\n            .enabled-label {\n                color: var(--secondary-text-color);\n                font-size: 14px;\n            }\n\n            /* Status Section */\n            .status-row {\n                align-items: center;\n                display: flex;\n                gap: 12px;\n            }\n\n            .status-text {\n                color: var(--primary-text-color);\n                font-size: 14px;\n                font-weight: 500;\n            }\n\n            .status-detail {\n                color: var(--secondary-text-color);\n                font-size: 13px;\n                margin-left: 24px;\n                margin-top: 4px;\n            }\n\n            /* Conditions Section */\n            .condition-row {\n                align-items: center;\n                display: flex;\n                gap: 12px;\n                padding: 8px 0;\n            }\n\n            .condition-row:first-child {\n                padding-top: 0;\n            }\n\n            .condition-row:last-child {\n                padding-bottom: 0;\n            }\n\n            .condition-label {\n                color: var(--secondary-text-color);\n                font-size: 13px;\n                min-width: 100px;\n            }\n\n            .condition-value {\n                color: var(--primary-text-color);\n                font-size: 14px;\n            }\n\n            /* Unified condition item (matches condition-entity structure) */\n            .condition-item {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n                padding: 8px 0;\n            }\n\n            .condition-item-header {\n                align-items: center;\n                display: flex;\n                gap: 8px;\n            }\n\n            .condition-item-detail {\n                font-size: 13px;\n                margin-left: 28px;\n            }\n\n            /* Inline edit container for number of uses */\n            .condition-edit-container {\n                position: relative;\n            }\n\n            .condition-edit-container .edit-input {\n                background: var(--card-background-color);\n                border: 1px solid var(--primary-color);\n                border-radius: 4px;\n                color: var(--primary-text-color);\n                font-size: 14px;\n                padding: 4px 8px;\n                width: 60px;\n            }\n\n            .condition-edit-container .edit-help {\n                color: var(--secondary-text-color);\n                font-size: 10px;\n                left: 0;\n                position: absolute;\n                top: 100%;\n                white-space: nowrap;\n            }\n\n            .no-conditions {\n                color: var(--secondary-text-color);\n                font-size: 13px;\n                font-style: italic;\n            }\n\n            /* Unified condition entity styles */\n            .condition-entity {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n                padding: 8px 0;\n            }\n\n            .condition-entity.clickable {\n                border-radius: 8px;\n                cursor: pointer;\n                margin: 8px -8px 0;\n                padding: 8px;\n                transition: background-color 0.2s;\n            }\n\n            .condition-entity.clickable:hover {\n                background: var(--lcm-active-bg);\n            }\n\n            .condition-entity:first-child {\n                padding-top: 0;\n            }\n\n            .condition-entity.clickable:first-child {\n                margin-top: 0;\n            }\n\n            .condition-entity-header {\n                align-items: center;\n                display: flex;\n                gap: 6px;\n            }\n\n            .condition-entity-icon {\n                --mdc-icon-size: 18px;\n                flex-shrink: 0;\n            }\n\n            .condition-entity-icon.active {\n                color: var(--lcm-success-color);\n            }\n\n            .condition-entity-icon.inactive {\n                color: var(--lcm-warning-color);\n            }\n\n            .condition-entity-status {\n                color: var(--primary-text-color);\n                font-size: 14px;\n                font-weight: 500;\n            }\n\n            .condition-entity-domain {\n                background: var(--lcm-section-bg);\n                border-radius: 4px;\n                color: var(--secondary-text-color);\n                font-size: 10px;\n                font-weight: 500;\n                letter-spacing: 0.03em;\n                margin-left: auto;\n                padding: 2px 6px;\n                text-transform: uppercase;\n            }\n\n            .condition-entity-name {\n                color: var(--secondary-text-color);\n                font-size: 13px;\n                margin-left: 24px;\n            }\n\n            .condition-context {\n                color: var(--secondary-text-color);\n                font-size: 12px;\n                margin-left: 24px;\n            }\n\n            .condition-context-label {\n                font-weight: 500;\n                margin-right: 4px;\n            }\n\n            .condition-context-next {\n                border-top: 1px solid var(--lcm-border-color);\n                margin-top: 4px;\n                opacity: 0.8;\n                padding-top: 4px;\n            }\n\n            /* Lock Status Section */\n            .lock-row {\n                align-items: center;\n                border-bottom: 1px solid var(--lcm-border-color);\n                display: flex;\n                gap: 12px;\n                padding: 10px 0;\n            }\n\n            .lock-row:last-child {\n                border-bottom: none;\n                padding-bottom: 0;\n            }\n\n            .lock-row:first-child {\n                padding-top: 0;\n            }\n\n            .lock-name {\n                color: var(--primary-text-color);\n                cursor: pointer;\n                flex: 1;\n                font-size: 14px;\n                min-width: 0;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n\n            .lock-name:hover {\n                color: var(--primary-color);\n                text-decoration: underline;\n            }\n\n            .lock-info {\n                display: flex;\n                flex: 1;\n                flex-direction: column;\n                gap: 2px;\n                min-width: 0;\n            }\n\n            .lock-synced-time {\n                color: var(--secondary-text-color);\n                font-size: 11px;\n            }\n\n            .lock-status-text {\n                color: var(--secondary-text-color);\n                font-size: 12px;\n            }\n\n            .lock-code-field {\n                align-items: center;\n                display: flex;\n                gap: 4px;\n            }\n\n            .lock-code-value {\n                color: var(--primary-text-color);\n                font-family: var(--lcm-code-font);\n                font-size: 13px;\n                font-weight: 500;\n                letter-spacing: var(--lcm-code-letter-spacing);\n            }\n\n            /* Message states */\n            .message {\n                color: var(--secondary-text-color);\n                font-style: italic;\n                padding: 16px;\n                text-align: center;\n            }\n\n            .error {\n                color: var(--error-color);\n            }\n\n            /* Action error banner */\n            .action-error {\n                align-items: center;\n                background: var(--error-color, #db4437);\n                color: white;\n                display: flex;\n                font-size: 14px;\n                gap: 8px;\n                justify-content: space-between;\n                padding: 8px 16px;\n            }\n\n            .action-error-dismiss {\n                background: none;\n                border: none;\n                color: white;\n                cursor: pointer;\n                font-size: 16px;\n                opacity: 0.8;\n                padding: 4px;\n            }\n\n            .action-error-dismiss:hover {\n                opacity: 1;\n            }\n\n            /* Condition action icons */\n            .condition-action-icons {\n                align-items: center;\n                display: flex;\n                gap: 4px;\n                margin-left: auto;\n            }\n\n            .condition-edit-icon,\n            .condition-delete-icon {\n                --mdc-icon-size: 18px;\n                color: var(--secondary-text-color);\n                cursor: pointer;\n                opacity: 0.6;\n                transition: opacity 0.2s;\n            }\n\n            .condition-edit-icon:hover {\n                opacity: 1;\n            }\n\n            .condition-delete-icon:hover {\n                color: var(--error-color);\n                opacity: 1;\n            }\n\n            .condition-entity-header .condition-action-icons {\n                margin-left: 8px;\n            }\n\n            /* Add condition links - compact inline style */\n            .add-condition-links {\n                align-items: center;\n                color: var(--secondary-text-color);\n                display: flex;\n                flex-wrap: wrap;\n                font-size: 13px;\n                gap: 4px;\n                padding: 4px 0;\n            }\n\n            .add-condition-link {\n                color: var(--primary-color);\n                cursor: pointer;\n                text-decoration: none;\n            }\n\n            .add-condition-link:hover {\n                text-decoration: underline;\n            }\n\n            .add-condition-separator {\n                color: var(--divider-color);\n                margin: 0 4px;\n            }\n\n            /* Empty conditions header row */\n            .empty-conditions-header {\n                align-items: center;\n                background: var(--lcm-section-bg);\n                border-radius: 8px;\n                display: flex;\n                gap: 8px;\n                padding: 12px;\n            }\n\n            .empty-conditions-title {\n                color: var(--secondary-text-color);\n                font-size: 11px;\n                font-weight: 500;\n                letter-spacing: 0.05em;\n                text-transform: uppercase;\n            }\n\n            .empty-conditions-badge {\n                background: var(--lcm-section-bg-hover);\n                border-radius: 10px;\n                color: var(--secondary-text-color);\n                font-size: 11px;\n                padding: 2px 8px;\n            }\n\n            .empty-conditions-spacer {\n                flex: 1;\n            }\n\n            .empty-conditions-actions {\n                align-items: center;\n                display: flex;\n                gap: 4px;\n            }\n\n            .empty-conditions-btn {\n                --mdc-icon-size: 18px;\n                align-items: center;\n                background: transparent;\n                border: 1px solid var(--divider-color);\n                border-radius: 14px;\n                color: var(--primary-color);\n                cursor: pointer;\n                display: flex;\n                font-size: 11px;\n                gap: 2px;\n                padding: 4px 8px;\n                transition:\n                    background-color 0.2s,\n                    border-color 0.2s;\n            }\n\n            .empty-conditions-btn:hover {\n                background: var(--lcm-active-bg);\n                border-color: var(--primary-color);\n            }\n\n            .empty-conditions-btn ha-svg-icon {\n                --mdc-icon-size: 14px;\n            }\n\n            /* Dialog styles */\n            .dialog-content {\n                display: flex;\n                flex-direction: column;\n                gap: 16px;\n                min-width: 300px;\n            }\n\n            .entity-select {\n                background: var(--card-background-color);\n                border: 1px solid var(--divider-color);\n                border-radius: 4px;\n                color: var(--primary-text-color);\n                font-size: 14px;\n                padding: 8px;\n                width: 100%;\n            }\n\n            .dialog-section {\n                display: flex;\n                flex-direction: column;\n                gap: 8px;\n            }\n\n            .dialog-section-header {\n                color: var(--primary-text-color);\n                font-size: 14px;\n                font-weight: 500;\n            }\n\n            .dialog-section-description {\n                color: var(--secondary-text-color);\n                font-size: 12px;\n            }\n\n            .dialog-checkbox-row {\n                align-items: center;\n                display: flex;\n                gap: 8px;\n            }\n\n            .dialog-checkbox-row label {\n                color: var(--primary-text-color);\n                cursor: pointer;\n                font-size: 14px;\n            }\n\n            .dialog-number-input {\n                margin-top: 8px;\n            }\n\n            .dialog-number-input input {\n                background: var(--input-background-color, var(--card-background-color));\n                border: 1px solid var(--divider-color);\n                border-radius: 4px;\n                color: var(--primary-text-color);\n                font-size: 14px;\n                padding: 8px 12px;\n                width: 100px;\n            }\n\n            .dialog-clear-button {\n                background: none;\n                border: 1px solid var(--divider-color);\n                border-radius: 4px;\n                color: var(--error-color);\n                cursor: pointer;\n                font-size: 13px;\n                margin-top: 8px;\n                padding: 6px 12px;\n            }\n\n            .dialog-clear-button:hover {\n                background: var(--error-color);\n                color: white;\n            }\n\n            /* Confirmation dialog styles */\n            .confirm-dialog-content {\n                color: var(--primary-text-color);\n                font-size: 14px;\n                line-height: 1.5;\n                padding: 8px 0;\n            }\n\n            mwc-button.destructive {\n                --mdc-theme-primary: var(--error-color);\n            }\n\n            /* Make dialog buttons more obviously interactive */\n            ha-dialog mwc-button {\n                cursor: pointer;\n            }\n\n            ha-dialog mwc-button:hover {\n                opacity: 0.8;\n            }\n        "])))],Ee([De()],Xe.prototype,"_config",void 0),Ee([De()],Xe.prototype,"_data",void 0),Ee([De()],Xe.prototype,"_error",void 0),Ee([De()],Xe.prototype,"_actionError",void 0),Ee([De()],Xe.prototype,"_conditionsExpanded",void 0),Ee([De()],Xe.prototype,"_editingField",void 0),Ee([De()],Xe.prototype,"_lockStatusExpanded",void 0),Ee([De()],Xe.prototype,"_showConditionDialog",void 0),Ee([De()],Xe.prototype,"_dialogMode",void 0),Ee([De()],Xe.prototype,"_dialogEntityId",void 0),Ee([De()],Xe.prototype,"_dialogNumberOfUses",void 0),Ee([De()],Xe.prototype,"_dialogSaving",void 0),Ee([De()],Xe.prototype,"_confirmDialog",void 0),Ee([Oe({attribute:!1})],Xe.prototype,"hass",null),customElements.define("lcm-slot",Xe),window.customCards=window.customCards||[],window.customCards.push({description:"Displays and controls a Lock Code Manager code slot",name:"LCM Slot Card",type:"custom:lcm-slot"});var ni=[{label:"Masked with Reveal",value:"masked_with_reveal"},{label:"Always Masked",value:"masked"},{label:"Always Visible",value:"unmasked"}];class ti extends le{constructor(){super(...arguments),this._configEntries=[],this._loading=!0}set hass(n){var t=this._hass!==n;this._hass=n,t&&this._fetchConfigEntries()}setConfig(n){this._config=n}render(){var n,t,e;return this._hass&&this._config?Bt(Tn||(Tn=Gn(['\n            <div class="editor-row">\n                ',"\n                <ha-select\n                    .label=","\n                    .value=","\n                    @selected=","\n                    @closed=","\n                    fixedMenuPosition\n                    naturalMenuWidth\n                >\n                    ",'\n                </ha-select>\n            </div>\n\n            <div class="editor-row">\n                <ha-textfield\n                    .label=',"\n                    .value=",'\n                    type="number"\n                    min="1"\n                    max="9999"\n                    @input=','\n                ></ha-textfield>\n            </div>\n\n            <div class="editor-row">\n                <ha-select\n                    .label=',"\n                    .value=","\n                    @selected=","\n                    @closed=","\n                    fixedMenuPosition\n                    naturalMenuWidth\n                >\n                    ",'\n                </ha-select>\n            </div>\n\n            <div class="section-label">Show Sections</div>\n\n            <div class="checkbox-row">\n                <ha-checkbox\n                    .checked=',"\n                    @change=","\n                ></ha-checkbox>\n                <label @click=",'>Conditions</label>\n            </div>\n\n            <div class="checkbox-row">\n                <ha-checkbox\n                    .checked=',"\n                    @change=","\n                ></ha-checkbox>\n                <label @click=",'>Lock Status</label>\n            </div>\n\n            <div class="checkbox-row">\n                <ha-checkbox\n                    .checked=',"\n                    @change=","\n                ></ha-checkbox>\n                <label @click=",'>Code Sensors in Lock Status</label>\n            </div>\n\n            <div class="checkbox-row">\n                <ha-checkbox\n                    .checked=',"\n                    @change=","\n                ></ha-checkbox>\n                <label @click=",">Sync Status in Lock Status</label>\n            </div>\n        "])),this._loading?Bt(jn||(jn=Gn(["<span>Loading config entries...</span>"]))):0===this._configEntries.length?Bt(Fn||(Fn=Gn(['<div class="no-entries-warning">\n                            No Lock Code Manager config entries found.\n                        </div>']))):qt,"LCM Config Entry",null!==(n=this._config.config_entry_id)&&void 0!==n?n:"",this._configEntryChanged,this._stopPropagation,this._configEntries.map((n=>Bt(Bn||(Bn=Gn(["<mwc-list-item .value=","\n                                >","</mwc-list-item\n                            >"])),n.entry_id,n.title))),"Slot Number",String(null!==(t=this._config.slot)&&void 0!==t?t:""),this._slotChanged,"Code Display",null!==(e=this._config.code_display)&&void 0!==e?e:"masked_with_reveal",this._displayModeChanged,this._stopPropagation,ni.map((n=>Bt(Wn||(Wn=Gn(["<mwc-list-item .value=",">","</mwc-list-item>"])),n.value,n.label))),!1!==this._config.show_conditions,this._showConditionsChanged,this._toggleShowConditions,!1!==this._config.show_lock_status,this._showLockStatusChanged,this._toggleShowLockStatus,!1!==this._config.show_code_sensors,this._showCodeSensorsChanged,this._toggleShowCodeSensors,!1!==this._config.show_lock_sync,this._showLockSyncChanged,this._toggleShowLockSync):Bt(Vn||(Vn=Gn([""])))}_fetchConfigEntries(){var n=this;return et((function*(){if(n._hass){n._loading=!0;try{var t=yield n._hass.callWS({domain:"lock_code_manager",type:"config_entries/get"});n._configEntries=t.filter((n=>"loaded"===n.state))}catch(t){n._configEntries=[]}n._loading=!1,n.requestUpdate()}}))()}_configEntryChanged(n){if(this._config){var t=n.target,{value:e}=t;if(e!==this._config.config_entry_id){var i=this._config,{config_entry_title:o}=i,s=function(n,t){if(null==n)return{};var e,i,o=function(n,t){if(null==n)return{};var e={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(-1!==t.indexOf(i))continue;e[i]=n[i]}return e}(n,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)e=s[i],-1===t.indexOf(e)&&{}.propertyIsEnumerable.call(n,e)&&(o[e]=n[e])}return o}(i,Yn);this._config=Xn(Xn({},s),{},{config_entry_id:e}),this._dispatchConfig()}}}_slotChanged(n){if(this._config){var t=n.target,e=parseInt(t.value,10);isNaN(e)||e===this._config.slot||(this._config=Xn(Xn({},this._config),{},{slot:e}),this._dispatchConfig())}}_displayModeChanged(n){if(this._config){var t=n.target.value;t!==this._config.code_display&&(this._config=Xn(Xn({},this._config),{},{code_display:t}),this._dispatchConfig())}}_showConditionsChanged(n){var t=n.target;this._updateConfig("show_conditions",t.checked)}_showLockStatusChanged(n){var t=n.target;this._updateConfig("show_lock_status",t.checked)}_showCodeSensorsChanged(n){var t=n.target;this._updateConfig("show_code_sensors",t.checked)}_showLockSyncChanged(n){var t=n.target;this._updateConfig("show_lock_sync",t.checked)}_toggleShowConditions(){var n;this._updateConfig("show_conditions",!1===(null===(n=this._config)||void 0===n?void 0:n.show_conditions))}_toggleShowLockStatus(){var n;this._updateConfig("show_lock_status",!1===(null===(n=this._config)||void 0===n?void 0:n.show_lock_status))}_toggleShowCodeSensors(){var n;this._updateConfig("show_code_sensors",!1===(null===(n=this._config)||void 0===n?void 0:n.show_code_sensors))}_toggleShowLockSync(){var n;this._updateConfig("show_lock_sync",!1===(null===(n=this._config)||void 0===n?void 0:n.show_lock_sync))}_updateConfig(n,t){this._config&&(this._config=Xn(Xn({},this._config),{},{[n]:t}),this._dispatchConfig())}_stopPropagation(n){n.stopPropagation()}_dispatchConfig(){this.dispatchEvent(new CustomEvent("config-changed",{bubbles:!0,composed:!0,detail:{config:this._config}}))}}function ei(){return ei=et((function*(n,t,e,i,o,s,a){var r=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],c=arguments.length>9?arguments[9]:void 0,d=yield n.callWS({config_entry_id:t.entry_id,type:"lock_code_manager/get_config_entry_data"}),h=Object.keys(d.slots).map((n=>parseInt(n,10))),p=[];d.locks.sort(((n,t)=>n.entity_id.localeCompare(t.entity_id))).forEach((n=>{p.push({entity:n.entity_id,show_name:!0,type:"entity"})}));var u=h.map((n=>({strategy:{code_display:s,collapsed_sections:c,config_entry_id:t.entry_id,show_code_sensors:e,show_conditions:r,show_lock_count:!1,show_lock_status:l,show_lock_sync:i,slot:n,type:"custom:lock-code-manager-slot",use_slot_cards:a}})));if(o){var v=[...d.locks].sort(((n,t)=>n.name.localeCompare(t.name,void 0,{sensitivity:"base"})));v.forEach((n=>{u.push({strategy:{code_display:s,lock_entity_id:n.entity_id,type:"custom:lock-code-manager-lock"}})}))}return{badges:p,panel:!1,path:ke(t.title),sections:u,title:t.title,type:"sections"}})),ei.apply(this,arguments)}function ii(n,t,e){return e.map((e=>{var i,o;return[ue,de].includes(e.key)?{entity:e.entity_id,name:null!==(i=null===(o=n.states[e.lockEntityId])||void 0===o||null===(o=o.attributes)||void 0===o?void 0:o.friendly_name)&&void 0!==i?i:e.lockEntityId}:{entity:e.entity_id,name:oi(t,e)}}))}function oi(n,t){var e,i,o,s,a=null!==(e=null!==(i=t.name)&&void 0!==i?i:t.original_name)&&void 0!==e?e:"",r=null!==(o=n.title)&&void 0!==o?o:"",l=a.replace(new RegExp("^Code slot ".concat(t.slotNum,"\\s*"),"i"),"").trim();return r&&l.toLowerCase().startsWith(r.toLowerCase())&&(l=l.slice(r.length).trim()),l||(l=a||t.entity_id),(s=l).charAt(0).toUpperCase()+s.slice(1)}function si(n,t,e,i,o){if(0===e.length)return[];var s=ii(n,t,e);return o?[ge,{entities:s,head:{label:i,type:"section"},type:"custom:fold-entity-row"}]:[{label:i,type:"section"},...s]}function ai(n,t,e,i,o,s){if(0===e.length&&null==i)return[];var a=ii(n,t,e);return null!=i&&a.unshift({entity:i}),s?[ge,{entities:a,head:{label:o,type:"section"},type:"custom:fold-entity-row"}]:[{label:o,type:"section"},...a]}ti.styles=lt(Jn||(Jn=Gn(["\n        .editor-row {\n            margin-bottom: 16px;\n        }\n\n        ha-textfield,\n        ha-select {\n            display: block;\n            width: 100%;\n        }\n\n        .no-entries-warning {\n            color: var(--warning-color);\n            padding: 8px;\n        }\n\n        .checkbox-row {\n            align-items: center;\n            display: flex;\n            gap: 8px;\n            margin-bottom: 8px;\n        }\n\n        .checkbox-row label {\n            cursor: pointer;\n        }\n\n        .section-label {\n            color: var(--secondary-text-color);\n            font-size: 12px;\n            font-weight: 500;\n            letter-spacing: 0.05em;\n            margin-bottom: 8px;\n            margin-top: 16px;\n            text-transform: uppercase;\n        }\n    "]))),customElements.define("lcm-slot-editor",ti);customElements.define("ll-strategy-dashboard-lock-code-manager",class extends Ct{static generate(n,t){return et((function*(){var e,i,o,s,a=yield t.callWS({domain:"lock_code_manager",type:"config_entries/get"});if(0===a.length)return{title:"Lock Code Manager",views:[Ce("# No Lock Code Manager configurations found!")]};var r=null===(e=null!==(i=n.show_per_configuration_lock_cards)&&void 0!==i?i:n.show_all_codes_for_locks)||void 0===e||e,l=a.map((t=>({path:ke(t.title),strategy:{code_display:n.code_display,collapsed_sections:n.collapsed_sections,config_entry_id:t.entry_id,show_code_sensors:n.show_code_sensors,show_conditions:n.show_conditions,show_lock_cards:r,show_lock_status:n.show_lock_status,show_lock_sync:n.show_lock_sync,type:"custom:lock-code-manager",use_slot_cards:n.use_slot_cards},title:t.title})));if(null===(o=null!==(s=n.show_all_lock_cards_view)&&void 0!==s?s:n.show_all_codes_for_locks)||void 0===o||o){var c=new Map;yield Promise.all(a.map(function(){var n=et((function*(n){(yield t.callWS({config_entry_id:n.entry_id,type:"lock_code_manager/get_config_entry_data"})).locks.forEach((n=>c.set(n.entity_id,n)))}));return function(t){return n.apply(this,arguments)}}()));var d=Array.from(c.values()).sort(((n,t)=>n.name.localeCompare(t.name,void 0,{sensitivity:"base"}))),h=d.length>0?d.map((t=>{var e;return{cards:[{code_display:null!==(e=n.code_display)&&void 0!==e?e:_e,lock_entity_id:t.entity_id,type:"custom:lcm-lock-codes"}],title:t.name,type:"grid"}})):void 0,p=0===d.length?[{content:"# No locks found to display.",type:"markdown"}]:void 0;l.push(Xn(Xn(Xn({},p&&{cards:p}),{},{icon:"mdi:lock-smart",path:"user-codes"},h&&{sections:h}),{},{title:"User Codes"},h&&{type:"sections"}))}return 1===l.length&&l.push({title:"​"}),{title:"Lock Code Manager",views:l}}))()}}),customElements.define("ll-strategy-section-lock-code-manager-lock",class extends Ct{static generate(n,t){return et((function*(){var e,i,{code_display:o=_e,lock_entity_id:s}=n,a=t.states[s];return{cards:[{code_display:o,lock_entity_id:s,type:"custom:lcm-lock-codes"}],title:null!==(e=null==a||null===(i=a.attributes)||void 0===i?void 0:i.friendly_name)&&void 0!==e?e:s,type:"grid"}}))()}}),customElements.define("ll-strategy-section-lock-code-manager-slot",class extends Ct{static generate(n,t){return et((function*(){var{code_display:e=_e,collapsed_sections:i,config_entry_id:o,show_code_sensors:s=me,show_conditions:a=fe,show_lock_count:r=ye,show_lock_status:l=be,show_lock_sync:c=xe,slot:d,use_slot_cards:h=we}=n;if(h){var p={code_display:e,config_entry_id:o,show_code_sensors:s,show_conditions:a,show_lock_count:r,show_lock_status:l,show_lock_sync:c,slot:d,type:"custom:lcm-slot"};return i&&i.length>0&&(p.collapsed_sections=i),{cards:[p],type:"grid"}}var[u,v]=yield Promise.all([t.callWS({config_entry_id:o,type:"lock_code_manager/get_config_entry_data"}),t.callWS({type:"lovelace/resources"})]),g=u.entities.map((n=>function(n){var t=n.unique_id.split("|");return Xn(Xn({},n),{},{key:t[2],lockEntityId:t[3],slotNum:parseInt(t[1],10)})}(n))).sort(((n,t)=>n.slotNum-t.slotNum)),_=function(n,t,e){var i=[],o=[],s=[],a=[];t.filter((t=>t.slotNum===n)).forEach((n=>{n.key===de?s.push(n):n.key===ue?a.push(n):ve.includes(n.key)?o.push(n):[pe,ue,he].includes(n.key)||i.push(n)}));var r=t.find((t=>t.slotNum===n&&t.key===he)),l=t.find((t=>t.slotNum===n&&t.key===pe));return{calendarEntityId:e.slots[n],codeEventEntity:r,codeSensorEntities:s,conditionEntities:o,inSyncEntities:a,mainEntities:i,pinActiveEntity:l,slotNum:n}}(d,g,u),m=v.filter((n=>n.url.includes("fold-entity-row.js"))).length>0,f=function(n,t,e,i,o,s){return{cards:[{content:"## Code Slot ".concat(e.slotNum),type:"markdown"},{entities:[...ii(n,t,e.mainEntities),ge,{entity:e.pinActiveEntity.entity_id,name:"PIN active"},{entity:e.codeEventEntity.entity_id,name:"PIN last used"},...ai(n,t,e.conditionEntities,e.calendarEntityId,"Conditions",i),...s?si(n,t,e.inSyncEntities,"Locks in sync",i):[],...o?si(n,t,e.codeSensorEntities,"Code slot sensors",i):[]],show_header_toggle:!1,type:"entities"}],type:"vertical-stack"}}(t,u.config_entry,_,m,s,c);return{cards:[f],type:"grid"}}))()}}),customElements.define("ll-strategy-view-lock-code-manager",class extends Ct{static generate(n,t){return et((function*(){var{config_entry_id:e,config_entry_title:i}=n;if("NOT_RUNNING"===t.config.state)return{cards:[{type:"starting"}]};var o=function(n){var{config_entry_id:t,config_entry_title:e}=n;return void 0===t&&void 0===e?{error:"missing",valid:!1}:void 0!==t&&void 0!==e?{error:"both_specified",valid:!1}:{valid:!0}}(n);if(!o.valid)return Ce("## ERROR: Either `config_entry_title` or `config_entry_id` must be provided in the view config, but not both!");try{var s,a,r,l,c,d,h,p,u,v,g,{config_entry:_}=yield t.callWS({config_entry_id:e,config_entry_title:i,type:"lock_code_manager/get_config_entry_data"}),m=null!==(s=null!==(a=n.show_code_sensors)&&void 0!==a?a:n.include_code_slot_sensors)&&void 0!==s?s:me,f=null!==(r=null!==(l=n.show_lock_sync)&&void 0!==l?l:n.include_in_sync_sensors)&&void 0!==r?r:xe,y=null!==(c=null!==(d=n.code_display)&&void 0!==d?d:n.code_data_view_code_display)&&void 0!==c?c:_e,b=null===(h=null!==(p=n.show_lock_cards)&&void 0!==p?p:n.show_all_codes_for_locks)||void 0===h||h;return function(n,t,e,i,o,s,a){return ei.apply(this,arguments)}(t,_,m,f,b,y,null!==(u=n.use_slot_cards)&&void 0!==u?u:we,null!==(v=n.show_conditions)&&void 0!==v?v:fe,null!==(g=n.show_lock_status)&&void 0!==g?g:be,n.collapsed_sections)}catch(n){return Ce(function(n,t){var e=void 0!==n?"with ID `".concat(n,"`"):"called `".concat(t,"`");return"## ERROR: No Lock Code Manager configuration ".concat(e," found!")}(e,i))}}))()}});
