var n,e,t,i,o,r,a,s,l,c,d,h,v,p,u,g,m,_,f,y,b,x,k,w,E,$,C,A,S,L,M,P,z,H,O,N,R,U,j,T,I,V,D,F,q,B,W,Z,K,J,G,Q,X,Y,nn,en,tn,on,rn,an,sn,ln,cn,dn,hn,vn,pn,un,gn,mn,_n,fn,yn;function bn(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function xn(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?bn(Object(t),!0).forEach((function(e){kn(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bn(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function kn(n,e,t){return(e=function(n){var e=function(n,e){if("object"!=typeof n||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==typeof e?e:e+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wn(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function En(n,e,t,i,o,r,a){try{var s=n[r](a),l=s.value}catch(n){return void t(n)}s.done?e(l):Promise.resolve(l).then(i,o)}function $n(n){return function(){var e=this,t=arguments;return new Promise((function(i,o){var r=n.apply(e,t);function a(n){En(r,i,o,a,s,"next",n)}function s(n){En(r,i,o,a,s,"throw",n)}a(void 0)}))}}var Cn=globalThis,An=Cn.ShadowRoot&&(void 0===Cn.ShadyCSS||Cn.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Sn=Symbol(),Ln=new WeakMap,Mn=class{constructor(n,e,t){if(this._$cssResult$=!0,t!==Sn)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=n,this.t=e}get styleSheet(){var n=this.o,e=this.t;if(An&&void 0===n){var t=void 0!==e&&1===e.length;t&&(n=Ln.get(e)),void 0===n&&((this.o=n=new CSSStyleSheet).replaceSync(this.cssText),t&&Ln.set(e,n))}return n}toString(){return this.cssText}},Pn=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var o=1===n.length?n[0]:t.reduce(((e,t,i)=>e+(n=>{if(!0===n._$cssResult$)return n.cssText;if("number"==typeof n)return n;throw Error("Value passed to 'css' function must be a 'css' function result: "+n+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(t)+n[i+1]),n[0]);return new Mn(o,n,Sn)},zn=An?n=>n:n=>n instanceof CSSStyleSheet?(n=>{var e="";for(var t of n.cssRules)e+=t.cssText;return(n=>new Mn("string"==typeof n?n:n+"",void 0,Sn))(e)})(n):n,{is:Hn,defineProperty:On,getOwnPropertyDescriptor:Nn,getOwnPropertyNames:Rn,getOwnPropertySymbols:Un,getPrototypeOf:jn}=Object,Tn=globalThis,In=Tn.trustedTypes,Vn=In?In.emptyScript:"",Dn=Tn.reactiveElementPolyfillSupport,Fn=(n,e)=>n,qn={toAttribute(n,e){switch(e){case Boolean:n=n?Vn:null;break;case Object:case Array:n=null==n?n:JSON.stringify(n)}return n},fromAttribute(n,e){var t=n;switch(e){case Boolean:t=null!==n;break;case Number:t=null===n?null:Number(n);break;case Object:case Array:try{t=JSON.parse(n)}catch(n){t=null}}return t}},Bn=(n,e)=>!Hn(n,e),Wn={attribute:!0,type:String,converter:qn,reflect:!1,useDefault:!1,hasChanged:Bn};null!==(n=Symbol.metadata)&&void 0!==n||(Symbol.metadata=Symbol("metadata")),null!==(e=Tn.litPropertyMetadata)&&void 0!==e||(Tn.litPropertyMetadata=new WeakMap);var Zn=class extends HTMLElement{static addInitializer(n){var e;this._$Ei(),(null!==(e=this.l)&&void 0!==e?e:this.l=[]).push(n)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wn;if(e.state&&(e.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(n)&&((e=Object.create(e)).wrapped=!0),this.elementProperties.set(n,e),!e.noAccessor){var t=Symbol(),i=this.getPropertyDescriptor(n,t,e);void 0!==i&&On(this.prototype,n,i)}}static getPropertyDescriptor(n,e,t){var i,{get:o,set:r}=null!==(i=Nn(this.prototype,n))&&void 0!==i?i:{get(){return this[e]},set(n){this[e]=n}};return{get:o,set(e){var i=null==o?void 0:o.call(this);null!=r&&r.call(this,e),this.requestUpdate(n,i,t)},configurable:!0,enumerable:!0}}static getPropertyOptions(n){var e;return null!==(e=this.elementProperties.get(n))&&void 0!==e?e:Wn}static _$Ei(){if(!this.hasOwnProperty(Fn("elementProperties"))){var n=jn(this);n.finalize(),void 0!==n.l&&(this.l=[...n.l]),this.elementProperties=new Map(n.elementProperties)}}static finalize(){if(!this.hasOwnProperty(Fn("finalized"))){if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Fn("properties"))){var n=this.properties,e=[...Rn(n),...Un(n)];for(var t of e)this.createProperty(t,n[t])}var i=this[Symbol.metadata];if(null!==i){var o=litPropertyMetadata.get(i);if(void 0!==o)for(var[r,a]of o)this.elementProperties.set(r,a)}for(var[s,l]of(this._$Eh=new Map,this.elementProperties)){var c=this._$Eu(s,l);void 0!==c&&this._$Eh.set(c,s)}this.elementStyles=this.finalizeStyles(this.styles)}}static finalizeStyles(n){var e=[];if(Array.isArray(n)){var t=new Set(n.flat(1/0).reverse());for(var i of t)e.unshift(zn(i))}else void 0!==n&&e.push(zn(n));return e}static _$Eu(n,e){var t=e.attribute;return!1===t?void 0:"string"==typeof t?t:"string"==typeof n?n.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var n;this._$ES=new Promise((n=>this.enableUpdating=n)),this._$AL=new Map,this._$E_(),this.requestUpdate(),null===(n=this.constructor.l)||void 0===n||n.forEach((n=>n(this)))}addController(n){var e,t;(null!==(e=this._$EO)&&void 0!==e?e:this._$EO=new Set).add(n),void 0!==this.renderRoot&&this.isConnected&&(null===(t=n.hostConnected)||void 0===t||t.call(n))}removeController(n){var e;null===(e=this._$EO)||void 0===e||e.delete(n)}_$E_(){var n=new Map,e=this.constructor.elementProperties;for(var t of e.keys())this.hasOwnProperty(t)&&(n.set(t,this[t]),delete this[t]);n.size>0&&(this._$Ep=n)}createRenderRoot(){var n,e=null!==(n=this.shadowRoot)&&void 0!==n?n:this.attachShadow(this.constructor.shadowRootOptions);return((n,e)=>{if(An)n.adoptedStyleSheets=e.map((n=>n instanceof CSSStyleSheet?n:n.styleSheet));else for(var t of e){var i=document.createElement("style"),o=Cn.litNonce;void 0!==o&&i.setAttribute("nonce",o),i.textContent=t.cssText,n.appendChild(i)}})(e,this.constructor.elementStyles),e}connectedCallback(){var n,e;null!==(n=this.renderRoot)&&void 0!==n||(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$EO)||void 0===e||e.forEach((n=>{var e;return null===(e=n.hostConnected)||void 0===e?void 0:e.call(n)}))}enableUpdating(n){}disconnectedCallback(){var n;null===(n=this._$EO)||void 0===n||n.forEach((n=>{var e;return null===(e=n.hostDisconnected)||void 0===e?void 0:e.call(n)}))}attributeChangedCallback(n,e,t){this._$AK(n,t)}_$ET(n,e){var t=this.constructor.elementProperties.get(n),i=this.constructor._$Eu(n,t);if(void 0!==i&&!0===t.reflect){var o,r=(void 0!==(null===(o=t.converter)||void 0===o?void 0:o.toAttribute)?t.converter:qn).toAttribute(e,t.type);this._$Em=n,null==r?this.removeAttribute(i):this.setAttribute(i,r),this._$Em=null}}_$AK(n,e){var t=this.constructor,i=t._$Eh.get(n);if(void 0!==i&&this._$Em!==i){var o,r,a,s=t.getPropertyOptions(i),l="function"==typeof s.converter?{fromAttribute:s.converter}:void 0!==(null===(o=s.converter)||void 0===o?void 0:o.fromAttribute)?s.converter:qn;this._$Em=i;var c=l.fromAttribute(e,s.type);this[i]=null!==(r=null!=c?c:null===(a=this._$Ej)||void 0===a?void 0:a.get(i))&&void 0!==r?r:c,this._$Em=null}}requestUpdate(n,e,t){if(void 0!==n){var i,o,r=this.constructor,a=this[n];if(null!=t||(t=r.getPropertyOptions(n)),!((null!==(i=t.hasChanged)&&void 0!==i?i:Bn)(a,e)||t.useDefault&&t.reflect&&a===(null===(o=this._$Ej)||void 0===o?void 0:o.get(n))&&!this.hasAttribute(r._$Eu(n,t))))return;this.C(n,e,t)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(n,e,t,i){var o,r,a,{useDefault:s,reflect:l,wrapped:c}=t;s&&!(null!==(o=this._$Ej)&&void 0!==o?o:this._$Ej=new Map).has(n)&&(this._$Ej.set(n,null!==(r=null!=i?i:e)&&void 0!==r?r:this[n]),!0!==c||void 0!==i)||(this._$AL.has(n)||(this.hasUpdated||s||(e=void 0),this._$AL.set(n,e)),!0===l&&this._$Em!==n&&(null!==(a=this._$Eq)&&void 0!==a?a:this._$Eq=new Set).add(n))}_$EP(){var n=this;return $n((function*(){n.isUpdatePending=!0;try{yield n._$ES}catch(e){Promise.reject(e)}var e=n.scheduleUpdate();return null!=e&&(yield e),!n.isUpdatePending}))()}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(this.isUpdatePending){if(!this.hasUpdated){var n;if(null!==(n=this.renderRoot)&&void 0!==n||(this.renderRoot=this.createRenderRoot()),this._$Ep){for(var[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}var i=this.constructor.elementProperties;if(i.size>0)for(var[o,r]of i){var{wrapped:a}=r,s=this[o];!0!==a||this._$AL.has(o)||void 0===s||this.C(o,void 0,r,s)}}var l=!1,c=this._$AL;try{var d;(l=this.shouldUpdate(c))?(this.willUpdate(c),null!==(d=this._$EO)&&void 0!==d&&d.forEach((n=>{var e;return null===(e=n.hostUpdate)||void 0===e?void 0:e.call(n)})),this.update(c)):this._$EM()}catch(c){throw l=!1,this._$EM(),c}l&&this._$AE(c)}}willUpdate(n){}_$AE(n){var e;null!==(e=this._$EO)&&void 0!==e&&e.forEach((n=>{var e;return null===(e=n.hostUpdated)||void 0===e?void 0:e.call(n)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(n)),this.updated(n)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(n){return!0}update(n){this._$Eq&&(this._$Eq=this._$Eq.forEach((n=>this._$ET(n,this[n])))),this._$EM()}updated(n){}firstUpdated(n){}};Zn.elementStyles=[],Zn.shadowRootOptions={mode:"open"},Zn[Fn("elementProperties")]=new Map,Zn[Fn("finalized")]=new Map,null!=Dn&&Dn({ReactiveElement:Zn}),(null!==(t=Tn.reactiveElementVersions)&&void 0!==t?t:Tn.reactiveElementVersions=[]).push("2.1.1");var Kn=globalThis,Jn=Kn.trustedTypes,Gn=Jn?Jn.createPolicy("lit-html",{createHTML:n=>n}):void 0,Qn="$lit$",Xn="lit$".concat(Math.random().toFixed(9).slice(2),"$"),Yn="?"+Xn,ne="<".concat(Yn,">"),ee=document,te=()=>ee.createComment(""),ie=n=>null===n||"object"!=typeof n&&"function"!=typeof n,oe=Array.isArray,re="[ \t\n\f\r]",ae=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,se=/-->/g,le=/>/g,ce=RegExp(">|".concat(re,"(?:([^\\s\"'>=/]+)(").concat(re,"*=").concat(re,"*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)"),"g"),de=/'/g,he=/"/g,ve=/^(?:script|style|textarea|title)$/i,pe=(n=>function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return{_$litType$:n,strings:e,values:i}})(1),ue=Symbol.for("lit-noChange"),ge=Symbol.for("lit-nothing"),me=new WeakMap,_e=ee.createTreeWalker(ee,129);function fe(n,e){if(!oe(n)||!n.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==Gn?Gn.createHTML(e):e}var ye=(n,e)=>{for(var t,i=n.length-1,o=[],r=2===e?"<svg>":3===e?"<math>":"",a=ae,s=0;s<i;s++){for(var l=n[s],c=void 0,d=void 0,h=-1,v=0;v<l.length&&(a.lastIndex=v,null!==(d=a.exec(l)));)v=a.lastIndex,a===ae?"!--"===d[1]?a=se:void 0!==d[1]?a=le:void 0!==d[2]?(ve.test(d[2])&&(t=RegExp("</"+d[2],"g")),a=ce):void 0!==d[3]&&(a=ce):a===ce?">"===d[0]?(a=null!=t?t:ae,h=-1):void 0===d[1]?h=-2:(h=a.lastIndex-d[2].length,c=d[1],a=void 0===d[3]?ce:'"'===d[3]?he:de):a===he||a===de?a=ce:a===se||a===le?a=ae:(a=ce,t=void 0);var p=a===ce&&n[s+1].startsWith("/>")?" ":"";r+=a===ae?l+ne:h>=0?(o.push(c),l.slice(0,h)+Qn+l.slice(h)+Xn+p):l+Xn+(-2===h?s:p)}return[fe(n,r+(n[i]||"<?>")+(2===e?"</svg>":3===e?"</math>":"")),o]};class be{constructor(n,e){var t,{strings:i,_$litType$:o}=n;this.parts=[];var r=0,a=0,s=i.length-1,l=this.parts,[c,d]=ye(i,o);if(this.el=be.createElement(c,e),_e.currentNode=this.el.content,2===o||3===o){var h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;null!==(t=_e.nextNode())&&l.length<s;){if(1===t.nodeType){if(t.hasAttributes())for(var v of t.getAttributeNames())if(v.endsWith(Qn)){var p=d[a++],u=t.getAttribute(v).split(Xn),g=/([.?@])?(.*)/.exec(p);l.push({type:1,index:r,name:g[2],strings:u,ctor:"."===g[1]?$e:"?"===g[1]?Ce:"@"===g[1]?Ae:Ee}),t.removeAttribute(v)}else v.startsWith(Xn)&&(l.push({type:6,index:r}),t.removeAttribute(v));if(ve.test(t.tagName)){var m=t.textContent.split(Xn),_=m.length-1;if(_>0){t.textContent=Jn?Jn.emptyScript:"";for(var f=0;f<_;f++)t.append(m[f],te()),_e.nextNode(),l.push({type:2,index:++r});t.append(m[_],te())}}}else if(8===t.nodeType)if(t.data===Yn)l.push({type:2,index:r});else for(var y=-1;-1!==(y=t.data.indexOf(Xn,y+1));)l.push({type:7,index:r}),y+=Xn.length-1;r++}}static createElement(n,e){var t=ee.createElement("template");return t.innerHTML=n,t}}function xe(n,e){var t,i,o,r,a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n,l=arguments.length>3?arguments[3]:void 0;if(e===ue)return e;var c=void 0!==l?null===(t=s._$Co)||void 0===t?void 0:t[l]:s._$Cl,d=ie(e)?void 0:e._$litDirective$;return(null===(i=c)||void 0===i?void 0:i.constructor)!==d&&(null!==(o=c)&&void 0!==o&&null!==(r=o._$AO)&&void 0!==r&&r.call(o,!1),void 0===d?c=void 0:(c=new d(n))._$AT(n,s,l),void 0!==l?(null!==(a=s._$Co)&&void 0!==a?a:s._$Co=[])[l]=c:s._$Cl=c),void 0!==c&&(e=xe(n,c._$AS(n,e.values),c,l)),e}class ke{constructor(n,e){this._$AV=[],this._$AN=void 0,this._$AD=n,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(n){var e,{el:{content:t},parts:i}=this._$AD,o=(null!==(e=null==n?void 0:n.creationScope)&&void 0!==e?e:ee).importNode(t,!0);_e.currentNode=o;for(var r=_e.nextNode(),a=0,s=0,l=i[0];void 0!==l;){var c;if(a===l.index){var d=void 0;2===l.type?d=new we(r,r.nextSibling,this,n):1===l.type?d=new l.ctor(r,l.name,l.strings,this,n):6===l.type&&(d=new Se(r,this,n)),this._$AV.push(d),l=i[++s]}a!==(null===(c=l)||void 0===c?void 0:c.index)&&(r=_e.nextNode(),a++)}return _e.currentNode=ee,o}p(n){var e=0;for(var t of this._$AV)void 0!==t&&(void 0!==t.strings?(t._$AI(n,t,e),e+=t.strings.length-2):t._$AI(n[e])),e++}}class we{get _$AU(){var n,e;return null!==(n=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==n?n:this._$Cv}constructor(n,e,t,i){var o;this.type=2,this._$AH=ge,this._$AN=void 0,this._$AA=n,this._$AB=e,this._$AM=t,this.options=i,this._$Cv=null===(o=null==i?void 0:i.isConnected)||void 0===o||o}get parentNode(){var n,e=this._$AA.parentNode,t=this._$AM;return void 0!==t&&11===(null===(n=e)||void 0===n?void 0:n.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(n){n=xe(this,n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this),ie(n)?n===ge||null==n||""===n?(this._$AH!==ge&&this._$AR(),this._$AH=ge):n!==this._$AH&&n!==ue&&this._(n):void 0!==n._$litType$?this.$(n):void 0!==n.nodeType?this.T(n):(n=>oe(n)||"function"==typeof(null==n?void 0:n[Symbol.iterator]))(n)?this.k(n):this._(n)}O(n){return this._$AA.parentNode.insertBefore(n,this._$AB)}T(n){this._$AH!==n&&(this._$AR(),this._$AH=this.O(n))}_(n){this._$AH!==ge&&ie(this._$AH)?this._$AA.nextSibling.data=n:this.T(ee.createTextNode(n)),this._$AH=n}$(n){var e,{values:t,_$litType$:i}=n,o="number"==typeof i?this._$AC(n):(void 0===i.el&&(i.el=be.createElement(fe(i.h,i.h[0]),this.options)),i);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===o)this._$AH.p(t);else{var r=new ke(o,this),a=r.u(this.options);r.p(t),this.T(a),this._$AH=r}}_$AC(n){var e=me.get(n.strings);return void 0===e&&me.set(n.strings,e=new be(n)),e}k(n){oe(this._$AH)||(this._$AH=[],this._$AR());var e,t=this._$AH,i=0;for(var o of n)i===t.length?t.push(e=new we(this.O(te()),this.O(te()),this,this.options)):e=t[i],e._$AI(o),i++;i<t.length&&(this._$AR(e&&e._$AB.nextSibling,i),t.length=i)}_$AR(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._$AA.nextSibling,e=arguments.length>1?arguments[1]:void 0;for(null===(t=this._$AP)||void 0===t||t.call(this,!1,!0,e);n!==this._$AB;){var t,i=n.nextSibling;n.remove(),n=i}}setConnected(n){var e;void 0===this._$AM&&(this._$Cv=n,null===(e=this._$AP)||void 0===e||e.call(this,n))}}class Ee{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(n,e,t,i,o){this.type=1,this._$AH=ge,this._$AN=void 0,this.element=n,this.name=e,this._$AM=i,this.options=o,t.length>2||""!==t[0]||""!==t[1]?(this._$AH=Array(t.length-1).fill(new String),this.strings=t):this._$AH=ge}_$AI(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,t=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=this.strings,r=!1;if(void 0===o)n=xe(this,n,e,0),(r=!ie(n)||n!==this._$AH&&n!==ue)&&(this._$AH=n);else{var a,s,l=n;for(n=o[0],a=0;a<o.length-1;a++)(s=xe(this,l[t+a],e,a))===ue&&(s=this._$AH[a]),r||(r=!ie(s)||s!==this._$AH[a]),s===ge?n=ge:n!==ge&&(n+=(null!=s?s:"")+o[a+1]),this._$AH[a]=s}r&&!i&&this.j(n)}j(n){n===ge?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=n?n:"")}}class $e extends Ee{constructor(){super(...arguments),this.type=3}j(n){this.element[this.name]=n===ge?void 0:n}}class Ce extends Ee{constructor(){super(...arguments),this.type=4}j(n){this.element.toggleAttribute(this.name,!!n&&n!==ge)}}class Ae extends Ee{constructor(n,e,t,i,o){super(n,e,t,i,o),this.type=5}_$AI(n){var e;if((n=null!==(e=xe(this,n,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,0))&&void 0!==e?e:ge)!==ue){var t=this._$AH,i=n===ge&&t!==ge||n.capture!==t.capture||n.once!==t.once||n.passive!==t.passive,o=n!==ge&&(t===ge||i);i&&this.element.removeEventListener(this.name,this,t),o&&this.element.addEventListener(this.name,this,n),this._$AH=n}}handleEvent(n){var e,t;"function"==typeof this._$AH?this._$AH.call(null!==(e=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==e?e:this.element,n):this._$AH.handleEvent(n)}}class Se{constructor(n,e,t){this.element=n,this.type=6,this._$AN=void 0,this._$AM=e,this.options=t}get _$AU(){return this._$AM._$AU}_$AI(n){xe(this,n)}}var Le=Kn.litHtmlPolyfillSupport;null!=Le&&Le(be,we),(null!==(i=Kn.litHtmlVersions)&&void 0!==i?i:Kn.litHtmlVersions=[]).push("3.3.2");var Me=globalThis;class Pe extends Zn{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n,e,t=super.createRenderRoot();return null!==(e=(n=this.renderOptions).renderBefore)&&void 0!==e||(n.renderBefore=t.firstChild),t}update(n){var e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(n),this._$Do=((n,e,t)=>{var i,o=null!==(i=null==t?void 0:t.renderBefore)&&void 0!==i?i:e,r=o._$litPart$;if(void 0===r){var a,s=null!==(a=null==t?void 0:t.renderBefore)&&void 0!==a?a:null;o._$litPart$=r=new we(e.insertBefore(te(),s),s,void 0,null!=t?t:{})}return r._$AI(n),r})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var n;super.connectedCallback(),null===(n=this._$Do)||void 0===n||n.setConnected(!0)}disconnectedCallback(){var n;super.disconnectedCallback(),null===(n=this._$Do)||void 0===n||n.setConnected(!1)}render(){return ue}}Pe._$litElement$=!0,Pe.finalized=!0,null===(o=Me.litElementHydrateSupport)||void 0===o||o.call(Me,{LitElement:Pe});var ze=Me.litElementPolyfillSupport;null==ze||ze({LitElement:Pe}),(null!==(r=Me.litElementVersions)&&void 0!==r?r:Me.litElementVersions=[]).push("4.2.1");var He="code",Oe="pin_used",Ne="active",Re="in_sync",Ue=["number_of_uses","calendar"],je={type:"divider"},Te=["name","enabled","pin",Ne,...Ue,Re,He,Oe],Ie=!1,Ve="masked_with_reveal",De="fold-entity-row.js";function Fe(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",i="àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìıİłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·",o="aaaaaaaaaacccddeeeeeeeegghiiiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz".concat(t),r=new RegExp(i.split("").join("|"),"g");return""===n?e="":(e=n.toString().toLowerCase().replace(r,(n=>o.charAt(i.indexOf(n)))).replace(/(\d),(?=\d)/g,"$1").replace(/[^a-z0-9]+/g,t).replace(new RegExp("(".concat(t,")\\1+"),"g"),"$1").replace(new RegExp("^".concat(t,"+")),"").replace(new RegExp("".concat(t,"+$")),""),""===e&&(e="unknown")),e}function qe(n){return{cards:[{content:n,type:"markdown"}],title:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Lock Code Manager"}}var Be="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z",We="M19,19H5V8H19M19,3H18V1H16V3H8V1H6V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M9.31,17L11.75,14.56L14.19,17L15.25,15.94L12.81,13.5L15.25,11.06L14.19,10L11.75,12.44L9.31,10L8.25,11.06L10.69,13.5L8.25,15.94L9.31,17Z",Ze="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z",Ke="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z",Je="M5.41,21L6.12,17H2.12L2.47,15H6.47L7.53,9H3.53L3.88,7H7.88L8.59,3H10.59L9.88,7H15.88L16.59,3H18.59L17.88,7H21.88L21.53,9H17.53L16.47,15H20.47L20.12,17H16.12L15.41,21H13.41L14.12,17H8.12L7.41,21H5.41M9.53,9L8.47,15H14.47L15.53,9H9.53Z",Ge="unmasked";class Qe extends Pe{constructor(){super(...arguments),this._revealed=!1,this._subscribing=!1}set hass(n){this._hass=n,this._subscribe()}static getConfigElement(){return document.createElement("lock-code-data-card-editor")}static getStubConfig(){return{lock_entity_id:""}}setConfig(n){var e;if(!n.lock_entity_id)throw new Error("lock_entity_id is required");null!==(e=this._config)&&void 0!==e&&e.lock_entity_id&&this._config.lock_entity_id!==n.lock_entity_id&&(this._unsubscribe(),this._data=void 0),this._config=n,this._subscribe()}connectedCallback(){super.connectedCallback(),this._subscribe()}disconnectedCallback(){super.disconnectedCallback(),this._unsubscribe()}render(){var n,e,t,i,o,r,l,c,d,h,v,p=null===(n=this._hass)||void 0===n||null===(n=n.states[null!==(e=null===(t=this._config)||void 0===t?void 0:t.lock_entity_id)&&void 0!==e?e:""])||void 0===n||null===(n=n.attributes)||void 0===n?void 0:n.friendly_name,u=null!==(i=null!==(o=null!==(r=null===(l=this._data)||void 0===l?void 0:l.lock_name)&&void 0!==r?r:p)&&void 0!==o?o:null===(c=this._config)||void 0===c?void 0:c.lock_entity_id)&&void 0!==i?i:"",g=null!==(d=null!==(h=null===(v=this._config)||void 0===v?void 0:v.title)&&void 0!==h?h:u)&&void 0!==d?d:"Lock Codes";return pe(a||(a=wn(['\n            <div class="header-card">\n                <h2 class="header-title">\n                    <ha-icon icon="mdi:lock-smart"></ha-icon>\n                    '," – User Codes\n                </h2>\n            </div>\n            <ha-card>\n                ","\n                ","\n            </ha-card>\n        "])),g,this._error?pe(s||(s=wn(['<div class="message">',"</div>"])),this._error):this._renderSlots(),this._renderSummaryTable())}_toggleReveal(){this._revealed=!this._revealed,this._unsubscribe(),this._subscribe()}_unsubscribe(){this._unsub&&(this._unsub(),this._unsub=void 0)}_shouldReveal(){var n,e,t=null!==(n=null===(e=this._config)||void 0===e?void 0:e.code_display)&&void 0!==n?n:Ge;return"unmasked"===t||"masked_with_reveal"===t&&this._revealed}_subscribe(){var n=this;return $n((function*(){var e;if(n._hass&&n._config&&!n._unsub&&!n._subscribing)if(null!==(e=n._hass.connection)&&void 0!==e&&e.subscribeMessage){n._subscribing=!0;try{n._unsub=yield n._hass.connection.subscribeMessage((e=>{n._data=e,n._error=void 0,n.requestUpdate()}),{lock_entity_id:n._config.lock_entity_id,reveal:n._shouldReveal(),type:"lock_code_manager/subscribe_lock_slot_data"})}catch(e){n._data=void 0,n._error=e instanceof Error?e.message:"Failed to subscribe",n.requestUpdate()}finally{n._subscribing=!1}}else n._error="Websocket connection unavailable"}))()}_renderSlots(){var n,e,t=null!==(n=null===(e=this._data)||void 0===e?void 0:e.slots)&&void 0!==n?n:[];if(0===t.length)return pe(l||(l=wn(['<div class="message">No codes reported</div>'])));var i=this._groupSlots(t);return pe(c||(c=wn(['\n            <div class="slots-grid">\n                ',"\n            </div>\n        "])),i.map((n=>"active"===n.type?n.slots.map((e=>this._renderSlotChip(e,1===n.slots.length))):this._renderEmptySummary(n))))}_groupSlots(n){var e=[],t=[],i=[],o=()=>{t.length>0&&(e.push({rangeLabel:this._formatSlotRange(t),slots:t,type:"empty"}),t=[])},r=()=>{i.length>0&&(e.push({slots:i,type:"active"}),i=[])};for(var a of n){var s=!(!a.configured_code&&!a.configured_code_length);this._hasCode(a)||!0===a.managed&&s?(o(),i.push(a)):(r(),t.push(a))}return r(),o(),e}_formatSlotRange(n){if(0===n.length)return"";if(1===n.length)return"".concat(n[0].slot);var e=n.map((n=>Number(n.slot))).filter((n=>!isNaN(n)));if(e.length!==n.length)return"".concat(n.map((n=>n.slot)).join(", "));for(var t=[],[i]=e,o=i,r=i,a=1;a<e.length;a++)e[a]===r+1||(t.push(o===r?"".concat(o):"".concat(o," – ").concat(r)),o=e[a]),r=e[a];return t.push(o===r?"".concat(o):"".concat(o," – ").concat(r)),"".concat(t.join(", "))}_renderSlotChip(n,e){var t,i,o,r,a,s,l=this._hasCode(n),c=null===(t=n.name)||void 0===t?void 0:t.trim(),{managed:u}=n,g=!(!n.configured_code&&!n.configured_code_length),m=null!==(i=null===(o=this._config)||void 0===o?void 0:o.code_display)&&void 0!==i?i:Ge,_=!!c||!1!==u;!0===n.active?(r="active",a="Active",s="active"):!0===n.enabled&&!1===n.active?(r="inactive",a="Inactive",s="inactive"):!1===n.enabled&&g?(r="disabled",a="Disabled",s="disabled"):l?(r="active",a="Active",s="active"):g?(r="disabled",a="Disabled",s="disabled"):(r="empty",a="Empty",s="empty");var f=!0===u?"managed":!1===u?"unmanaged":"";return pe(d||(d=wn(['\n            <div class="slot-chip '," "," ",'">\n                <div class="slot-top">\n                    <span class="slot-label">Slot ','</span>\n                    <div class="slot-badges">\n                        <span class="slot-status ','"> '," </span>\n                        ","\n                    </div>\n                </div>\n                ",'\n                <div class="slot-code-row">\n                    <span class="slot-code ','">\n                        ',"\n                    </span>\n                    ","\n                </div>\n            </div>\n        "])),r,f,e?"full-width":"",n.slot,s,a,void 0===u?ge:pe(h||(h=wn(['<span class="slot-origin ','">\n                                  ',"\n                              </span>"])),u?"managed":"external",u?"Managed":"Unmanaged"),_?pe(v||(v=wn(['<span class="slot-name ','">\n                          ',"\n                      </span>"])),c?"":"unnamed",null!=c?c:"Unnamed"):ge,this._getCodeClass(n),this._formatCode(n),"masked_with_reveal"===m&&l?pe(p||(p=wn(['<span class="slot-code-actions">\n                              <ha-icon-button\n                                  .path=',"\n                                  @click=","\n                                  .label=","\n                              ></ha-icon-button>\n                          </span>"])),this._revealed?Ke:Ze,this._toggleReveal,this._revealed?"Hide codes":"Reveal codes"):ge)}_getCodeClass(n){var e,t,i=null!==(e=null===(t=this._config)||void 0===t?void 0:t.code_display)&&void 0!==e?e:Ge,o="masked"===i||"masked_with_reveal"===i&&!this._revealed;return null!==n.code&&""!==n.code?"":n.code_length?"masked":n.configured_code?o?"disabled masked":"disabled":n.configured_code_length?"disabled masked":"no-code"}_formatCode(n){var e,t,i=null!==(e=null===(t=this._config)||void 0===t?void 0:t.code_display)&&void 0!==e?e:Ge,o="masked"===i||"masked_with_reveal"===i&&!this._revealed;return null!==n.code&&""!==n.code?o?"•".repeat(String(n.code).length):String(n.code):n.code_length?"•".repeat(n.code_length):n.configured_code?o?"•".repeat(n.configured_code.length):n.configured_code:n.configured_code_length?"•".repeat(n.configured_code_length):"—"}_renderEmptySummary(n){return pe(u||(u=wn(['<div class="empty-summary">\n            <ha-icon icon="mdi:minus-circle-outline"></ha-icon>\n            <span class="empty-summary-label">Empty slots</span>\n            <span class="empty-summary-range">',"</span>\n        </div>"])),n.rangeLabel)}_renderSummaryTable(){var n,e,t=null!==(n=null===(e=this._data)||void 0===e?void 0:e.slots)&&void 0!==n?n:[];if(0===t.length)return pe(g||(g=wn([""])));var i=0,o=0,r=0,a=0,s=0;for(var l of t){var c=this._hasCode(l);!0===l.managed?!0===l.active?i+=1:!0===l.enabled&&!1===l.active?o+=1:!1===l.enabled?r+=1:c?i+=1:o+=1:c?a+=1:s+=1}var d=i+o+r,h=a+s,v=i+a,p=o+s,u=r,_=t.length,f=n=>0===n?"summary-cell-zero":"";return pe(m||(m=wn(['\n            <table class="summary-table">\n                <thead>\n                    <tr>\n                        <th></th>\n                        <th>Active</th>\n                        <th>Inactive</th>\n                        <th>Disabled</th>\n                        <th>Total</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr>\n                        <td>Managed</td>\n                        <td class="','">','</td>\n                        <td class="','">','</td>\n                        <td class="','">',"</td>\n                        <td>",'</td>\n                    </tr>\n                    <tr>\n                        <td>Unmanaged</td>\n                        <td class="','">','</td>\n                        <td class="','">','</td>\n                        <td class="','">–</td>\n                        <td>','</td>\n                    </tr>\n                    <tr class="total-row">\n                        <td>Total</td>\n                        <td class="','">','</td>\n                        <td class="','">','</td>\n                        <td class="','">',"</td>\n                        <td>","</td>\n                    </tr>\n                </tbody>\n            </table>\n        "])),f(i),i,f(o),o,f(r),r,d,f(a),a,f(s),s,f(0),h,f(v),v,f(p),p,f(u),u,_)}_hasCode(n){return!!n.code_length||null!==n.code&&""!==n.code}}Qe.styles=Pn(_n||(_n=wn(["\n        :host {\n            display: flex;\n            flex-direction: column;\n            gap: 8px;\n        }\n\n        .header-card {\n            background: var(--ha-card-background, var(--card-background-color, #fff));\n            border: var(--ha-card-border-width, 1px) solid\n                var(--ha-card-border-color, var(--divider-color, #e0e0e0));\n            border-radius: var(--ha-card-border-radius, 12px);\n            box-shadow: var(--ha-card-box-shadow, 0 2px 2px rgba(0, 0, 0, 0.1));\n            padding: 16px;\n        }\n\n        .header-title {\n            align-items: center;\n            display: flex;\n            font-size: 1.25em;\n            font-weight: 500;\n            gap: 8px;\n            margin: 0;\n        }\n\n        .header-title ha-icon {\n            --mdc-icon-size: 24px;\n            color: var(--primary-color);\n        }\n\n        ha-card {\n            padding: 16px;\n        }\n\n        .slots-grid {\n            display: grid;\n            gap: 10px;\n            grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));\n        }\n\n        .slot-chip {\n            border: 2px solid rgba(var(--rgb-primary-text-color), 0.06);\n            border-radius: 12px;\n            display: flex;\n            flex-direction: column;\n            gap: 6px;\n            padding: 12px 12px 14px;\n            position: relative;\n        }\n\n        /* Active LCM Managed: Primary blue with tinted background */\n        .slot-chip.active.managed {\n            background: linear-gradient(\n                135deg,\n                rgba(var(--rgb-primary-color), 0.08),\n                rgba(var(--rgb-primary-color), 0.03)\n            );\n            border-color: var(--primary-color);\n        }\n\n        /* Active Unmanaged (not LCM): Neutral gray, plain background */\n        .slot-chip.active.unmanaged {\n            background: linear-gradient(\n                135deg,\n                rgba(var(--rgb-primary-text-color), 0.04),\n                rgba(var(--rgb-primary-text-color), 0.01)\n            );\n            border-color: rgba(var(--rgb-primary-text-color), 0.25);\n            border-style: solid;\n        }\n\n        /* Inactive/Disabled LCM Managed: Muted blue dotted, slightly faded */\n        /* Only LCM managed slots can be inactive/disabled (unmanaged are active or empty) */\n        .slot-chip.inactive.managed,\n        .slot-chip.disabled.managed {\n            background: linear-gradient(\n                135deg,\n                rgba(var(--rgb-primary-color), 0.04),\n                rgba(var(--rgb-primary-color), 0.01)\n            );\n            border-color: var(--primary-color);\n            border-style: dotted;\n            opacity: 0.75;\n        }\n\n        .slot-chip.empty {\n            background: linear-gradient(\n                135deg,\n                rgba(var(--rgb-primary-text-color), 0.03),\n                rgba(var(--rgb-primary-text-color), 0.01)\n            );\n            opacity: 0.7;\n        }\n\n        .slot-chip.full-width {\n            grid-column: 1 / -1;\n            justify-self: center;\n            max-width: 360px;\n            width: 100%;\n        }\n\n        .slot-top {\n            align-items: center;\n            display: flex;\n            justify-content: space-between;\n        }\n\n        .slot-badges {\n            align-items: center;\n            display: inline-flex;\n            gap: 6px;\n        }\n\n        .slot-label {\n            color: var(--secondary-text-color);\n            font-size: 11px;\n            font-weight: 500;\n            letter-spacing: 0.03em;\n            text-transform: uppercase;\n        }\n\n        .slot-status {\n            border-radius: 999px;\n            font-size: 10px;\n            font-weight: 600;\n            letter-spacing: 0.02em;\n            padding: 2px 6px;\n            text-transform: uppercase;\n        }\n\n        .slot-status.active {\n            background: rgba(var(--rgb-primary-color), 0.16);\n            color: var(--primary-color);\n        }\n\n        .slot-status.empty {\n            background: rgba(var(--rgb-primary-text-color), 0.08);\n            color: var(--secondary-text-color);\n        }\n\n        .slot-status.inactive {\n            background: rgba(var(--rgb-primary-color), 0.12);\n            color: var(--primary-color);\n        }\n\n        .slot-status.disabled {\n            background: rgba(var(--rgb-warning-color, 255, 152, 0), 0.12);\n            color: var(--warning-color, #ff9800);\n        }\n\n        .slot-origin {\n            border-radius: 999px;\n            font-size: 10px;\n            font-weight: 600;\n            letter-spacing: 0.02em;\n            padding: 2px 6px;\n            text-transform: uppercase;\n        }\n\n        .slot-origin.managed {\n            background: rgba(var(--rgb-primary-color), 0.16);\n            color: var(--primary-color);\n        }\n\n        .slot-origin.external {\n            background: rgba(var(--rgb-primary-text-color), 0.08);\n            color: var(--secondary-text-color);\n        }\n\n        .slot-name {\n            color: var(--primary-text-color);\n            font-size: 15px;\n            font-weight: 500;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n\n        .slot-name.unnamed {\n            color: var(--secondary-text-color);\n            font-weight: 400;\n        }\n\n        .slot-code {\n            color: var(--primary-text-color);\n            font-family: 'Roboto Mono', monospace;\n            font-size: 16px;\n            font-weight: 600;\n            letter-spacing: 1px;\n        }\n\n        .slot-code-row {\n            align-items: center;\n            display: flex;\n            gap: 8px;\n            justify-content: space-between;\n        }\n\n        .slot-code-actions {\n            display: inline-flex;\n        }\n\n        .slot-code-actions ha-icon-button {\n            --mdc-icon-button-size: 28px;\n            --mdc-icon-size: 16px;\n        }\n\n        .slot-code.masked {\n            color: var(--secondary-text-color);\n        }\n\n        .slot-code.no-code {\n            color: var(--disabled-text-color);\n            font-family: inherit;\n            font-size: 12px;\n            font-style: italic;\n            font-weight: 400;\n            letter-spacing: normal;\n        }\n\n        .slot-code.disabled {\n            color: var(--primary-text-color);\n            opacity: 0.6;\n        }\n\n        .slot-code.disabled.masked {\n            color: var(--secondary-text-color);\n        }\n\n        .empty-summary {\n            align-items: center;\n            background: rgba(var(--rgb-primary-text-color), 0.03);\n            border: 1px dashed rgba(var(--rgb-primary-text-color), 0.12);\n            border-radius: 10px;\n            color: var(--secondary-text-color);\n            display: flex;\n            font-size: 12px;\n            gap: 8px;\n            grid-column: 1 / -1;\n            padding: 8px 12px;\n        }\n\n        .empty-summary ha-icon {\n            --mdc-icon-size: 16px;\n            color: var(--secondary-text-color);\n        }\n\n        .empty-summary-label {\n            color: var(--secondary-text-color);\n            font-size: 11px;\n            font-weight: 600;\n            letter-spacing: 0.04em;\n            text-transform: uppercase;\n        }\n\n        .empty-summary-range {\n            color: var(--primary-text-color);\n            font-size: 13px;\n            font-weight: 500;\n        }\n\n        .message {\n            color: var(--secondary-text-color);\n            font-style: italic;\n        }\n\n        /* Summary table */\n        .summary-table {\n            border-collapse: collapse;\n            font-size: 12px;\n            margin-top: 16px;\n            width: 100%;\n        }\n\n        .summary-table th,\n        .summary-table td {\n            padding: 6px 8px;\n            text-align: center;\n        }\n\n        .summary-table th {\n            background: rgba(var(--rgb-primary-text-color), 0.04);\n            color: var(--secondary-text-color);\n            font-size: 10px;\n            font-weight: 600;\n            letter-spacing: 0.04em;\n            text-transform: uppercase;\n        }\n\n        .summary-table th:first-child {\n            border-radius: 6px 0 0 0;\n            text-align: left;\n        }\n\n        .summary-table th:last-child {\n            border-radius: 0 6px 0 0;\n        }\n\n        .summary-table td {\n            border-top: 1px solid rgba(var(--rgb-primary-text-color), 0.06);\n            color: var(--primary-text-color);\n            font-weight: 500;\n        }\n\n        .summary-table td:first-child {\n            color: var(--secondary-text-color);\n            font-size: 11px;\n            font-weight: 600;\n            letter-spacing: 0.03em;\n            text-align: left;\n            text-transform: uppercase;\n        }\n\n        .summary-table tr:last-child td:first-child {\n            border-radius: 0 0 0 6px;\n        }\n\n        .summary-table tr:last-child td:last-child {\n            border-radius: 0 0 6px 0;\n        }\n\n        .summary-table .total-row td {\n            background: rgba(var(--rgb-primary-text-color), 0.02);\n            border-top: 2px solid rgba(var(--rgb-primary-text-color), 0.08);\n            font-weight: 600;\n        }\n\n        .summary-cell-zero {\n            color: var(--disabled-text-color) !important;\n            font-weight: 400 !important;\n        }\n    "]))),customElements.define("lock-code-manager-lock-data",Qe),window.customCards=window.customCards||[],window.customCards.push({description:"Displays lock slot codes from Lock Code Manager",name:"Lock Code Manager Lock Data",type:"custom:lock-code-manager-lock-data"});var Xe=[{label:"Masked with Reveal",value:"masked_with_reveal"},{label:"Always Masked",value:"masked"},{label:"Always Visible",value:"unmasked"}];class Ye extends Pe{constructor(){super(...arguments),this._locks=[],this._loading=!0}set hass(n){var e=this._hass!==n;this._hass=n,e&&this._fetchLocks()}setConfig(n){this._config=n}render(){var n,e;if(!this._hass||!this._config)return pe(_||(_=wn([""])));var t=this._locks.map((n=>n.entity_id));return pe(f||(f=wn(['\n            <div class="editor-row">\n                ',"\n                <ha-entity-picker\n                    .hass=","\n                    .value=","\n                    .includeEntities=","\n                    .label=","\n                    .required=","\n                    @value-changed=",'\n                ></ha-entity-picker>\n            </div>\n\n            <div class="editor-row">\n                <ha-textfield\n                    .label=',"\n                    .value=","\n                    @input=",'\n                ></ha-textfield>\n            </div>\n\n            <div class="editor-row">\n                <ha-select\n                    .label=',"\n                    .value=","\n                    @selected=","\n                    @closed=","\n                    fixedMenuPosition\n                    naturalMenuWidth\n                >\n                    ","\n                </ha-select>\n            </div>\n        "])),this._loading?pe(y||(y=wn(["<span>Loading locks...</span>"]))):0===this._locks.length?pe(b||(b=wn(['<div class="no-locks-warning">\n                            No locks are currently managed by Lock Code Manager.\n                        </div>']))):ge,this._hass,this._config.lock_entity_id,t,"Lock",!0,this._lockChanged,"Title (optional)",null!==(n=this._config.title)&&void 0!==n?n:"",this._titleChanged,"Code Display",null!==(e=this._config.code_display)&&void 0!==e?e:"unmasked",this._displayModeChanged,this._stopPropagation,Xe.map((n=>pe(x||(x=wn(["<mwc-list-item .value=",">","</mwc-list-item>"])),n.value,n.label))))}_fetchLocks(){var n=this;return $n((function*(){if(n._hass){n._loading=!0;try{var e=yield n._hass.callWS({type:"lock_code_manager/get_locks"});n._locks=e.locks}catch(e){n._locks=[]}n._loading=!1,n.requestUpdate()}}))()}_lockChanged(n){if(this._config){var{value:e}=n.detail;e!==this._config.lock_entity_id&&(this._config=xn(xn({},this._config),{},{lock_entity_id:e}),this._dispatchConfig())}}_titleChanged(n){if(this._config){var e=n.target.value||void 0;e!==this._config.title&&(this._config=xn(xn({},this._config),{},{title:e}),this._dispatchConfig())}}_displayModeChanged(n){if(this._config){var e=n.target.value;e!==this._config.code_display&&(this._config=xn(xn({},this._config),{},{code_display:e}),this._dispatchConfig())}}_stopPropagation(n){n.stopPropagation()}_dispatchConfig(){this.dispatchEvent(new CustomEvent("config-changed",{bubbles:!0,composed:!0,detail:{config:this._config}}))}}function nt(n,e,t,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,i);else for(var s=n.length-1;s>=0;s--)(o=n[s])&&(a=(r<3?o(a):r>3?o(e,t,a):o(e,t))||a);return r>3&&a&&Object.defineProperty(e,t,a),a}Ye.styles=Pn(fn||(fn=wn(["\n        .editor-row {\n            margin-bottom: 16px;\n        }\n\n        ha-entity-picker,\n        ha-textfield,\n        ha-select {\n            display: block;\n            width: 100%;\n        }\n\n        .no-locks-warning {\n            color: var(--warning-color);\n            padding: 8px;\n        }\n    "]))),customElements.define("lock-code-data-card-editor",Ye),"function"==typeof SuppressedError&&SuppressedError;var et={attribute:!0,type:String,converter:qn,reflect:!1,hasChanged:Bn},tt=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,{kind:i,metadata:o}=t,r=globalThis.litPropertyMetadata.get(o);if(void 0===r&&globalThis.litPropertyMetadata.set(o,r=new Map),"setter"===i&&((n=Object.create(n)).wrapped=!0),r.set(t.name,n),"accessor"===i){var{name:a}=t;return{set(t){var i=e.get.call(this);e.set.call(this,t),this.requestUpdate(a,i,n)},init(e){return void 0!==e&&this.C(a,void 0,n,e),e}}}if("setter"===i){var{name:s}=t;return function(t){var i=this[s];e.call(this,t),this.requestUpdate(s,i,n)}}throw Error("Unsupported decorator location: "+i)};function it(n){return(e,t)=>"object"==typeof t?tt(n,e,t):((n,e,t)=>{var i=e.hasOwnProperty(t);return e.constructor.createProperty(t,n),i?Object.getOwnPropertyDescriptor(e,t):void 0})(n,e,t)}function ot(n){return it(xn(xn({},n),{},{state:!0,attribute:!1}))}var rt=Pn(k||(k=wn(["\n    :host {\n        /* Section backgrounds */\n        --lcm-section-bg: rgba(var(--rgb-primary-text-color), 0.03);\n        --lcm-section-bg-hover: rgba(var(--rgb-primary-text-color), 0.06);\n\n        /* Active states */\n        --lcm-active-bg: rgba(var(--rgb-primary-color), 0.1);\n        --lcm-active-bg-gradient: linear-gradient(\n            135deg,\n            rgba(var(--rgb-primary-color), 0.1),\n            rgba(var(--rgb-primary-color), 0.04)\n        );\n\n        /* Status colors */\n        --lcm-success-color: var(--success-color, #4caf50);\n        --lcm-warning-color: var(--warning-color, #ff9800);\n        --lcm-disabled-color: var(--disabled-text-color, #9e9e9e);\n\n        /* Badge styling */\n        --lcm-badge-radius: 999px;\n        --lcm-badge-font-size: 10px;\n        --lcm-badge-font-weight: 600;\n        --lcm-badge-letter-spacing: 0.02em;\n        --lcm-badge-padding: 2px 6px;\n\n        /* Section header typography */\n        --lcm-section-header-size: 11px;\n        --lcm-section-header-weight: 600;\n        --lcm-section-header-spacing: 0.05em;\n\n        /* Code/PIN typography */\n        --lcm-code-font: 'Roboto Mono', monospace;\n        --lcm-code-font-size: 16px;\n        --lcm-code-font-weight: 600;\n        --lcm-code-letter-spacing: 1px;\n\n        /* Border colors */\n        --lcm-border-color: rgba(var(--rgb-primary-text-color), 0.06);\n        --lcm-border-color-strong: rgba(var(--rgb-primary-text-color), 0.12);\n    }\n"]))),at=Pn(w||(w=wn(["\n    .lcm-badge {\n        border-radius: var(--lcm-badge-radius);\n        font-size: var(--lcm-badge-font-size);\n        font-weight: var(--lcm-badge-font-weight);\n        letter-spacing: var(--lcm-badge-letter-spacing);\n        padding: var(--lcm-badge-padding);\n        text-transform: uppercase;\n    }\n\n    .lcm-badge.active {\n        background: rgba(var(--rgb-primary-color), 0.16);\n        color: var(--primary-color);\n    }\n\n    .lcm-badge.inactive {\n        background: rgba(var(--rgb-primary-color), 0.12);\n        color: var(--primary-color);\n    }\n\n    .lcm-badge.disabled {\n        background: rgba(var(--rgb-disabled-text-color, 158, 158, 158), 0.15);\n        color: var(--lcm-disabled-color);\n    }\n\n    .lcm-badge.empty {\n        background: rgba(var(--rgb-primary-text-color), 0.08);\n        color: var(--secondary-text-color);\n    }\n\n    .lcm-badge.managed {\n        background: rgba(var(--rgb-primary-color), 0.16);\n        color: var(--primary-color);\n    }\n\n    .lcm-badge.external {\n        background: rgba(var(--rgb-primary-text-color), 0.08);\n        color: var(--secondary-text-color);\n    }\n"]))),st=Pn(E||(E=wn(["\n    .lcm-sync-icon {\n        --mdc-icon-size: 18px;\n    }\n\n    .lcm-sync-icon.synced {\n        color: var(--lcm-success-color);\n    }\n\n    .lcm-sync-icon.pending {\n        color: var(--lcm-warning-color);\n    }\n\n    .lcm-sync-icon.unknown {\n        color: var(--lcm-disabled-color);\n    }\n\n    .lcm-status-dot {\n        border-radius: 50%;\n        height: 12px;\n        width: 12px;\n    }\n\n    .lcm-status-dot.active {\n        background-color: var(--lcm-success-color);\n    }\n\n    .lcm-status-dot.inactive {\n        background-color: var(--lcm-warning-color);\n    }\n\n    .lcm-status-dot.disabled {\n        background-color: var(--lcm-disabled-color);\n    }\n"]))),lt=Pn($||($=wn(["\n    .lcm-code {\n        color: var(--primary-text-color);\n        font-family: var(--lcm-code-font);\n        font-size: var(--lcm-code-font-size);\n        font-weight: var(--lcm-code-font-weight);\n        letter-spacing: var(--lcm-code-letter-spacing);\n    }\n\n    .lcm-code.masked {\n        color: var(--secondary-text-color);\n    }\n\n    .lcm-code.disabled {\n        color: var(--secondary-text-color);\n        text-decoration: line-through;\n    }\n\n    .lcm-code.no-code {\n        color: var(--disabled-text-color);\n        font-family: inherit;\n        font-size: 12px;\n        font-style: italic;\n        font-weight: 400;\n        letter-spacing: normal;\n    }\n"]))),ct=Pn(C||(C=wn(["\n    .lcm-section {\n        background: var(--lcm-section-bg);\n        border-radius: 12px;\n        padding: 16px;\n    }\n\n    .lcm-section-header {\n        color: var(--secondary-text-color);\n        font-size: var(--lcm-section-header-size);\n        font-weight: var(--lcm-section-header-weight);\n        letter-spacing: var(--lcm-section-header-spacing);\n        margin-bottom: 12px;\n        text-transform: uppercase;\n    }\n"]))),dt=Pn(A||(A=wn(["\n    .lcm-reveal-button {\n        --mdc-icon-button-size: 28px;\n        --mdc-icon-size: 16px;\n        color: var(--secondary-text-color);\n    }\n"]))),ht=Pn(S||(S=wn(["\n    .collapsible-section {\n        background: var(--lcm-section-bg);\n        border-radius: 12px;\n        overflow: hidden;\n    }\n\n    .collapsible-header {\n        align-items: center;\n        cursor: pointer;\n        display: flex;\n        justify-content: space-between;\n        padding: 12px 16px;\n        user-select: none;\n    }\n\n    .collapsible-header:hover {\n        background: var(--lcm-section-bg-hover);\n    }\n\n    .collapsible-title {\n        align-items: center;\n        color: var(--secondary-text-color);\n        display: flex;\n        font-size: var(--lcm-section-header-size);\n        font-weight: var(--lcm-section-header-weight);\n        gap: 8px;\n        letter-spacing: var(--lcm-section-header-spacing);\n        text-transform: uppercase;\n    }\n\n    .collapsible-badge {\n        background: var(--lcm-active-bg);\n        border-radius: 10px;\n        color: var(--primary-color);\n        font-size: var(--lcm-badge-font-size);\n        padding: 2px 8px;\n    }\n\n    .collapsible-badge.primary {\n        background: var(--primary-color);\n        color: var(--text-primary-color, #fff);\n    }\n\n    .collapsible-badge.warning {\n        background: var(--warning-color, #ffa600);\n        color: var(--text-primary-color, #fff);\n    }\n\n    .collapsible-chevron {\n        --mdc-icon-size: 20px;\n        color: var(--secondary-text-color);\n        transition: transform 0.2s ease;\n    }\n\n    .collapsible-content {\n        max-height: 0;\n        opacity: 0;\n        overflow: hidden;\n        padding: 0 16px;\n        transition:\n            max-height 0.3s ease,\n            opacity 0.2s ease,\n            padding 0.3s ease;\n    }\n\n    .collapsible-content.expanded {\n        max-height: 500px;\n        opacity: 1;\n        padding: 0 16px 16px;\n    }\n"]))),vt=Pn(L||(L=wn(["\n    .editable {\n        border-radius: 4px;\n        cursor: pointer;\n        margin: -4px -8px;\n        padding: 4px 8px;\n        transition: background-color 0.2s;\n    }\n\n    .editable:hover {\n        background: var(--lcm-active-bg);\n    }\n\n    .edit-input {\n        background: var(--card-background-color, #fff);\n        border: 1px solid var(--primary-color);\n        border-radius: 4px;\n        color: var(--primary-text-color);\n        font-family: inherit;\n        font-size: inherit;\n        outline: none;\n        padding: 4px 8px;\n        width: 100%;\n    }\n\n    .edit-input:focus {\n        box-shadow: 0 0 0 1px var(--primary-color);\n    }\n\n    .edit-help {\n        color: var(--secondary-text-color);\n        font-size: var(--lcm-section-header-size);\n        margin-top: 4px;\n    }\n"])));Pn(M||(M=wn(["\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n"])),rt,at,st,lt,ct,dt,ht,vt);var pt="masked_with_reveal";class ut extends Pe{constructor(){super(...arguments),this._revealed=!1,this._conditionsExpanded=!1,this._lockStatusExpanded=!1,this._editingField=null,this._subscribing=!1}get hass(){return this._hass}set hass(n){this._hass=n,this._subscribe()}static getConfigElement(){return document.createElement("div")}static getStubConfig(){return{config_entry_id:"",slot:1}}setConfig(n){var e,t,i,o;if(!n.config_entry_id&&!n.config_entry_title)throw new Error("config_entry_id or config_entry_title is required");if("number"!=typeof n.slot||n.slot<1||n.slot>9999)throw new Error("slot must be a number between 1 and 9999");(null===(e=this._config)||void 0===e?void 0:e.config_entry_id)===n.config_entry_id&&(null===(t=this._config)||void 0===t?void 0:t.config_entry_title)===n.config_entry_title&&(null===(i=this._config)||void 0===i?void 0:i.slot)===n.slot||(this._unsubscribe(),this._data=void 0),this._config=n;var r=null!==(o=n.collapsed_sections)&&void 0!==o?o:["conditions","lock_status"];this._conditionsExpanded=!r.includes("conditions"),this._lockStatusExpanded=!r.includes("lock_status"),this._subscribe()}connectedCallback(){super.connectedCallback(),this._subscribe()}disconnectedCallback(){super.disconnectedCallback(),this._unsubscribe()}updated(n){if(super.updated(n),this._editingField){var e,t,i=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector({name:".control-row .edit-input.name-edit-input",numberOfUses:'.condition-row .edit-input[type="number"]',pin:".pin-edit-input"}[this._editingField]);i&&(null===(t=this.shadowRoot)||void 0===t?void 0:t.activeElement)!==i&&(i.focus(),i.select())}}render(){return this._hass&&this._config?this._error?pe(z||(z=wn(['<ha-card>\n                <div class="message error">',"</div>\n            </ha-card>"])),this._error):this._data?this._renderFromData(this._data):pe(H||(H=wn(['<ha-card><div class="message">Connecting...</div></ha-card>']))):pe(P||(P=wn(['<ha-card><div class="message">Loading...</div></ha-card>'])))}_renderFromData(n){var e,t,i=null!==(e=null===(t=this._config)||void 0===t?void 0:t.code_display)&&void 0!==e?e:pt,{name:o,pin:r,enabled:a,active:s,conditions:l,locks:c}=n,d=n.pin_length,h=c.map((n=>({code:n.code,codeLength:n.code_length,entityId:n.entity_id,inSync:n.in_sync,lastSynced:n.last_synced,lockEntityId:n.entity_id,name:n.name}))),v=!1!==this._config.show_conditions,p=!1!==this._config.show_lock_status;return pe(O||(O=wn(["\n            <ha-card>\n                ",'\n                <div class="content">\n                    ',"\n                    ","\n                    ","\n                    ","\n                </div>\n            </ha-card>\n        "])),this._renderHeader(),this._renderPrimaryControls(o,r,d,a,i),this._renderStatus(a,s),v?this._renderConditionsSection(l):ge,p?this._renderLockStatusSection(h):ge)}_renderHeader(){var n,e,t,i,o,r,a,s,l,c,d=null!==(n=null===(e=this._data)||void 0===e||null===(e=e.locks)||void 0===e?void 0:e.length)&&void 0!==n?n:0,h=null===(t=this._data)||void 0===t?void 0:t.config_entry_title,v=null===(i=this._data)||void 0===i?void 0:i.last_used;return pe(N||(N=wn(['\n            <div class="header">\n                <div class="header-icon">\n                    <ha-svg-icon .path=','></ha-svg-icon>\n                </div>\n                <div class="header-info">\n                    <span class="header-title">Code Slot ',"</span>\n                    ",'\n                </div>\n                <div class="header-badges">\n                    ','\n                    <span\n                        class="header-badge ','"\n                        title=',"\n                        @click=","\n                    >\n                        <ha-svg-icon .path=","></ha-svg-icon>\n                        ","\n                    </span>\n                </div>\n            </div>\n        "])),"M7 14C5.9 14 5 13.1 5 12S5.9 10 7 10 9 10.9 9 12 8.1 14 7 14M12.6 10C11.8 7.7 9.6 6 7 6C3.7 6 1 8.7 1 12S3.7 18 7 18C9.6 18 11.8 16.3 12.6 14H16V18H20V14H23V10H12.6Z",null===(o=this._config)||void 0===o?void 0:o.slot,h?pe(R||(R=wn(['<span class="header-subtitle">',"</span>"])),h):ge,d>0?pe(U||(U=wn(['<span\n                              class="header-badge clickable"\n                              title=',"\n                              @click=","\n                          >\n                              <ha-svg-icon .path=","></ha-svg-icon>\n                              ","\n                          </span>"])),null!==(r=null===(a=this._data)||void 0===a||null===(a=a.locks)||void 0===a?void 0:a.map((n=>n.name)).join(", "))&&void 0!==r?r:"",this._toggleLockStatus,"M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z",d):ge,v?"clickable":"",v?null!==(s=this._data)&&void 0!==s&&s.last_used_lock?"Used on ".concat(this._data.last_used_lock," - Click to view history"):"Click to view PIN usage history":"This PIN has never been used",v?this._navigateToEventHistory:ge,"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",v?pe(j||(j=wn(["","\n                                  <ha-relative-time\n                                      .hass=","\n                                      .datetime=","\n                                  ></ha-relative-time>"])),null!==(l=null===(c=this._data)||void 0===c?void 0:c.last_used_lock)&&void 0!==l?l:"Used",this._hass,v):"Never used")}_navigateToEventHistory(){var n,e=null===(n=this._data)||void 0===n?void 0:n.event_entity_id;if(e){var t="/history?entity_id=".concat(encodeURIComponent(e));history.pushState(null,"",t),window.dispatchEvent(new CustomEvent("location-changed"))}}_renderPrimaryControls(n,e,t,i,o){var r="masked"===o||"masked_with_reveal"===o&&!this._revealed,a=null!==e||void 0!==t,s=e?r?"•".repeat(e.length):e:void 0!==t?"•".repeat(t):"—";return pe(T||(T=wn(['\n            <div class="lcm-section">\n                <div class="lcm-section-header">Primary Controls</div>\n\n                <div class="control-row">\n                    <span class="control-label">Name</span>\n                    <div style="flex: 1;">\n                        ','\n                    </div>\n                </div>\n\n                <div class="control-row">\n                    <span class="control-label">PIN</span>\n                    <div style="flex: 1;">\n                        <div class="pin-field">\n                            ',"\n                            ","\n                        </div>\n                        ",'\n                    </div>\n                </div>\n\n                <div class="enabled-row">\n                    <span class="enabled-label">Enabled</span>\n                    <ha-switch\n                        .checked=',"\n                        .disabled=","\n                        @change=","\n                    ></ha-switch>\n                </div>\n            </div>\n        "])),"name"===this._editingField?pe(I||(I=wn(['<input\n                                      class="edit-input name-edit-input"\n                                      type="text"\n                                      .value=',"\n                                      @blur=","\n                                      @keydown=",'\n                                  />\n                                  <div class="edit-help">Enter to save, Esc to cancel</div>'])),null!=n?n:"",this._handleEditBlur,this._handleEditKeydown):pe(V||(V=wn(['<span\n                                  class="control-value editable ','"\n                                  @click=',"\n                              >\n                                  ","\n                              </span>"])),n?"":"unnamed",(()=>this._startEditing("name")),null!=n?n:"Unnamed"),"pin"===this._editingField?pe(D||(D=wn(['<input\n                                      class="edit-input pin-edit-input"\n                                      type="text"\n                                      inputmode="numeric"\n                                      pattern="[0-9]*"\n                                      .value=',"\n                                      @blur=","\n                                      @keydown=","\n                                  />"])),null!=e?e:"",this._handleEditBlur,this._handleEditKeydown):pe(F||(F=wn(['<span\n                                      class="pin-value editable ','"\n                                      @click=',"\n                                  >\n                                      ","\n                                  </span>"])),r&&a?"masked":"",(()=>this._startEditing("pin")),s),"masked_with_reveal"===o&&a&&"pin"!==this._editingField?pe(q||(q=wn(['<ha-icon-button\n                                      class="pin-reveal"\n                                      .path=',"\n                                      @click=","\n                                      .label=","\n                                  ></ha-icon-button>"])),this._revealed?Ke:Ze,this._toggleReveal,this._revealed?"Hide PIN":"Reveal PIN"):ge,"pin"===this._editingField?pe(B||(B=wn(['<div class="edit-help">Enter to save, Esc to cancel</div>']))):ge,!0===i,null===i,this._handleEnabledToggle)}_renderStatus(n,e){var t,i,o;return!1===n?(t="disabled",i="Disabled",o="Slot is disabled by user"):!0===e?(t="active",i="Active",o=""):!1===e?(t="inactive",i="Inactive",o="Blocked by conditions"):(t="disabled",i="Unknown",o="Status unavailable"),pe(W||(W=wn(['\n            <div class="lcm-section">\n                <div class="lcm-section-header">Status</div>\n                <div class="status-row">\n                    <span class="lcm-status-dot ','"></span>\n                    <span class="status-text">',"</span>\n                </div>\n                ","\n            </div>\n        "])),t,i,o?pe(Z||(Z=wn(['<div class="status-detail">',"</div>"])),o):ge)}_renderConditionsSection(n){var{number_of_uses:e,calendar:t,calendar_next:i}=n,o=null!=e,r=void 0!==t,a=o&&0===e,s=r&&!1===t.active,l=o||r,c=(o?1:0)+(r?1:0),d=(a?1:0)+(s?1:0),h=l?pe(K||(K=wn(['<span class="collapsible-badge ','"\n                      >',"/",'</span\n                  >\n                  <span class="condition-blocking-icons">\n                      ',"\n                      ","\n                  </span>"])),d>0?"warning":"primary",d,c,o?pe(J||(J=wn(['<ha-svg-icon\n                                class="condition-icon ','"\n                                .path=','\n                                title="','"\n                            ></ha-svg-icon>'])),a?"blocking":"",Je,a?"No uses remaining":"".concat(e," uses remaining")):ge,r?pe(G||(G=wn(['<ha-svg-icon\n                                class="condition-icon ','"\n                                .path=','\n                                title="','"\n                            ></ha-svg-icon>'])),s?"blocking":"",s?We:Be,s?"Calendar blocking access":"Calendar allowing access"):ge):void 0,v=l?pe(Q||(Q=wn(["\n                  ","\n                  ","\n              "])),o?pe(X||(X=wn(['<div class="condition-row">\n                            <ha-svg-icon\n                                class="condition-row-icon ','"\n                                .path=','\n                            ></ha-svg-icon>\n                            <span class="condition-label">Uses remaining</span>\n                            <div style="flex: 1;">\n                                ',"\n                            </div>\n                        </div>"])),a?"blocking":"",Je,"numberOfUses"===this._editingField?pe(Y||(Y=wn(['<input\n                                              class="edit-input"\n                                              type="number"\n                                              inputmode="numeric"\n                                              min="0"\n                                              .value=',"\n                                              @blur=","\n                                              @keydown=",'\n                                          />\n                                          <div class="edit-help">Enter to save, Esc to cancel</div>'])),String(null!=e?e:0),this._handleEditBlur,this._handleEditKeydown):pe(nn||(nn=wn(['<span\n                                          class="condition-value editable"\n                                          @click=',"\n                                          >","</span\n                                      >"])),(()=>this._startEditing("numberOfUses")),e)):ge,r?this._renderCalendarCondition(t,i,n.calendar_entity_id):ge):pe(en||(en=wn(['<div class="no-conditions">No conditions configured for this slot</div>'])));return this._renderCollapsible("Conditions",this._conditionsExpanded,this._toggleConditions,v,h)}_renderCalendarCondition(n,e,t){var i=n.active,o=i?Be:We,r=i?"Access allowed":"Access blocked",a=i?"active":"inactive",s=!!t;return pe(tn||(tn=wn(['\n            <div\n                class="calendar-condition ','"\n                @click=','\n            >\n                <div class="calendar-header">\n                    <div class="calendar-status">\n                        <ha-svg-icon\n                            class="calendar-status-icon ','"\n                            .path=','\n                        ></ha-svg-icon>\n                        <span class="calendar-status-text">',"</span>\n                    </div>\n                </div>\n                ","\n                ","\n                ","\n            </div>\n        "])),s?"clickable":"",s?()=>this._navigateToCalendar(t):ge,a,o,r,i&&n.summary?pe(on||(on=wn(['<div class="calendar-event-summary">',"</div>"])),n.summary):ge,i&&n.end_time?pe(rn||(rn=wn(['<div class="calendar-event-time">\n                          Ends\n                          <ha-relative-time\n                              .hass=',"\n                              .datetime=","\n                          ></ha-relative-time>\n                      </div>"])),this._hass,n.end_time):ge,!i&&e?pe(an||(an=wn(['<div class="calendar-next-event">\n                          <div class="calendar-next-event-label">Next access</div>\n                          <div>\n                              <ha-relative-time\n                                  .hass=',"\n                                  .datetime=","\n                              ></ha-relative-time\n                              >","\n                          </div>\n                      </div>"])),this._hass,e.start_time,e.summary?" — ".concat(e.summary):""):ge)}_renderLockStatusSection(n){var e=n.filter((n=>!0===n.inSync)).length,t=n.length,i=t>0?pe(sn||(sn=wn(['<span class="collapsible-badge">',"/","</span>"])),e,t):void 0,o=n.length>0?pe(ln||(ln=wn(["",""])),n.map((n=>this._renderLockRow(n)))):pe(cn||(cn=wn(['<div class="no-conditions">No locks found</div>'])));return this._renderCollapsible("Lock Status",this._lockStatusExpanded,this._toggleLockStatus,o,i)}_renderLockRow(n){var e,t,i,o,r,a,s=!1!==(null===(e=this._config)||void 0===e?void 0:e.show_lock_sync),l=!1!==(null===(t=this._config)||void 0===t?void 0:t.show_code_sensors),c=null!==(i=null===(o=this._config)||void 0===o?void 0:o.code_display)&&void 0!==i?i:pt,d=l&&"masked_with_reveal"===c;!0===n.inSync?(r="synced",a="Synced"):!1===n.inSync?(r="pending",a="Pending"):(r="unknown",a="Unknown");var h=this._formatLockCode(n);return pe(dn||(dn=wn(['\n            <div class="lock-row">\n                ','\n                <div class="lock-info">\n                    <span\n                        class="lock-name"\n                        title="View lock codes"\n                        @click=',"\n                    >\n                        ","\n                    </span>\n                    ","\n                </div>\n                ","\n            </div>\n        "])),s?pe(hn||(hn=wn(['<ha-icon\n                          class="lcm-sync-icon ','"\n                          icon="mdi:check-circle"\n                      ></ha-icon>'])),r):ge,(()=>this._navigateToLock(n.lockEntityId)),n.name,s&&n.lastSynced?pe(vn||(vn=wn(['<span class="lock-synced-time">\n                              ',"\n                              <ha-relative-time\n                                  .hass=","\n                                  .datetime=","\n                              ></ha-relative-time>\n                          </span>"])),a,this._hass,n.lastSynced):s?pe(pn||(pn=wn(['<span class="lock-synced-time">',"</span>"])),a):ge,l&&h?pe(un||(un=wn(['<div class="lock-code-field">\n                          <span class="lock-code-value">',"</span>\n                          ","\n                      </div>"])),h,d?pe(gn||(gn=wn(['<ha-icon-button\n                                    class="lcm-reveal-button"\n                                    .path=',"\n                                    @click=","\n                                    .label=","\n                                ></ha-icon-button>"])),this._revealed?Ke:Ze,this._toggleReveal,this._revealed?"Hide codes":"Reveal codes"):ge):ge)}_formatLockCode(n){var e,t,i=null!==(e=null===(t=this._config)||void 0===t?void 0:t.code_display)&&void 0!==e?e:pt,o="masked"===i||"masked_with_reveal"===i&&!this._revealed;return null!==n.code&&""!==n.code?o?"•".repeat(String(n.code).length):String(n.code):n.codeLength?"•".repeat(n.codeLength):null}_toggleReveal(){this._revealed=!this._revealed,this._unsubscribe(),this._subscribe()}_renderCollapsible(n,e,t,i,o){return pe(mn||(mn=wn(['\n            <div class="collapsible-section">\n                <div class="collapsible-header" @click=','>\n                    <div class="collapsible-title">'," ",'</div>\n                    <ha-svg-icon\n                        class="collapsible-chevron"\n                        .path=','\n                    ></ha-svg-icon>\n                </div>\n                <div class="collapsible-content ','">',"</div>\n            </div>\n        "])),t,n,null!=o?o:ge,e?"M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z":"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",e?"expanded":"",i)}_toggleConditions(){this._conditionsExpanded=!this._conditionsExpanded}_toggleLockStatus(){this._lockStatusExpanded=!this._lockStatusExpanded}_handleEnabledToggle(n){var e=this;return $n((function*(){var t,i,o=n.target.checked;if(e._hass){var r=null!==(t=null===(i=e._data)||void 0===i||null===(i=i.entities)||void 0===i?void 0:i.enabled)&&void 0!==t?t:void 0;if(r)try{yield e._hass.callService("switch",o?"turn_on":"turn_off",{entity_id:r})}catch(n){console.error("Failed to toggle slot enabled state:",n)}}}))()}_startEditing(n){"pin"!==n||this._revealed?this._editingField=n:(this._revealed=!0,this._unsubscribe(),this._subscribe().then((()=>{this._editingField="pin"})))}_handleEditBlur(n){var e=n.target;this._saveEditValue(e.value),this._editingField=null}_handleEditKeydown(n){if("Enter"===n.key){var e=n.target;this._saveEditValue(e.value),this._editingField=null}else"Escape"===n.key&&(this._editingField=null)}_saveEditValue(n){var e=this;return $n((function*(){var t;if(e._hass&&e._editingField){var i={name:{entityKey:"name",errorMsg:"Failed to save name",service:"text.set_value",serviceData:n=>({value:n.trim()})},numberOfUses:{entityKey:"number_of_uses",errorMsg:"Failed to save number of uses",service:"number.set_value",serviceData:n=>{var e=parseInt(n,10);return!isNaN(e)&&e>=0?{value:e}:{}}},pin:{entityKey:"pin",errorMsg:"Failed to save PIN",service:"text.set_value",serviceData:n=>({value:n.trim()})}},o=i[e._editingField],r=null===(t=e._data)||void 0===t||null===(t=t.entities)||void 0===t?void 0:t[o.entityKey];if(r){var a=o.serviceData(n);if(0!==Object.keys(a).length){var[s,l]=o.service.split(".");try{yield e._hass.callService(s,l,xn({entity_id:r},a))}catch(n){console.error(o.errorMsg,n)}}}}}))()}_navigateToCalendar(n){var e="/calendar?entity_id=".concat(encodeURIComponent(n));history.pushState(null,"",e),window.dispatchEvent(new CustomEvent("location-changed"))}_navigateToLock(n){var e=new CustomEvent("hass-more-info",{bubbles:!0,composed:!0,detail:{entityId:n}});this.dispatchEvent(e)}_unsubscribe(){this._unsub&&(this._unsub(),this._unsub=void 0)}_shouldReveal(){var n,e,t=null!==(n=null===(e=this._config)||void 0===e?void 0:e.code_display)&&void 0!==n?n:pt;return"unmasked"===t||"masked_with_reveal"===t&&this._revealed}_subscribe(){var n=this;return $n((function*(){var e;if(n._hass&&n._config&&!n._unsub&&!n._subscribing)if(null!==(e=n._hass.connection)&&void 0!==e&&e.subscribeMessage){n._subscribing=!0;try{var t={reveal:n._shouldReveal(),slot:n._config.slot,type:"lock_code_manager/subscribe_code_slot"};n._config.config_entry_id?t.config_entry_id=n._config.config_entry_id:n._config.config_entry_title&&(t.config_entry_title=n._config.config_entry_title),n._unsub=yield n._hass.connection.subscribeMessage((e=>{n._data=e,n._error=void 0,n.requestUpdate()}),t)}catch(e){n._data=void 0,e instanceof Error?n._error=e.message:n._error="object"==typeof e&&null!==e&&"message"in e?String(e.message):"Failed to subscribe: ".concat(JSON.stringify(e)),n.requestUpdate()}finally{n._subscribing=!1}}else n._error="Websocket connection unavailable"}))()}}ut.styles=[rt,ct,st,dt,ht,vt,Pn(yn||(yn=wn(["\n            :host {\n                display: block;\n            }\n\n            ha-card {\n                overflow: hidden;\n            }\n\n            /* Header Section */\n            .header {\n                align-items: center;\n                background: var(--ha-card-background, var(--card-background-color, #fff));\n                border-bottom: 1px solid var(--lcm-border-color);\n                display: flex;\n                gap: 12px;\n                padding: 16px;\n            }\n\n            .header-icon {\n                align-items: center;\n                background: var(--lcm-active-bg);\n                border-radius: 50%;\n                color: var(--primary-color);\n                display: flex;\n                height: 40px;\n                justify-content: center;\n                width: 40px;\n            }\n\n            .header-icon ha-svg-icon {\n                --mdc-icon-size: 24px;\n            }\n\n            .header-info {\n                display: flex;\n                flex: 1;\n                flex-direction: column;\n                gap: 2px;\n                min-width: 0;\n            }\n\n            .header-title {\n                color: var(--primary-text-color);\n                font-size: 18px;\n                font-weight: 500;\n            }\n\n            .header-subtitle {\n                color: var(--secondary-text-color);\n                font-size: 12px;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n\n            .header-badges {\n                align-items: center;\n                display: flex;\n                flex-shrink: 0;\n                gap: 8px;\n            }\n\n            .header-badge {\n                align-items: center;\n                background: var(--lcm-section-bg);\n                border-radius: 12px;\n                color: var(--secondary-text-color);\n                display: flex;\n                font-size: 11px;\n                gap: 4px;\n                padding: 4px 8px;\n            }\n\n            .header-badge ha-svg-icon {\n                --mdc-icon-size: 14px;\n            }\n\n            .header-badge.clickable {\n                cursor: pointer;\n                transition: background-color 0.2s;\n            }\n\n            .header-badge.clickable:hover {\n                background: var(--lcm-section-bg-hover);\n            }\n\n            /* Content Sections */\n            .content {\n                display: flex;\n                flex-direction: column;\n                gap: 16px;\n                padding: 16px;\n            }\n\n            /* Condition-specific icons (extend shared collapsible styles) */\n            .condition-blocking-icons {\n                align-items: center;\n                display: flex;\n                gap: 4px;\n            }\n\n            .condition-icon {\n                --mdc-icon-size: 16px;\n                color: var(--lcm-disabled-color);\n            }\n\n            .condition-icon.blocking {\n                color: var(--lcm-warning-color);\n            }\n\n            .condition-row-icon {\n                --mdc-icon-size: 18px;\n                color: var(--lcm-disabled-color);\n                flex-shrink: 0;\n            }\n\n            .condition-row-icon.blocking {\n                color: var(--lcm-warning-color);\n            }\n\n            /* Primary Controls Section */\n            .control-row {\n                align-items: center;\n                display: flex;\n                gap: 16px;\n                margin-bottom: 12px;\n            }\n\n            .control-row:last-child {\n                margin-bottom: 0;\n            }\n\n            .control-label {\n                color: var(--secondary-text-color);\n                font-size: 14px;\n                min-width: 60px;\n            }\n\n            .control-value {\n                align-items: center;\n                color: var(--primary-text-color);\n                display: flex;\n                flex: 1;\n                font-size: 14px;\n                gap: 8px;\n            }\n\n            .control-value.unnamed {\n                color: var(--secondary-text-color);\n                font-style: italic;\n            }\n\n            .pin-field {\n                align-items: center;\n                display: flex;\n                flex: 1;\n                gap: 8px;\n            }\n\n            .pin-value {\n                font-family: var(--lcm-code-font);\n                font-size: var(--lcm-code-font-size);\n                font-weight: var(--lcm-code-font-weight);\n                letter-spacing: 2px;\n            }\n\n            .pin-value.masked {\n                color: var(--secondary-text-color);\n            }\n\n            .pin-reveal {\n                --mdc-icon-button-size: 32px;\n                --mdc-icon-size: 18px;\n            }\n\n            /* PIN-specific edit input (extends shared editable styles) */\n            .pin-edit-input {\n                font-family: var(--lcm-code-font);\n                font-size: var(--lcm-code-font-size);\n                font-weight: var(--lcm-code-font-weight);\n                letter-spacing: 2px;\n            }\n\n            .enabled-row {\n                align-items: center;\n                display: flex;\n                gap: 16px;\n                justify-content: space-between;\n            }\n\n            .enabled-label {\n                color: var(--secondary-text-color);\n                font-size: 14px;\n            }\n\n            /* Status Section */\n            .status-row {\n                align-items: center;\n                display: flex;\n                gap: 12px;\n            }\n\n            .status-text {\n                color: var(--primary-text-color);\n                font-size: 14px;\n                font-weight: 500;\n            }\n\n            .status-detail {\n                color: var(--secondary-text-color);\n                font-size: 13px;\n                margin-left: 24px;\n                margin-top: 4px;\n            }\n\n            /* Conditions Section */\n            .condition-row {\n                align-items: center;\n                display: flex;\n                gap: 12px;\n                padding: 8px 0;\n            }\n\n            .condition-row:first-child {\n                padding-top: 0;\n            }\n\n            .condition-row:last-child {\n                padding-bottom: 0;\n            }\n\n            .condition-label {\n                color: var(--secondary-text-color);\n                font-size: 13px;\n                min-width: 100px;\n            }\n\n            .condition-value {\n                color: var(--primary-text-color);\n                font-size: 14px;\n            }\n\n            .no-conditions {\n                color: var(--secondary-text-color);\n                font-size: 13px;\n                font-style: italic;\n            }\n\n            /* Calendar condition */\n            .calendar-condition {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n                padding: 8px 0;\n            }\n\n            .calendar-condition.clickable {\n                border-radius: 8px;\n                cursor: pointer;\n                margin: 8px -8px 0;\n                padding: 8px;\n                transition: background-color 0.2s;\n            }\n\n            .calendar-condition.clickable:hover {\n                background: var(--lcm-active-bg);\n            }\n\n            .calendar-condition:first-child {\n                padding-top: 0;\n            }\n\n            .calendar-condition.clickable:first-child {\n                margin-top: 0;\n            }\n\n            .calendar-header {\n                align-items: center;\n                display: flex;\n                gap: 8px;\n            }\n\n            .calendar-status {\n                align-items: center;\n                display: flex;\n                gap: 6px;\n            }\n\n            .calendar-status-icon {\n                --mdc-icon-size: 18px;\n            }\n\n            .calendar-status-icon.active {\n                color: var(--lcm-disabled-color);\n            }\n\n            .calendar-status-icon.inactive {\n                color: var(--lcm-warning-color);\n            }\n\n            .calendar-status-text {\n                color: var(--primary-text-color);\n                font-size: 14px;\n                font-weight: 500;\n            }\n\n            .calendar-event-summary {\n                color: var(--primary-text-color);\n                font-size: 13px;\n                margin-left: 22px;\n            }\n\n            .calendar-event-time {\n                color: var(--secondary-text-color);\n                font-size: 12px;\n                margin-left: 22px;\n            }\n\n            .calendar-next-event {\n                border-top: 1px solid var(--lcm-border-color);\n                color: var(--secondary-text-color);\n                font-size: 12px;\n                margin-left: 22px;\n                margin-top: 8px;\n                padding-top: 8px;\n            }\n\n            .calendar-next-event-label {\n                font-weight: 500;\n                text-transform: uppercase;\n                font-size: 10px;\n                letter-spacing: 0.05em;\n                margin-bottom: 2px;\n            }\n\n            /* Lock Status Section */\n            .lock-row {\n                align-items: center;\n                border-bottom: 1px solid var(--lcm-border-color);\n                display: flex;\n                gap: 12px;\n                padding: 10px 0;\n            }\n\n            .lock-row:last-child {\n                border-bottom: none;\n                padding-bottom: 0;\n            }\n\n            .lock-row:first-child {\n                padding-top: 0;\n            }\n\n            .lock-name {\n                color: var(--primary-text-color);\n                cursor: pointer;\n                flex: 1;\n                font-size: 14px;\n                min-width: 0;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n\n            .lock-name:hover {\n                color: var(--primary-color);\n                text-decoration: underline;\n            }\n\n            .lock-info {\n                display: flex;\n                flex: 1;\n                flex-direction: column;\n                gap: 2px;\n                min-width: 0;\n            }\n\n            .lock-synced-time {\n                color: var(--secondary-text-color);\n                font-size: 11px;\n            }\n\n            .lock-status-text {\n                color: var(--secondary-text-color);\n                font-size: 12px;\n            }\n\n            .lock-code-field {\n                align-items: center;\n                display: flex;\n                gap: 4px;\n            }\n\n            .lock-code-value {\n                color: var(--primary-text-color);\n                font-family: var(--lcm-code-font);\n                font-size: 13px;\n                font-weight: 500;\n                letter-spacing: var(--lcm-code-letter-spacing);\n            }\n\n            /* Message states */\n            .message {\n                color: var(--secondary-text-color);\n                font-style: italic;\n                padding: 16px;\n                text-align: center;\n            }\n\n            .error {\n                color: var(--error-color);\n            }\n        "])))],nt([ot()],ut.prototype,"_config",void 0),nt([ot()],ut.prototype,"_revealed",void 0),nt([ot()],ut.prototype,"_conditionsExpanded",void 0),nt([ot()],ut.prototype,"_lockStatusExpanded",void 0),nt([ot()],ut.prototype,"_data",void 0),nt([ot()],ut.prototype,"_error",void 0),nt([ot()],ut.prototype,"_editingField",void 0),nt([it({attribute:!1})],ut.prototype,"hass",null),customElements.define("lock-code-manager-slot",ut),window.customCards=window.customCards||[],window.customCards.push({description:"Displays and controls a Lock Code Manager code slot",name:"Lock Code Manager Slot",type:"custom:lock-code-manager-slot"});function gt(){return gt=$n((function*(n,e,t,i,o,r,a){var[s,l]=yield Promise.all([n.callWS({config_entry_id:e.entry_id,type:"lock_code_manager/get_slot_calendar_data"}),n.callWS({type:"lovelace/resources"})]),c=t.map((n=>function(n){var e=n.unique_id.split("|");return xn(xn({},n),{},{key:e[2],lockEntityId:e[3],slotNum:parseInt(e[1],10)})}(n))).sort(mt),d=Object.keys(s.slots).map((n=>parseInt(n,10))).map((n=>function(n,e,t,i){var o=[],r=[],a=[],s=[];t.filter((n=>n.slotNum===e)).forEach((n=>{n.key===He?a.push(n):n.key===Re?s.push(n):Ue.includes(n.key)?r.push(n):[Ne,Re,Oe].includes(n.key)||o.push(n)}));var l=t.find((n=>n.slotNum===e&&n.key===Oe)),c=t.find((n=>n.slotNum===e&&n.key===Ne)),d=i.slots[e];return{calendarEntityId:d,codeEventEntity:l,codeSensorEntities:a,conditionEntities:r,inSyncEntities:s,mainEntities:o,pinActiveEntity:c,slotNum:e}}(0,n,c,s))),h=[...s.locks.sort(((n,e)=>n.localeCompare(e))),...c.filter((n=>"active"===n.key)).map((n=>({entity:n.entity_id,name:"Slot ".concat(n.slotNum.toString()," active"),type:"state-label"})))],v=l.filter((n=>n.url.includes(De))).length>0,p=d.map((t=>function(n,e,t,i,o,r){return{cards:[{content:"## Code Slot ".concat(t.slotNum),type:"markdown"},{entities:[..._t(n,e,t.mainEntities),je,{entity:t.pinActiveEntity.entity_id,name:"PIN active"},{entity:t.codeEventEntity.entity_id,name:"PIN last used"},...bt(n,e,t.conditionEntities,t.calendarEntityId,"Conditions",i),...r?yt(n,e,t.inSyncEntities,"Locks in sync",i):[],...o?yt(n,e,t.codeSensorEntities,"Code slot sensors",i):[]],show_header_toggle:!1,type:"entities"}],type:"vertical-stack"}}(n,e,t,v,i,o)));if(r){var u=[...s.locks].sort(((e,t)=>{var i,o,r,a,s=null!==(i=null===(o=n.states[e])||void 0===o||null===(o=o.attributes)||void 0===o?void 0:o.friendly_name)&&void 0!==i?i:e,l=null!==(r=null===(a=n.states[t])||void 0===a||null===(a=a.attributes)||void 0===a?void 0:a.friendly_name)&&void 0!==r?r:t;return s.localeCompare(l,void 0,{sensitivity:"base"})})),g=u.map((n=>({code_display:a,lock_entity_id:n,type:"custom:lock-code-manager-lock-data"})));g.length>0&&p.push({cards:g,columns:Math.min(g.length,3),square:!1,type:"grid"})}return{badges:h,cards:p,panel:!1,path:Fe(e.title),title:e.title}})),gt.apply(this,arguments)}function mt(n,e){return n.slotNum<e.slotNum?-1:n.slotNum>e.slotNum?1:Te.indexOf(n.key)<Te.indexOf(e.key)?-1:Te.indexOf(n.key)>Te.indexOf(e.key)?1:n.key===e.key&&[Oe,He,Re].includes(n.key)&&n.lockEntityId<e.lockEntityId?-1:1}function _t(n,e,t){return t.map((t=>{var i,o;return[Re,He].includes(t.key)?{entity:t.entity_id,name:null!==(i=null===(o=n.states[t.lockEntityId])||void 0===o||null===(o=o.attributes)||void 0===o?void 0:o.friendly_name)&&void 0!==i?i:t.lockEntityId}:{entity:t.entity_id,name:ft(e,t)}}))}function ft(n,e){var t,i,o,r,a=null!==(t=null!==(i=e.name)&&void 0!==i?i:e.original_name)&&void 0!==t?t:"",s=null!==(o=n.title)&&void 0!==o?o:"",l=a.replace(new RegExp("^Code slot ".concat(e.slotNum,"\\s*"),"i"),"").trim();return s&&l.toLowerCase().startsWith(s.toLowerCase())&&(l=l.slice(s.length).trim()),l||(l=a||e.entity_id),(r=l).charAt(0).toUpperCase()+r.slice(1)}function yt(n,e,t,i,o){if(0===t.length)return[];var r=_t(n,e,t);return o?[je,{entities:r,head:{label:i,type:"section"},type:"custom:fold-entity-row"}]:[{label:i,type:"section"},...r]}function bt(n,e,t,i,o,r){if(0===t.length&&null==i)return[];var a=_t(n,e,t);return null!=i&&a.unshift({entity:i}),r?[je,{entities:a,head:{label:o,type:"section"},type:"custom:fold-entity-row"}]:[{label:o,type:"section"},...a]}customElements.define("ll-strategy-dashboard-lock-code-manager",class extends Zn{static generate(n,e){return $n((function*(){var t,i=yield e.callWS({domain:"lock_code_manager",type:"config_entries/get"});if(0===i.length)return{title:"Lock Code Manager",views:[qe("# No Lock Code Manager configurations found!")]};var o=i.map((e=>({path:Fe(e.title),strategy:{config_entry_id:e.entry_id,include_code_slot_sensors:n.include_code_slot_sensors,include_in_sync_sensors:n.include_in_sync_sensors,type:"custom:lock-code-manager"},title:e.title})));if(null!==(t=n.include_code_data_view)&&void 0!==t?t:Ie){var r=new Set;yield Promise.all(i.map(function(){var n=$n((function*(n){(yield e.callWS({config_entry_id:n.entry_id,type:"lock_code_manager/get_slot_calendar_data"})).locks.forEach((n=>r.add(n)))}));return function(e){return n.apply(this,arguments)}}()));var a=Array.from(r).sort(((n,t)=>{var i,o,r,a,s=null!==(i=null===(o=e.states[n])||void 0===o||null===(o=o.attributes)||void 0===o?void 0:o.friendly_name)&&void 0!==i?i:n,l=null!==(r=null===(a=e.states[t])||void 0===a||null===(a=a.attributes)||void 0===a?void 0:a.friendly_name)&&void 0!==r?r:t;return s.localeCompare(l,void 0,{sensitivity:"base"})})),s=a.map((e=>{var t;return{code_display:null!==(t=n.code_data_view_code_display)&&void 0!==t?t:Ve,lock_entity_id:e,type:"custom:lock-code-manager-lock-data"}})),l=s.length>0?[{cards:s,columns:Math.min(s.length,3),square:!1,type:"grid"}]:[{content:"# No locks found to display.",type:"markdown"}];o.push({cards:l,icon:"mdi:lock-smart",path:"user-codes",title:"User Codes"})}return 1===o.length&&o.push({title:"​"}),{title:"Lock Code Manager",views:o}}))()}}),customElements.define("ll-strategy-view-lock-code-manager",class extends Zn{static generate(n,e){return $n((function*(){var{config_entry_id:t,config_entry_title:i}=n;if("NOT_RUNNING"===e.config.state)return{cards:[{type:"starting"}]};var o=function(n){var{config_entry_id:e,config_entry_title:t}=n;return void 0===e&&void 0===t?{error:"missing",valid:!1}:void 0!==e&&void 0!==t?{error:"both_specified",valid:!1}:{valid:!0}}(n);if(!o.valid)return qe("## ERROR: Either `config_entry_title` or `config_entry_id` must be provided in the view config, but not both!");try{var r,a,s,l,{config_entry:c,entities:d}=yield e.callWS({config_entry_id:t,config_entry_title:i,type:"lock_code_manager/get_config_entry_entities"});return function(n,e,t,i,o,r,a){return gt.apply(this,arguments)}(e,c,d,null!==(r=n.include_code_slot_sensors)&&void 0!==r&&r,null===(a=n.include_in_sync_sensors)||void 0===a||a,null!==(s=n.include_code_data_view)&&void 0!==s?s:Ie,null!==(l=n.code_data_view_code_display)&&void 0!==l?l:Ve)}catch(n){return qe(function(n,e){var t=void 0!==n?"with ID `".concat(n,"`"):"called `".concat(e,"`");return"## ERROR: No Lock Code Manager configuration ".concat(t," found!")}(t,i))}}))()}});
